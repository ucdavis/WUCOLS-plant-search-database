{"version":3,"sources":["Search/Map.tsx","Utilities/useLocalStorage.ts","Search/sort-plants.ts","Plant/PlantTypeBadge.tsx","Plant/WaterDropRating.tsx","Plant/PlantFavoriteButton.tsx","Plant/PlantList.tsx","Plant/PlantDetailQrCode.tsx","Plant/PlantTable.tsx","Plant/plant-type-combinator-options.ts","Search/SearchForm.tsx","Search/search-criteria-converter.ts","Search/Welcome.tsx","Search/Search.tsx","Plant/PlantDetail.tsx","Favorites/Favorites.tsx","Plant/BenchCardDocument.tsx","App.tsx","Utilities/serviceWorker.ts","index.tsx"],"names":["containerStyle","width","height","CityMarker","city","onClick","markerRef","React","useRef","iw","window","google","maps","InfoWindow","content","name","setNameVisible","v","marker","current","map","open","anchor","shouldFocus","close","position","ref","onMouseOver","onMouseOut","apiKey","process","REACT_APP_GOOGLE_MAPS_API_KEY","libraries","MyComponent","cities","onSelect","isLoaded","useJsApiLoader","id","googleMapsApiKey","useState","setMap","fitPositions","positions","bounds","LatLngBounds","forEach","p","extend","fitBounds","onLoad","useCallback","cityPositions","c","LatLng","visitorMarker","undefined","console","log","length","extraControls","document","createElement","style","marginBottom","display","flexDirection","innerHTML","controls","ControlPosition","BOTTOM_CENTER","push","buttons","getElementsByTagName","addEventListener","navigator","geolocation","getCurrentPosition","pos","currentPosition","lat","coords","latitude","lng","longitude","measurements","cityPosition","distance","geometry","spherical","computeDistanceBetween","sort","a","b","slice","m","setTimeout","Marker","draggable","animation","Animation","DROP","icon","zIndex","addListener","getAnimation","setAnimation","BOUNCE","err","warn","code","message","alert","enableHighAccuracy","timeout","maximumAge","onUnmount","mapContainerStyle","key","memo","useLocalStorage","initialValue","item","localStorage","getItem","JSON","parse","error","storedValue","setStoredValue","value","valueToStore","Function","setItem","stringify","sortValueByWaterUseCode","VL","LO","M","H","N","getWaterUseSortValue","sortPlants","region","plants","plantA","plantB","waterUseByRegion","PlantTypeBadge","type","plantTypeNameByCode","className","role","WaterDropRating","waterUseCode","DropIcon","filled","opacity","color","padding","faTint","d","D","PlantFavoriteButton","plant","togglePlantFavorite","isPlantFavorite","FavoriteIcon","faStar","dropShadowCss","title","WebkitFilter","filter","PlantList","photosByPlantName","waterUseByCode","imageSize","wu","photoUrl","botanicalName","large","url","top","right","background","backgroundSize","src","alt","percentageET0","to","commonName","types","t","plantDetailQrCodeFromId","destination_url","REACT_APP_PLANT_DETAIL_URL_PATTERN","URL","replace","toString","plantDetailUrlFromId","image_url","encodeURIComponent","PlantDetailQrCode","href","target","rel","PlantTable","queryString","showAvailableMedia","rowSpan","small","plantFactor","combinators","label","fn","plantTypeCombinatorOptions","default","array","byId","reduce","dict","MapModal","visible","setVisible","onCityChange","tabIndex","left","Map","SearchForm","cityOptions","searchCriteria","plantTypes","waterUseClassifications","updateSearchCriteria","mapModalVisible","setMapModalVisible","selectAllWaterUseClassifications","selected","pageNumber","o","selectAllPlantTypes","pt","everythingElse","placeholder","onChange","e","toLowerCase","checked","htmlFor","styles","container","base","flex","options","plantTypeCombinator","ptc","noOptionsMessage","faMap","getDefaultSearchCriteria","SearchCriteriaConverter","fromQuerystring","qs","ps","URLSearchParams","parseInt","get","getAll","plantTypeCombinatorId","cityId","toQuerystring","sc","Object","entries","initSearchCriteria","querystring","up","Welcome","faLeaf","w","i","faMapMarkerAlt","description","faSearch","txt","faDownload","f","Search","data","setSearchCriteria","plantsViewModes","component","faBars","props","faThLarge","faTh","plantsViewModeId","plantsViewMode","vm","searchPerformed","values","some","matchingPlants","useMemo","noType","every","noWu","k","typeFn","bind","typeOk","indexOf","wuOk","nameOk","searchName","pageCount","Math","max","ceil","currentPage","paginationModel","ultimatePagination","getPaginationModel","totalPages","boundaryPagesRange","siblingPagesRange","hideEllipsis","hidePreviousAndNextPageLinks","hideFirstAndLastPageLinks","actualPagination","Pagination","active","isActive","pn","Item","Ellipsis","photos","PlantDetail","regions","benchCardTemplates","regionWaterUsePairs","r","leadPhoto","webBenchCard","objectFit","whiteSpace","culturalInformation","dangerouslySetInnerHTML","__html","full","caption","borderLeft","bct","maxWidth","Favorites","favoritePlants","getDownloadActions","method","downloadButtons","faFileExcel","faQrcode","faIdCard","debug","StyleSheet","create","page","textAlign","backgroundColor","waterUseClassificationBox","logo","logos","section","margin","flexGrow","dropRatingByWaterUseCode","Font","register","family","fontFamily","justifyContent","BenchCardDocument","benchCardTemplate","qrCodeUrl","sizeInches","sizeInInches","sizePoints","x","y","logoStyle","size","fontSize","fontWeight","fontStyle","paddingBottom","alignItems","defaultProps","App","location","useLocation","history","useHistory","search","pathname","isFavoriteByPlantId","updateIsFavoriteByPlantId","useToasts","addToast","removeToast","isFavoriteNow","thisToastId","appearance","transitionState","autoDismiss","toastId","ExcelFile","ReactExport","ExcelSheet","cityRegionIx","join","columns","favoriteAsSpreadsheets","excelData","Promise","all","fetch","then","blob","plantBlobPairs","zip","JSZip","file","generateAsync","saveAs","pdf","toBlob","el","filename","hideElement","dataSet","ReactDOM","render","getElementById","tooltip","activeClassName","exact","path","match","params","plantId","url_keyword","bctId","showToolbar","Boolean","hostname","json","wucols_data","placement","autoDismissTimeout","serviceWorker","ready","registration","unregister","catch"],"mappings":"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","file":"static/js/main.18c31617.chunk.js","sourcesContent":["import React from \"react\";\nimport { GoogleMap, useJsApiLoader, Marker } from \"@react-google-maps/api\";\nimport { City } from \"../types\";\n\ndeclare global {\n  interface Window {\n    map: google.maps.Map;\n    extraControls: HTMLDivElement;\n    currentPosition: google.maps.LatLng;\n  }\n}\n\nconst containerStyle = {\n  width: \"100%\",\n  height: \"70vh\",\n};\n\ninterface CityMarkerProps {\n  city: City;\n  onClick: (city: City) => void;\n}\n\nconst CityMarker = ({ city, onClick }: CityMarkerProps) => {\n  const markerRef = React.useRef<Marker | null>(null);\n  let iw = new window.google.maps.InfoWindow({\n    content: `<div>${city.name}</div>`,\n  });\n  const setNameVisible = (v: boolean) => {\n    if (v) {\n      let marker = markerRef.current?.marker as any;\n      let map = marker?.map;\n      iw.open({\n        anchor: marker,\n        map,\n        shouldFocus: false,\n      });\n    } else {\n      iw.close();\n    }\n  };\n  return (\n    <>\n      <Marker\n        position={city.position}\n        ref={(ref) => (markerRef.current = ref)}\n        onClick={() => {\n          onClick(city);\n          iw.close();\n        }}\n        onMouseOver={() => {\n          setNameVisible(true);\n        }}\n        onMouseOut={() => {\n          setNameVisible(false);\n        }}\n      />\n    </>\n  );\n};\n\nconst apiKey = process.env.REACT_APP_GOOGLE_MAPS_API_KEY;\nconst libraries: [\"geometry\"] = [\"geometry\"];\n\ninterface MyComponentProps {\n  cities: City[];\n  onSelect: (city: City) => void;\n}\n\nfunction MyComponent({ cities, onSelect }: MyComponentProps) {\n  interface CityMeasurement {\n    city: City;\n    cityPosition: google.maps.LatLng;\n    distance: number;\n  }\n\n  const { isLoaded } = useJsApiLoader({\n    id: \"google-map-script\",\n    libraries,\n    googleMapsApiKey: apiKey,\n  });\n\n  const [, setMap] = React.useState<google.maps.Map | null>(null);\n\n  const fitPositions = (\n    map: google.maps.Map,\n    positions: google.maps.LatLng[]\n  ) => {\n    const bounds = new window.google.maps.LatLngBounds();\n    positions.forEach((p) => {\n      bounds.extend(p);\n    });\n    map.fitBounds(bounds);\n  };\n\n  const onLoad = React.useCallback(\n    function callback(map: google.maps.Map) {\n      const cityPositions = cities.map(\n        (c) => new google.maps.LatLng(c.position)\n      );\n      var visitorMarker: google.maps.Marker | undefined = undefined;\n      fitPositions(map, cityPositions);\n      setMap(map);\n      window.map = map;\n      console.log(`fit bounds to ${cities.length} cities`);\n      const extraControls = window.document.createElement(\"div\");\n      extraControls.style.marginBottom = \"2em\";\n      extraControls.style.display = \"flex\";\n      extraControls.style.flexDirection = \"column\";\n      extraControls.innerHTML = `\n        <button\n          draggable=\"false\" \n          aria-label=\"Use my location\"\n          title=\"Use my location\"\n          type=\"button\"\n          aria-pressed=\"true\"\n          style=\" background: none padding-box rgb(255, 255, 255); display: table-cell; border: 0px; margin: 0px; padding: 0px 17px; text-transform: none; appearance: none; position: relative; cursor: pointer; user-select: none; direction: ltr; overflow: hidden; text-align: center; height: 40px; vertical-align: middle; color: rgb(0, 0, 0); font-family: Roboto, Arial, sans-serif; font-size: 18px; border-bottom-left-radius: 2px; border-top-left-radius: 2px; box-shadow: rgba(0, 0, 0, 0.3) 0px 1px 4px -1px; min-width: 35px; font-weight: 500; margin-bottom:1em;\" aria-expanded=\"false\">\n            Use my location\n          </button>`;\n      extraControls.innerHTML += `\n        <button\n          draggable=\"false\" \n          aria-label=\"View all cities\"\n          title=\"View all cities\"\n          type=\"button\"\n          aria-pressed=\"true\"\n          style=\"background: none padding-box rgb(255, 255, 255); display: table-cell; border: 0px; margin: 0px; padding: 0px 17px; text-transform: none; appearance: none; position: relative; cursor: pointer; user-select: none; direction: ltr; overflow: hidden; text-align: center; height: 40px; vertical-align: middle; color: rgb(0, 0, 0); font-family: Roboto, Arial, sans-serif; font-size: 18px; border-bottom-left-radius: 2px; border-top-left-radius: 2px; box-shadow: rgba(0, 0, 0, 0.3) 0px 1px 4px -1px; min-width: 35px; font-weight: 500;\" aria-expanded=\"false\">\n            View All Cities\n          </button>`;\n      map.controls[window.google.maps.ControlPosition.BOTTOM_CENTER].push(\n        extraControls\n      );\n      window.extraControls = extraControls;\n      let buttons = extraControls.getElementsByTagName(\"button\");\n\n      buttons[1].addEventListener(\"click\", () => {\n        fitPositions(map, cityPositions);\n      });\n\n      buttons[0].addEventListener(\"click\", () => {\n        function success(pos: GeolocationPosition) {\n          let currentPosition = new window.google.maps.LatLng({\n            lat: pos.coords.latitude,\n            lng: pos.coords.longitude,\n          });\n          window.currentPosition = currentPosition;\n          console.log(\"Your current position is:\", currentPosition);\n          var measurements = cities\n            .map((city) => {\n              let cityPosition = new window.google.maps.LatLng(city.position);\n              return {\n                city,\n                cityPosition,\n                distance:\n                  window.google.maps.geometry.spherical.computeDistanceBetween(\n                    currentPosition,\n                    cityPosition\n                  ),\n              } as CityMeasurement;\n            })\n            .sort((a, b) => a.distance - b.distance)\n            .slice(0, 5);\n          fitPositions(\n            map,\n            measurements.map((m) => m.cityPosition)\n          );\n\n          window.setTimeout(() => {\n            if (visitorMarker) {\n              visitorMarker.setMap(null);\n            }\n            visitorMarker = new window.google.maps.Marker({\n              map,\n              draggable: false,\n              animation: window.google.maps.Animation.DROP,\n              icon: \"http://maps.google.com/mapfiles/kml/shapes/man.png\", //'http://earth.google.com/images/kml-icons/track-directional/track-0.png'\n              zIndex: 0,\n              position: currentPosition,\n            });\n            visitorMarker.addListener(\"click\", function toggleBounce() {\n              if (!!visitorMarker) {\n                if (visitorMarker.getAnimation() !== null) {\n                  visitorMarker.setAnimation(null);\n                } else {\n                  visitorMarker.setAnimation(\n                    window.google.maps.Animation.BOUNCE\n                  );\n                }\n              }\n            });\n          }, 1000);\n\n          console.log(measurements);\n        }\n\n        function error(err: GeolocationPositionError) {\n          console.warn(`ERROR(${err.code}): ${err.message}`);\n          alert(\n            err.code === 3\n              ? `Unable to get your location in a reasonable amount of time`\n              : \"Unable to get your location\"\n          );\n        }\n\n        window.navigator.geolocation.getCurrentPosition(success, error, {\n          //for best performance: https://stackoverflow.com/questions/3752383/geolocation-is-so-slow-what-im-doing-wrong\n          enableHighAccuracy: false,\n          timeout: 5000,\n          maximumAge: 1000 * 60,\n        });\n      });\n    },\n    [cities]\n  );\n\n  const onUnmount = React.useCallback(function callback(map) {\n    setMap(null);\n  }, []);\n\n  return isLoaded ? (\n    <GoogleMap\n      mapContainerStyle={containerStyle}\n      onLoad={onLoad}\n      onUnmount={onUnmount}\n    >\n      {/* Child components, such as markers, info windows, etc. */}\n      {cities.map((c) => (\n        <CityMarker key={c.id} city={c} onClick={onSelect} />\n      ))}\n    </GoogleMap>\n  ) : (\n    <></>\n  );\n}\n\nexport default React.memo(MyComponent);\n","import React from \"react\";\n\nfunction useLocalStorage<T>(\n  key: string,\n  initialValue: T\n): [T, (value: T) => void] {\n  // State to store our value\n  // Pass initial state function to useState so logic is only executed once\n  const [storedValue, setStoredValue] = React.useState(() => {\n    try {\n      // Get from local storage by key\n      const item = window.localStorage.getItem(key);\n      // Parse stored json or if none return initialValue\n      return item ? (JSON.parse(item) as T) : initialValue;\n    } catch (error) {\n      // If error also return initialValue\n      console.log(error);\n      return initialValue;\n    }\n  });\n\n  // Return a wrapped version of useState's setter function that ...\n  // ... persists the new value to localStorage.\n  const setValue = (value: T) => {\n    try {\n      // Allow value to be a function so we have same API as useState\n      const valueToStore =\n        value instanceof Function ? value(storedValue) : value;\n      // Save state\n      setStoredValue(valueToStore);\n      // Save to local storage\n      window.localStorage.setItem(key, JSON.stringify(valueToStore));\n    } catch (error) {\n      // A more advanced implementation would handle the error case\n      console.log(error);\n    }\n  };\n\n  return [storedValue, setValue];\n}\n\nexport default useLocalStorage;\n","import { Plant, WaterUseCode } from \"../types\";\n\nconst sortValueByWaterUseCode: {\n  [key in WaterUseCode]: number;\n} = {\n  VL: 1,\n  LO: 2,\n  M: 3,\n  H: 4,\n  \"?\": 5,\n  \"/\": 6,\n  N: 7,\n};\n\nconst getWaterUseSortValue = (code: WaterUseCode) => {\n  return sortValueByWaterUseCode[code] || 99;\n};\n\nconst sortPlants = (region: number) => (plants: Plant[]) =>\n  plants.sort((plantA: Plant, plantB: Plant) => {\n    let a = getWaterUseSortValue(plantA.waterUseByRegion[region - 1]);\n    let b = getWaterUseSortValue(plantB.waterUseByRegion[region - 1]);\n    return a < b ? -1 : a > b ? 1 : 0;\n  });\n\nexport default sortPlants;\n","import React from \"react\";\n\nimport { TypeCode } from \"../types\";\n\ninterface Props {\n  type: TypeCode;\n  plantTypeNameByCode: { [key: string]: string };\n}\n\nconst PlantTypeBadge = ({ type, plantTypeNameByCode }: Props) => (\n  <span>\n    <span className=\"badge badge-plantType\">\n      {/*\n      🌻💮🌺✽✾✿🎕\n      🌼🌸🌹❁❃❋🌴𐇲\n      🌷❀⚘𐇵🍀☘🌱🍁\n      */}\n      {type === \"A\" && (\n        <span role=\"img\" aria-label=\"flower\">\n          🌸{\" \"}\n        </span>\n      )}\n      {plantTypeNameByCode[type]}\n    </span>{\" \"}\n  </span>\n);\n\nexport default PlantTypeBadge;\n","import React from \"react\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faTint } from \"@fortawesome/free-solid-svg-icons\";\nimport { WaterUseCode } from \"../types\";\n\ninterface Props {\n  waterUseCode: WaterUseCode;\n}\n\nconst WaterDropRating = ({ waterUseCode }: Props) => {\n  interface DropProps {\n    filled?: boolean;\n  }\n\n  const DropIcon = ({ filled }: DropProps) => (\n    <span\n      style={{\n        opacity: filled ? 1 : 0.3,\n        color: filled ? \"#007bff\" : \"grey\",\n        padding: \"0 2px\",\n      }}\n    >\n      <FontAwesomeIcon icon={faTint} />\n    </span>\n  );\n\n  let d = <DropIcon />;\n  let D = <DropIcon filled={true} />;\n  //let d = <span role=\"img\" aria-label=\"empty-water-drop\" style={{opacity:0.3}}>💧</span>;\n  //let D = <span role=\"img\" aria-label=\"full-water-drop\">💧</span>;\n  switch (waterUseCode) {\n    case \"?\":\n      return (\n        <>\n          {d}\n          {d}\n          {d}\n          {d}\n        </>\n      );\n    case \"N\":\n      return (\n        <>\n          {d}\n          {d}\n          {d}\n          {d}\n        </>\n      );\n    case \"VL\":\n      return (\n        <>\n          {D}\n          {d}\n          {d}\n          {d}\n        </>\n      );\n    case \"LO\":\n      return (\n        <>\n          {D}\n          {D}\n          {d}\n          {d}\n        </>\n      );\n    case \"M\":\n      return (\n        <>\n          {D}\n          {D}\n          {D}\n          {d}\n        </>\n      );\n    case \"H\":\n      return (\n        <>\n          {D}\n          {D}\n          {D}\n          {D}\n        </>\n      );\n    default:\n      return <>N/A</>;\n  }\n};\n\nexport default WaterDropRating;\n","import React from \"react\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faStar } from \"@fortawesome/free-solid-svg-icons\";\nimport { Plant } from \"../types\";\n\ninterface Props {\n  plant: Plant;\n  togglePlantFavorite: (plant: Plant) => void;\n  isPlantFavorite: (plant: Plant) => boolean;\n}\n\nconst PlantFavoriteButton = ({\n  plant,\n  togglePlantFavorite,\n  isPlantFavorite,\n}: Props) => {\n  const FavoriteIcon = () => <FontAwesomeIcon icon={faStar} />;\n  const dropShadowCss = \"drop-shadow( 0px 1px 1px rgba(0, 0, 0, .3))\";\n  return (\n    <button\n      title={\n        isPlantFavorite(plant)\n          ? \"This plant is in your favorites.  Click to remove it.\"\n          : \"Click to add this plant to your favorites.\"\n      }\n      className={\n        \"btn \" + (isPlantFavorite(plant) ? \" btn-warning\" : \"btn-light\")\n      }\n      onClick={() => togglePlantFavorite(plant)}\n    >\n      {isPlantFavorite(plant) ? (\n        <span\n          style={{\n            color: \"hsl(60deg 100% 45%)\",\n            WebkitFilter: dropShadowCss,\n            filter: dropShadowCss,\n          }}\n        >\n          <FavoriteIcon />\n        </span>\n      ) : (\n        <span style={{ opacity: 0.2 }}>\n          <FavoriteIcon />\n        </span>\n      )}\n    </button>\n  );\n};\n\nexport default PlantFavoriteButton;\n","import React from \"react\";\nimport PlantTypeBadge from \"./PlantTypeBadge\";\nimport WaterDropRating from \"./WaterDropRating\";\nimport PlantFavoriteButton from \"./PlantFavoriteButton\";\nimport { Link } from \"react-router-dom\";\nimport { Photo, Plant, WaterUseClassification } from \"../types\";\n\ninterface Props {\n  className: string;\n  plants: Plant[];\n  photosByPlantName: { [key: string]: Photo };\n  plantTypeNameByCode: { [key: string]: string };\n  waterUseByCode: { [key: string]: WaterUseClassification };\n  region: number;\n  isPlantFavorite: (plant: Plant) => boolean;\n  togglePlantFavorite: (plant: Plant) => void;\n}\n\nconst PlantList = ({\n  className,\n  plants,\n  photosByPlantName,\n  plantTypeNameByCode,\n  waterUseByCode,\n  region,\n  isPlantFavorite,\n  togglePlantFavorite,\n}: Props) => {\n  return (\n    <div className=\"row no-gutters\">\n      {plants.map((p) => {\n        const imageSize = \"150px\";\n        let wu = waterUseByCode[p.waterUseByRegion[region - 1]];\n        let photoUrl = !photosByPlantName[p.botanicalName]\n          ? \"https://via.placeholder.com/200\"\n          : photosByPlantName[p.botanicalName].large.url;\n        return (\n          <div className={className} key={p.id}>\n            <div className=\"card mr-2 mb-2\">\n              <div className=\"d-flex\">\n                <div className=\"d-flex-shrink-0\">\n                  <div style={{ position: \"relative\" }}>\n                    <div\n                      style={{\n                        position: \"absolute\",\n                        top: \"10px\",\n                        right: \"10px\",\n                        color: \"unset\",\n                      }}\n                    >\n                      <PlantFavoriteButton\n                        {...{ plant: p, togglePlantFavorite, isPlantFavorite }}\n                      />\n                    </div>\n                    <img\n                      className=\"card-img\"\n                      style={{\n                        width: imageSize,\n                        height: imageSize,\n                        background: `url(${photoUrl})`,\n                        backgroundSize: \"cover\",\n                      }}\n                      src={photoUrl}\n                      alt={p.botanicalName}\n                    />\n                  </div>\n                </div>\n                <div className=\"d-flex-grow-1 ml-3 flex-fill\">\n                  <div className=\"card-body\">\n                    <div className=\"float-right text-right ml-3\">\n                      <WaterDropRating waterUseCode={wu.code} />\n                      <br />\n                      <small>{wu.name}</small>\n                      <br />\n                      <small>\n                        {wu.percentageET0}% ET<sub>0</sub>\n                      </small>\n\n                      {/*\n                      <div>\n                        <input type=\"checkbox\" checked={isPlantFavorite(p)} onChange={() => togglePlantFavorite(p)}/>\n                      </div>\n                      */}\n                    </div>\n                    <Link to={`/plant/${p.id}`}>\n                      <h6 className=\"mt-0 mb-1\">\n                        <em>{p.botanicalName}</em>\n                      </h6>\n                    </Link>\n                    <div>{p.commonName}</div>\n                    <div>\n                      {p.types.map((t) => (\n                        <PlantTypeBadge\n                          plantTypeNameByCode={plantTypeNameByCode}\n                          type={t}\n                          key={t}\n                        />\n                      ))}\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        );\n      })}\n    </div>\n  );\n};\n\nexport default PlantList;\n","import React from \"react\";\nimport { Plant } from \"../types\";\n\nconst googleQrCodeUrl = (destination_url: string) =>\n  `https://chart.googleapis.com/chart?chs=500x500&cht=qr&choe=UTF-8&chl=${encodeURIComponent(\n    destination_url\n  )}`;\n\nconst plantDetailUrlFromId = (id: number) =>\n  /* example expected patterns:\n    - https://some.website-of-yours.app/plants/:id/detail \n    - https://some.website-of-yours.app/plants?id=:id&utm_source=qr_code\n  */\n  (process.env.REACT_APP_PLANT_DETAIL_URL_PATTERN || \"\") !== \"\"\n    ? new URL(\n        process.env.REACT_APP_PLANT_DETAIL_URL_PATTERN.replace(\n          \":id\",\n          id.toString()\n        )\n      ).toString()\n    : \"\";\n\nexport const plantDetailQrCodeFromId = (id: number) => {\n  let url = plantDetailUrlFromId(id);\n  return {\n    destination_url: url,\n    image_url: googleQrCodeUrl(url),\n  };\n};\n\ninterface Props {\n  plant: Plant;\n  style?: React.CSSProperties;\n}\n\nexport const PlantDetailQrCode = ({ plant, style }: Props) => {\n  let { destination_url, image_url } = plantDetailQrCodeFromId(plant.id);\n  return (\n    <a href={destination_url} target=\"_blank\" rel=\"noreferrer\">\n      <img\n        src={image_url}\n        alt={\"QR Code for \" + plant.botanicalName}\n        className=\"img-responsive\"\n        style={{ width: \"64px\", ...(style || {}) }}\n      />\n    </a>\n  );\n};\n","import React from \"react\";\nimport PlantTypeBadge from \"./PlantTypeBadge\";\nimport WaterDropRating from \"./WaterDropRating\";\nimport PlantFavoriteButton from \"./PlantFavoriteButton\";\nimport { PlantDetailQrCode } from \"./PlantDetailQrCode\";\nimport { Link } from \"react-router-dom\";\nimport { Photo, Plant, WaterUseClassification } from \"../types\";\n\ninterface Props {\n  queryString: string;\n  showAvailableMedia: boolean;\n  plants: Plant[];\n  photosByPlantName: { [key: string]: Photo };\n  plantTypeNameByCode: { [key: string]: string };\n  waterUseByCode: { [key: string]: WaterUseClassification };\n  region: number;\n  isPlantFavorite: (plant: Plant) => boolean;\n  togglePlantFavorite: (plant: Plant) => void;\n}\n\nconst PlantTable = ({\n  queryString,\n  showAvailableMedia,\n  plants,\n  photosByPlantName,\n  plantTypeNameByCode,\n  waterUseByCode,\n  region,\n  isPlantFavorite,\n  togglePlantFavorite,\n}: Props) => {\n  return (\n    <table className=\"table table-sm \">\n      <thead>\n        <tr>\n          <th rowSpan={2}>Photo</th>\n          <th rowSpan={2}>Name</th>\n          {showAvailableMedia && (\n            <>\n              <th rowSpan={2}>QR Code</th>\n            </>\n          )}\n          <th rowSpan={2}>Water Use</th>\n          <th rowSpan={2}>Type(s)</th>\n          <th rowSpan={2}>Favorite</th>\n        </tr>\n      </thead>\n      <tbody>\n        {plants.map((p) => {\n          const imageSize = \"64px\";\n          let wu = waterUseByCode[p.waterUseByRegion[region - 1]];\n          let photoUrl = !photosByPlantName[p.botanicalName]\n            ? \"https://via.placeholder.com/200\"\n            : photosByPlantName[p.botanicalName].small.url;\n          return (\n            <tr key={p.id}>\n              <td style={{ width: imageSize }}>\n                <img\n                  className=\"card-img mr-2\"\n                  style={{\n                    width: imageSize,\n                    height: imageSize,\n                    background: `url(${photoUrl})`,\n                    backgroundSize: \"cover\",\n                  }}\n                  src={photoUrl}\n                  alt={p.botanicalName}\n                />\n              </td>\n              <td>\n                <Link to={`/plant/${p.id}${queryString}`}>\n                  <h6 className=\"mt-0 mb-1\">\n                    <em>{p.botanicalName}</em>\n                  </h6>\n                </Link>\n                <div>{p.commonName}</div>\n              </td>\n              {showAvailableMedia && (\n                <td>\n                  <PlantDetailQrCode plant={p} />\n                </td>\n              )}\n              <td>\n                <WaterDropRating waterUseCode={wu.code} />\n                <small className=\"ml-2\">{wu.name}</small>\n                <br />\n                <small>\n                  {wu.percentageET0}% ET<sub>0</sub>\n                  <br />\n                  Plant Factor: {wu.plantFactor}\n                </small>\n              </td>\n              <td>\n                {p.types.map((t) => (\n                  <PlantTypeBadge\n                    plantTypeNameByCode={plantTypeNameByCode}\n                    type={t}\n                    key={t}\n                  />\n                ))}\n              </td>\n              <td>\n                <PlantFavoriteButton\n                  {...{ plant: p, togglePlantFavorite, isPlantFavorite }}\n                />\n              </td>\n            </tr>\n          );\n        })}\n      </tbody>\n    </table>\n  );\n};\n\nexport default PlantTable;\n","import { PlantTypeCombinator, PlantTypeCombinatorOptions } from \"../types\";\n\nconst combinators: PlantTypeCombinator[] = [\n  {\n    label: \"Match plants with ANY of\",\n    value: \"ANY\",\n    fn: (a: any, b: any) => a || b,\n  },\n  {\n    label: \"Match plants with ALL of\",\n    value: \"ALL\",\n    fn: (a: any, b: any) => a && b,\n  },\n];\n\nconst plantTypeCombinatorOptions: PlantTypeCombinatorOptions = {\n  default: combinators[0],\n  array: combinators,\n  byId: combinators.reduce(\n    (dict: { [key: string]: PlantTypeCombinator }, c) => {\n      dict[c.value] = c;\n      return dict;\n    },\n    {}\n  ),\n};\n\nexport default plantTypeCombinatorOptions;\n","import React from \"react\";\nimport Select, { ActionMeta, ValueType } from \"react-select\";\nimport Map from \"./Map\";\nimport plantTypeCombinatorOptions from \"../Plant/plant-type-combinator-options\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faMap } from \"@fortawesome/free-solid-svg-icons\";\nimport {\n  BoolDict,\n  City,\n  PlantType,\n  PlantTypeCombinator,\n  SearchCriteria,\n  WaterUseClassification,\n} from \"../types\";\n\ninterface MapModalProps {\n  cities: City[];\n  visible: boolean;\n  setVisible: React.Dispatch<React.SetStateAction<boolean>>;\n  onCityChange: (city: City) => void;\n}\n\nconst MapModal = ({\n  cities,\n  visible,\n  setVisible,\n  onCityChange,\n}: MapModalProps) => (\n  <>\n    {visible && (\n      <div\n        className={\"modal fade\" + (visible ? \" show\" : \"\")}\n        style={{ display: visible ? \"block\" : \"none\" }}\n        id=\"mapModal\"\n        tabIndex={-1}\n        aria-labelledby=\"exampleModalLabel\"\n        aria-hidden=\"true\"\n      >\n        <div className=\"modal-dialog\" style={{ top: \"30px\" }}>\n          <div\n            className=\"modal-content\"\n            style={{ width: \"65vw\", position: \"fixed\", left: \"17vw\" }}\n          >\n            <div className=\"modal-header\">\n              <h5 className=\"modal-title\" id=\"exampleModalLabel\">\n                City Map\n              </h5>\n              <button\n                type=\"button\"\n                className=\"close\"\n                data-dismiss=\"modal\"\n                aria-label=\"Close\"\n                onClick={() => setVisible(false)}\n              >\n                <span aria-hidden=\"true\">&times;</span>\n              </button>\n            </div>\n            <div className=\"modal-body\">\n              <Map\n                cities={cities}\n                onSelect={(city: City) => {\n                  onCityChange(city);\n                  setVisible(false);\n                }}\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n    )}\n  </>\n);\n\ninterface SearchFormProps {\n  cityOptions: City[];\n  searchCriteria: SearchCriteria;\n  plantTypes: PlantType[];\n  waterUseClassifications: WaterUseClassification[];\n  updateSearchCriteria: (searchCriteria: SearchCriteria) => void;\n}\n\nconst SearchForm = ({\n  cityOptions,\n  searchCriteria,\n  plantTypes,\n  waterUseClassifications,\n  updateSearchCriteria,\n}: SearchFormProps) => {\n  const [mapModalVisible, setMapModalVisible] = React.useState(false);\n  const setPlantType = (code: string, checked: boolean) =>\n    updateSearchCriteria({\n      ...searchCriteria,\n      pageNumber: 1,\n      plantTypes: { ...searchCriteria.plantTypes, [code]: checked },\n    });\n  const selectAllWaterUseClassifications = (selected: boolean) => {\n    updateSearchCriteria({\n      ...searchCriteria,\n      pageNumber: 1,\n      waterUseClassifications: waterUseClassifications.reduce(\n        (dict: BoolDict, wu) => {\n          dict[wu.code] = selected;\n          return dict;\n        },\n        {}\n      ),\n    });\n  };\n  const onCityChange = (o: City) => {\n    //console.log('onCityChange',o);\n    updateSearchCriteria({ ...searchCriteria, pageNumber: 1, city: o });\n  };\n  const onPlantTypeCombinatorChange = (ptc: PlantTypeCombinator) => {\n    updateSearchCriteria({\n      ...searchCriteria,\n      pageNumber: 1,\n      plantTypeCombinator: ptc,\n    });\n  };\n  const selectAllPlantTypes = (selected: boolean) => {\n    updateSearchCriteria({\n      ...searchCriteria,\n      pageNumber: 1,\n      plantTypes: plantTypes.reduce((dict: BoolDict, pt) => {\n        dict[pt.code] = selected;\n        return dict;\n      }, {}),\n    });\n  };\n  const everythingElse = (\n    <>\n      <div className=\"form-group\">\n        <label>\n          <strong>Plant Name</strong>\n        </label>\n        <input\n          type=\"search\"\n          className=\"form-control\"\n          value={searchCriteria.name}\n          placeholder=\"botanical or common name\"\n          onChange={(e) =>\n            updateSearchCriteria({\n              ...searchCriteria,\n              pageNumber: 1,\n              name: e.target.value.toLowerCase(),\n            })\n          }\n        />\n      </div>\n      <div className=\"form-group\">\n        <label className=\"form-label\">\n          <strong>Water Use</strong>\n        </label>\n        <div>\n          <button\n            className=\"btn btn-sm btn-link\"\n            onClick={() => selectAllWaterUseClassifications(true)}\n          >\n            Select all\n          </button>\n          /{\" \"}\n          <button\n            className=\"btn btn-sm btn-link\"\n            onClick={() => selectAllWaterUseClassifications(false)}\n          >\n            Deselect all\n          </button>\n        </div>\n        {waterUseClassifications.map((wu) => (\n          <div className=\"form-check\" key={wu.code}>\n            <input\n              className=\"form-check-input\"\n              type=\"checkbox\"\n              checked={searchCriteria.waterUseClassifications[wu.code]}\n              onChange={(e) =>\n                updateSearchCriteria({\n                  ...searchCriteria,\n                  pageNumber: 1,\n                  waterUseClassifications: {\n                    ...searchCriteria.waterUseClassifications,\n                    [wu.code]: e.target.checked,\n                  },\n                })\n              }\n              id={wu.code + \"_checkbox\"}\n            />\n            <label className=\"form-check-label\" htmlFor={wu.code + \"_checkbox\"}>\n              {wu.name}\n            </label>\n          </div>\n        ))}\n      </div>\n      <div className=\"form-group\">\n        <label className=\"form-label\">\n          <strong>Plant Types</strong>\n        </label>\n        <div>\n          <button\n            className=\"btn btn-sm btn-link\"\n            onClick={() => selectAllPlantTypes(true)}\n          >\n            Select all\n          </button>\n          /\n          <button\n            className=\"btn btn-sm btn-link\"\n            onClick={() => selectAllPlantTypes(false)}\n          >\n            Deselect all\n          </button>\n        </div>\n        <div>\n          <Select\n            styles={{\n              container: (base: any) => ({\n                ...base,\n                flex: 1,\n              }),\n            }}\n            options={plantTypeCombinatorOptions.array}\n            value={searchCriteria.plantTypeCombinator}\n            onChange={\n              onPlantTypeCombinatorChange as (\n                o: ValueType<PlantTypeCombinator, false>,\n                _: ActionMeta<PlantTypeCombinator>\n              ) => void\n            }\n            noOptionsMessage={() => \"No result\"}\n          />\n        </div>\n        {plantTypes.map((pt) => (\n          <div className=\"form-check\" key={pt.code}>\n            <input\n              className=\"form-check-input\"\n              type=\"checkbox\"\n              checked={searchCriteria.plantTypes[pt.code] || false}\n              onChange={(e) => setPlantType(pt.code, e.target.checked)}\n              id={pt.code + \"_checkbox\"}\n            />\n            <label className=\"form-check-label\" htmlFor={pt.code + \"_checkbox\"}>\n              {pt.name}\n            </label>\n          </div>\n        ))}\n      </div>\n    </>\n  );\n\n  return (\n    <div>\n      <MapModal\n        visible={mapModalVisible}\n        setVisible={setMapModalVisible}\n        onCityChange={onCityChange}\n        cities={cityOptions}\n      />\n      <div className=\"form-group\">\n        <label>\n          <strong>City/Region</strong>\n          <br />\n          Start typing to search\n        </label>\n        <Select\n          styles={{\n            container: (base: any) => ({\n              ...base,\n              flex: 1,\n            }),\n          }}\n          options={cityOptions}\n          placeholder=\"Select a city\"\n          value={searchCriteria.city}\n          onChange={\n            onCityChange as (\n              o: ValueType<City, false>,\n              _: ActionMeta<City>\n            ) => void\n          }\n          noOptionsMessage={() => \"No cities found by that name\"}\n        />\n        {\" or \"}\n        <button\n          className=\"btn btn-link btn-sm\"\n          onClick={() => setMapModalVisible(true)}\n        >\n          <FontAwesomeIcon icon={faMap} /> Select city from map\n        </button>\n      </div>\n      {!!searchCriteria.city ? everythingElse : <></>}\n    </div>\n  );\n};\n\nexport default SearchForm;\n","import plantTypeCombinatorOptions from \"../Plant/plant-type-combinator-options\";\nimport { City, PlantType, SearchCriteria } from \"../types\";\n\ntype BoolDict = { [key: string]: boolean };\nconst autoSearch = false;\n\nconst fromQuerystring = (qs: string) => {\n  let ps = new URLSearchParams(qs);\n  return {\n    pageNumber: parseInt(ps.get(\"p\") || \"\") || 1,\n    plantTypes: ps.getAll(\"t\").reduce((dict: BoolDict, pt) => {\n      dict[pt] = true;\n      return dict;\n    }, {}),\n    name: (ps.get(\"n\") || \"\").toLowerCase(),\n    plantTypeCombinatorId: ps.get(\"tm\") || \"\",\n    cityId: parseInt(ps.get(\"c\") || \"0\"),\n    waterUseClassifications: ps.getAll(\"wu\").reduce((dict: BoolDict, wu) => {\n      dict[wu] = true;\n      return dict;\n    }, {}),\n  };\n};\n\nconst toQuerystring = (sc: SearchCriteria) => {\n  let wu = Object.entries(sc.waterUseClassifications)\n    .filter(([, selected]) => selected)\n    .map(([code]) => code);\n  let pt = Object.entries(sc.plantTypes)\n    .filter(([, selected]) => selected)\n    .map(([code]) => code);\n  let ps = new URLSearchParams([\n    ...(!sc.city ? [] : [[\"c\", sc.city.id.toString()]]),\n    //exclude default param values for terser URLs\n    ...(!sc.name ? [] : [[\"n\", sc.name]]),\n    ...(sc.plantTypeCombinator === plantTypeCombinatorOptions.default\n      ? []\n      : [[\"tm\", sc.plantTypeCombinator.value]]),\n    ...wu.map((wu) => [\"wu\", wu]),\n    ...pt.map((pt) => [\"t\", pt]),\n    ...(sc.pageNumber === 1 ? [] : [[\"p\", sc.pageNumber.toString()]]),\n  ]);\n  return ps.toString();\n};\n\nconst getDefaultSearchCriteria = (plantTypes: PlantType[]) =>\n  ({\n    city: null as unknown as City,\n    name: \"\",\n    waterUseClassifications: {},\n    plantTypes: plantTypes.reduce((dict: BoolDict, pt) => {\n      dict[pt.code] = autoSearch ? pt.code === \"A\" : false;\n      return dict;\n    }, {}),\n    pageNumber: 1,\n    plantTypeCombinator: plantTypeCombinatorOptions.default,\n  } as SearchCriteria);\n\nconst initSearchCriteria = (\n  querystring: string,\n  cityOptions: City[],\n  plantTypes: PlantType[]\n) => {\n  let up = SearchCriteriaConverter.fromQuerystring(querystring);\n  //console.log(up);\n  let sc = getDefaultSearchCriteria(plantTypes);\n  sc.waterUseClassifications = up.waterUseClassifications;\n  sc.plantTypes = up.plantTypes;\n  sc.name = up.name;\n  sc.pageNumber = up.pageNumber;\n  sc.city = cityOptions.filter((o) => o.id === up.cityId)[0] || sc.city;\n  if (up.plantTypeCombinatorId in plantTypeCombinatorOptions.byId) {\n    sc.plantTypeCombinator =\n      plantTypeCombinatorOptions.byId[up.plantTypeCombinatorId];\n  }\n  return sc;\n};\n\nconst SearchCriteriaConverter = {\n  fromQuerystring: fromQuerystring,\n  toQuerystring: toQuerystring,\n  getDefaultSearchCriteria: getDefaultSearchCriteria,\n  initSearchCriteria: initSearchCriteria,\n};\n\nexport default SearchCriteriaConverter;\n","import React from \"react\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport {\n  faMapMarkerAlt,\n  faSearch,\n  faStar,\n  faLeaf,\n  faDownload,\n} from \"@fortawesome/free-solid-svg-icons\";\n\nconst Welcome = () => (\n  <div className=\"text-center my-5\">\n    <FontAwesomeIcon icon={faLeaf} className=\"display-4 text-success my-3\" />\n    <div className=\"display-4\">Welcome to WUCOLS</div>\n    <div className=\"my-4\">\n      <p className=\"lead\">\n        <strong>WUCOLS = </strong>\n        {[\"Water\", \"Use\", \"Classification\", \"Of\", \"Landscape\", \"Species\"].map(\n          (w, i) => (\n            <span key={i}>\n              <strong className=\"text-lg\">{w[0]}</strong>\n              {w.slice(1)}{\" \"}\n            </span>\n          )\n        )}\n      </p>\n      <p className=\"lead\">\n        WUCOLS helps you create a landscape plan based on plant water use within\n        your city/region.\n      </p>\n    </div>\n\n    <div className=\"card-group\">\n      {[\n        {\n          icon: faMapMarkerAlt,\n          label: \"Select a City/Region\",\n          description:\n            \"This will determine the appropriate water use rating for each plant.\",\n        },\n        {\n          icon: faSearch,\n          label: \"Search\",\n          description: (\n            <>\n              Enter any combination of\n              {[\"Plant Name\", \"Water Use\", \"Plant Types\"].map((txt, i) => (\n                <div key={i}>\n                  <strong>{txt}</strong>\n                </div>\n              ))}\n              to find plants of interest.\n            </>\n          ),\n        },\n        {\n          icon: faStar,\n          label: \"Favorite\",\n          description: \"Assemble a list of your plants that meet your needs.\",\n        },\n        {\n          icon: faDownload,\n          label: \"Download\",\n          description: \"Download your list in a variety of formats\",\n        },\n      ].map((f, i) => (\n        <div className=\"card\" key={i}>\n          <div className=\"card-body\">\n            <FontAwesomeIcon icon={f.icon} className=\"mt-2 h1\" />\n            <div className=\"h4\">\n              {i + 1 + \". \"}\n              {f.label}\n            </div>\n            <div className=\"card-text mt-5\">{f.description}</div>\n          </div>\n        </div>\n      ))}\n    </div>\n  </div>\n);\n\nexport default Welcome;\n","import React from \"react\";\nimport PlantList from \"../Plant/PlantList\";\nimport PlantTable from \"../Plant/PlantTable\";\nimport {\n  faTh,\n  faThLarge,\n  faBars,\n  IconDefinition,\n} from \"@fortawesome/free-solid-svg-icons\";\nimport sortPlants from \"./sort-plants\";\nimport ultimatePagination from \"ultimate-pagination\";\nimport { Pagination } from \"react-bootstrap\";\nimport plantTypeCombinatorOptions from \"../Plant/plant-type-combinator-options\";\nimport SearchForm from \"./SearchForm\";\nimport SearchCriteriaConverter from \"./search-criteria-converter\";\nimport Welcome from \"./Welcome\";\nimport { Data, Plant, SearchCriteria } from \"../types\";\n\nconst performancePlantLimit = 50000;\n\ninterface Props {\n  data: Data;\n  searchCriteria: SearchCriteria;\n  setSearchCriteria: (searchCriteria: SearchCriteria) => void;\n  isPlantFavorite: (plant: Plant) => boolean;\n  togglePlantFavorite: (plant: Plant) => void;\n  queryString: string;\n}\n\nexport interface PlantsViewMode {\n  id: string;\n  label: string;\n  component: React.ComponentType<any>;\n  icon: IconDefinition;\n}\n\nconst Search = ({\n  data,\n  searchCriteria,\n  setSearchCriteria,\n  isPlantFavorite,\n  togglePlantFavorite,\n  queryString,\n}: Props) => {\n  let plantsViewModes: PlantsViewMode[] = [\n    {\n      id: \"list\",\n      label: \"List\",\n      component: PlantTable,\n      icon: faBars,\n    },\n    {\n      id: \"grid\",\n      label: \"Grid\",\n      component: (props) =>\n        PlantList({ ...props, className: \"col-sm-12 col-lg-6 col-xl-6\" }),\n      icon: faThLarge,\n    },\n    {\n      id: \"dense-grid\",\n      label: \"Dense Grid\",\n      component: (props) =>\n        PlantList({ ...props, className: \"col-sm-12 col-lg-6 col-xl-4\" }),\n      icon: faTh,\n    },\n  ];\n  const [plantsViewModeId] = React.useState(plantsViewModes[0].id);\n  const plantsViewMode =\n    plantsViewModes.filter((vm) => vm.id === plantsViewModeId)[0] ||\n    plantsViewModes[0];\n\n  const resetSearchCriteria = () =>\n    setSearchCriteria(\n      SearchCriteriaConverter.getDefaultSearchCriteria(data.plantTypes)\n    );\n\n  const searchPerformed =\n    Object.values(searchCriteria.waterUseClassifications).some((b) => b) ||\n    Object.values(searchCriteria.plantTypes).some((b) => b) ||\n    searchCriteria.name.length > 0;\n\n  const matchingPlants = React.useMemo(() => {\n    let noType = Object.values(searchCriteria.plantTypes).every((b) => !b);\n    let noWu = Object.values(searchCriteria.waterUseClassifications).every(\n      (b) => !b\n    );\n    let types = Object.entries(searchCriteria.plantTypes)\n      .filter(([k, v]) => !!v)\n      .map(([k, v]) => k);\n    let typeFn =\n      searchCriteria.plantTypeCombinator ===\n      plantTypeCombinatorOptions.byId[\"ANY\"]\n        ? types.some.bind(types)\n        : types.every.bind(types);\n    //console.log(types);\n    if (!searchCriteria.city) {\n      return [];\n    }\n    return sortPlants(searchCriteria.city.region)(\n      data.plants.filter((p) => {\n        let typeOk = noType || typeFn((t) => p.types.indexOf(t) > -1);\n        if (!searchCriteria.city) {\n          return false;\n        }\n        let wu = p.waterUseByRegion[searchCriteria.city.region - 1];\n        let wuOk = searchCriteria.waterUseClassifications[wu] || noWu;\n        let nameOk =\n          !searchCriteria.name ||\n          p.searchName.indexOf(searchCriteria.name) > -1;\n        return wuOk && typeOk && nameOk;\n      })\n    ).slice(0, performancePlantLimit);\n  }, [data, searchCriteria]);\n\n  const pageSize = 50;\n  const pageCount = Math.max(1, Math.ceil(matchingPlants.length / pageSize));\n  const currentPage = pageCount > 0 ? searchCriteria.pageNumber : 1;\n  var paginationModel = ultimatePagination.getPaginationModel({\n    // Required\n    currentPage,\n    totalPages: pageCount,\n\n    // Optional\n    boundaryPagesRange: 1,\n    siblingPagesRange: 1,\n    hideEllipsis: false,\n    hidePreviousAndNextPageLinks: false,\n    hideFirstAndLastPageLinks: false,\n  });\n  //console.log('pagination',paginationModel);\n\n  const setCurrentPageNumber = (pn: number) =>\n    setSearchCriteria({ ...searchCriteria, pageNumber: pn });\n  const actualPagination = pageCount > 1 && (\n    <Pagination>\n      {paginationModel\n        .map((p) => {\n          const props = {\n            key: p.key,\n            active: p.isActive,\n            onClick: () => setCurrentPageNumber(p.value),\n          };\n          switch (p.type) {\n            //case 'PREVIOUS_PAGE_LINK': return <Pagination.Prev {...props}/>\n            //case 'NEXT_PAGE_LINK'    : return <Pagination.Next {...props}/>\n            case \"PAGE\":\n              return <Pagination.Item {...props}>{p.value}</Pagination.Item>;\n            case \"ELLIPSIS\":\n              return <Pagination.Ellipsis {...props} />;\n            default:\n              return undefined;\n          }\n        })\n        .filter((f) => !!f)}\n    </Pagination>\n  );\n\n  return (\n    <div className=\"container-fluid\">\n      {/*\n    <div>\n      <pre>{JSON.stringify(match,null,2)}</pre>\n    </div>\n    */}\n      <div className=\"row\">\n        <nav className=\"col-sm-4 col-lg-3 col-xl-2 sidebar bg-light\">\n          <div className=\"sidebar-sticky p-3\">\n            <SearchForm\n              waterUseClassifications={data.waterUseClassifications}\n              plantTypes={data.plantTypes}\n              cityOptions={data.cityOptions}\n              searchCriteria={searchCriteria}\n              updateSearchCriteria={setSearchCriteria}\n            />\n          </div>\n        </nav>\n\n        <main className=\"col-sm-8 col-lg-9 col-xl-10 ml-sm-auto\" role=\"main\">\n          {!searchPerformed ? (\n            <Welcome />\n          ) : (\n            <>\n              <div className=\"d-flex justify-content-between align-items-center mb-3\">\n                <div>Matching Plants: {matchingPlants.length}</div>\n\n                {searchPerformed && (\n                  <button\n                    className=\"btn btn-link\"\n                    onClick={() => resetSearchCriteria()}\n                  >\n                    Clear Search Form (Start over)\n                  </button>\n                )}\n                {/*\n              <pre>{JSON.stringify({paginationModel,currentPageNumber,pageCount}, null, 2)}</pre>\n            */}\n              </div>\n              {actualPagination}\n              {!searchCriteria.city ? (\n                <div>Please select a city</div>\n              ) : (\n                <plantsViewMode.component\n                  queryString={queryString}\n                  isPlantFavorite={isPlantFavorite}\n                  togglePlantFavorite={togglePlantFavorite}\n                  plants={matchingPlants.slice(\n                    (searchCriteria.pageNumber - 1) * pageSize,\n                    (searchCriteria.pageNumber + 1) * pageSize\n                  )}\n                  photosByPlantName={data.photos}\n                  plantTypeNameByCode={data.plantTypeNameByCode}\n                  region={searchCriteria.city.region}\n                  waterUseByCode={data.waterUseByCode}\n                />\n              )}\n              {actualPagination}\n            </>\n          )}\n        </main>\n      </div>\n    </div>\n  );\n};\n\nexport default Search;\n","import React from \"react\";\nimport PlantTypeBadge from \"./PlantTypeBadge\";\nimport WaterDropRating from \"./WaterDropRating\";\nimport { SRLWrapper } from \"simple-react-lightbox\";\nimport PlantFavoriteButton from \"./PlantFavoriteButton\";\nimport { PlantDetailQrCode } from \"./PlantDetailQrCode\";\nimport { Link } from \"react-router-dom\";\nimport {\n  BenchCardTemplate,\n  Plant,\n  Region,\n  WaterUseClassification,\n} from \"../types\";\n\ninterface Props {\n  plant: Plant;\n  plantTypeNameByCode: { [key: string]: string };\n  waterUseByCode: { [key: string]: WaterUseClassification };\n  region: number;\n  regions: Region[];\n  benchCardTemplates: BenchCardTemplate[];\n  isPlantFavorite: (plant: Plant) => boolean;\n  togglePlantFavorite: (plant: Plant) => void;\n}\n\nconst PlantDetail = ({\n  plant,\n  plantTypeNameByCode,\n  waterUseByCode,\n  region,\n  regions,\n  benchCardTemplates,\n  isPlantFavorite,\n  togglePlantFavorite,\n}: Props) => {\n  if (!plant) {\n    return <div>Invalid Plant</div>;\n  }\n  //let wu = waterUseByCode[plant.waterUseByRegion[region-1]];\n  let regionWaterUsePairs: [Region, WaterUseClassification][] = regions.map(\n    (r) => [r, waterUseByCode[plant.waterUseByRegion[r.id - 1]]]\n  );\n\n  const imageSize = \"64px\";\n  let leadPhoto = plant.photos[0];\n  let photoUrl = !leadPhoto ? \"\" : leadPhoto.large.url;\n\n  const webBenchCard = (\n    <>\n      <div className=\"float-right h2\">\n        <PlantFavoriteButton\n          {...{ plant, togglePlantFavorite, isPlantFavorite }}\n        />\n      </div>\n      <div className=\"d-flex flex-row bd-highlight align-items-center mb-4 \">\n        {photoUrl && (\n          <img\n            className=\"mr-3\"\n            src={photoUrl}\n            style={{ objectFit: \"cover\", width: imageSize, height: imageSize }}\n            alt={plant.botanicalName}\n          />\n        )}\n        <h1 className=\"m0\">\n          <em>{plant.botanicalName}</em>\n        </h1>\n      </div>\n\n      <table className=\"table table-bordered\">\n        <tbody>\n          <tr>\n            <th style={{ width: \"25%\" }}>Botanical Name</th>\n            <td>\n              <em>{plant.botanicalName}</em>\n            </td>\n          </tr>\n          <tr>\n            <th>Common Name</th>\n            <td>{plant.commonName}</td>\n          </tr>\n          <tr>\n            <th>Plant Type(s)</th>\n            <td>\n              {plant.types.map((t) => (\n                <PlantTypeBadge\n                  type={t}\n                  plantTypeNameByCode={plantTypeNameByCode}\n                  key={t}\n                />\n              ))}\n            </td>\n          </tr>\n        </tbody>\n      </table>\n\n      <div className=\"my-5\">\n        <h4 className=\"mb-4\">Water Usage by Region</h4>\n        <table className=\"table table-bordered table-sm\">\n          <tbody>\n            {regionWaterUsePairs.map(([r, wu]) => (\n              <tr className={r.id === region ? \"table-primary\" : \"\"} key={r.id}>\n                <td>\n                  Region {r.id}: {r.name}\n                </td>\n                <td style={{ whiteSpace: \"nowrap\" }}>\n                  <WaterDropRating waterUseCode={wu.code} />\n                </td>\n                <td style={{ whiteSpace: \"nowrap\" }}>{wu.name}</td>\n                <td style={{ whiteSpace: \"nowrap\" }}>\n                  {wu.percentageET0 === \"N/A\" ? (\n                    \"N/A\"\n                  ) : (\n                    <>\n                      {wu.percentageET0}% ET<sub>0</sub>\n                    </>\n                  )}\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>\n\n      {!!plant.culturalInformation && (\n        <div>\n          <h4 className=\"mb-4\">Cultural Information</h4>\n          <div\n            dangerouslySetInnerHTML={{ __html: plant.culturalInformation }}\n          />\n        </div>\n      )}\n\n      <div className=\"row mt-4\">\n        {!!plant.photos.length && (\n          <div className=\"col-sm-12\">\n            <h4 className=\"mb-4\">Photos ({plant.photos.length})</h4>\n            <SRLWrapper key=\"plant gallery\">\n              <div className=\"row row-cols-1 row-cols-md-3 g-4\">\n                {plant.photos.map((p, i) => (\n                  <div className=\"col\" key={i}>\n                    <div className=\"card mb-3\" key={i}>\n                      <a href={p.full.url}>\n                        <img\n                          src={p.large.url}\n                          className=\"card-img-top\"\n                          alt={p.caption}\n                          style={{\n                            height: \"10em\",\n                            objectFit: \"cover\",\n                          }}\n                        />\n                      </a>\n                      <div className=\"card-body text-center\">\n                        <p className=\"card-text\">{p.caption}</p>\n                      </div>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </SRLWrapper>\n          </div>\n        )}\n      </div>\n    </>\n  );\n\n  return (\n    <>\n      <div className=\"row\">\n        <div className=\"col-md-8 col-xl-9 ml-sm-auto pt-3 pb-5 px-5\">\n          {webBenchCard}\n        </div>\n        <nav\n          className=\"col-md-4 col-xl-3 bg-light\"\n          style={{ borderLeft: \"1px solid #ddd\" }}\n        >\n          <div className=\"p-3\">\n            <div className=\"d-flex flex-column\">\n              {benchCardTemplates.map((bct) => (\n                <div className=\"card mb-3 text-center\" key={bct.id}>\n                  <div className=\"card-body d-flex flex-column justify-content-between\">\n                    <h4>{bct.name} Bench Card</h4>\n                    <Link\n                      key={bct.id}\n                      to={`/plant/${plant.id}/benchcard/${bct.id}`}\n                      className=\"mt-3 btn btn-success\"\n                      target=\"_blank\"\n                    >\n                      Download\n                    </Link>\n                  </div>\n                </div>\n              ))}\n              <div className=\"card mr-3 text-center\">\n                <div className=\"card-body\">\n                  <h4>QR Code</h4>\n                  <PlantDetailQrCode\n                    plant={plant}\n                    style={{ width: \"auto\", maxWidth: \"150px\" }}\n                  />\n                </div>\n              </div>\n            </div>\n          </div>\n        </nav>\n      </div>\n    </>\n  );\n};\n\nexport default PlantDetail;\n","import React from \"react\";\nimport PlantTable from \"../Plant/PlantTable\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport {\n  faQrcode,\n  faFileExcel,\n  faIdCard,\n} from \"@fortawesome/free-solid-svg-icons\";\nimport { Data, DownloadAction, Plant, SearchCriteria } from \"../types\";\n\ninterface Props {\n  queryString: string;\n  favoritePlants: Plant[];\n  getDownloadActions: (\n    data: Data,\n    searchCriteria: SearchCriteria,\n    favoritePlants: Plant[]\n  ) => DownloadAction[];\n  data: Data;\n  isPlantFavorite: (plant: Plant) => boolean;\n  togglePlantFavorite: (plant: Plant) => void;\n  searchCriteria: SearchCriteria;\n}\n\nconst Favorites = ({\n  queryString,\n  favoritePlants,\n  getDownloadActions,\n  data,\n  isPlantFavorite,\n  togglePlantFavorite,\n  searchCriteria,\n}: Props) => {\n  const downloadButtons = (\n    className: string,\n    searchCriteria: SearchCriteria,\n    favoritePlants: Plant[]\n  ) => {\n    return getDownloadActions(data, searchCriteria, favoritePlants).map((a) => (\n      <button className={className} onClick={a.method}>\n        {a.label}\n      </button>\n    ));\n  };\n  return (\n    <>\n      <div className=\"container-fluid\">\n        {!favoritePlants.length ? (\n          <div className=\"py-5\">\n            <div className=\"text-center mb-5\">\n              <div className=\"h3\">You do not have any favorite species yet</div>\n              <p>\n                After you have added some favorites, you can download them in\n                various formats.\n              </p>\n            </div>\n            <div className=\"d-flex justify-content-around\">\n              {[\n                {\n                  icon: faFileExcel,\n                  label: \"Spreadsheet\",\n                },\n                {\n                  icon: faQrcode,\n                  label: \"QR Codes\",\n                },\n                {\n                  icon: faIdCard,\n                  label: \"Bench Cards\",\n                },\n              ].map((f, i) => (\n                <div className=\"\" key={i}>\n                  <div className=\"card\">\n                    <div className=\"card-body text-center\">\n                      <FontAwesomeIcon icon={f.icon} className=\"mt-2 h1\" />\n                      <div className=\"h5\">{f.label}</div>\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n        ) : (\n          <div className=\"row\">\n            <nav className=\"col-sm-4 col-lg-3 col-xl-2 sidebar bg-light\">\n              <div className=\"sidebar-sticky p-3\">\n                {!!favoritePlants.length && (\n                  <div className=\"mb-3 d-flex flex-column justify-content-around\">\n                    <div className=\"mb-3\">\n                      {downloadButtons(\n                        \"btn btn-success btn-block\",\n                        searchCriteria,\n                        favoritePlants\n                      ).map((c, i) => (\n                        <div className=\"my-2\" key={i}>\n                          {c}\n                        </div>\n                      ))}\n                    </div>\n                    <p>\n                      QR Codes and Bench Cards can be downloaded individually\n                      for each plant from that plant&apos;s detail screen.\n                    </p>\n                  </div>\n                )}\n              </div>\n            </nav>\n            <div className=\"col-sm-8 col-lg-9 col-xl-10 ml-sm-auto\">\n              <div className=\"my-3\">\n                {favoritePlants.length === 0 ? (\n                  \"You don't have any favorites yet.\"\n                ) : favoritePlants.length === 1 ? (\n                  \"You have 1 favorite so far.\"\n                ) : (\n                  <div>\n                    You have <strong>{favoritePlants.length}</strong> favorites\n                    so far.\n                  </div>\n                )}\n              </div>\n              {!searchCriteria.city ? (\n                <div>Select a city to view your favorites</div>\n              ) : (\n                <PlantTable\n                  queryString={queryString}\n                  showAvailableMedia={true}\n                  isPlantFavorite={isPlantFavorite}\n                  togglePlantFavorite={togglePlantFavorite}\n                  plants={favoritePlants}\n                  photosByPlantName={data.photos}\n                  plantTypeNameByCode={data.plantTypeNameByCode}\n                  region={searchCriteria.city.region}\n                  waterUseByCode={data.waterUseByCode}\n                />\n              )}\n            </div>\n          </div>\n        )}\n      </div>\n    </>\n  );\n};\n\nexport default Favorites;\n","import React from \"react\";\nimport {\n  Document,\n  Page,\n  Text,\n  View,\n  StyleSheet,\n  Font,\n  Image,\n} from \"@react-pdf/renderer\";\nimport { plantDetailQrCodeFromId } from \"./PlantDetailQrCode\";\nimport {\n  BenchCardTemplate,\n  Plant,\n  WaterUseClassification,\n  WaterUseCode,\n} from \"../types\";\n\nconst debug = false;\n\n// Create styles\nconst styles = StyleSheet.create({\n  page: {\n    textAlign: \"center\",\n    backgroundColor: \"white\",\n  },\n  waterUseClassificationBox: {\n    backgroundColor: \"#304971\",\n    padding: \"8pt\",\n    width: \"44%\",\n    textAlign: \"center\",\n  },\n  logo: {},\n  logos: {},\n  section: {\n    margin: 10,\n    padding: 10,\n    flexGrow: 1,\n  },\n});\n\nconst dropRatingByWaterUseCode: { [key: string]: JSX.Element } = (() => {\n  Font.register({\n    family: \"FontAwesome\",\n    src: \"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.2.0/fonts/fontawesome-webfont.ttf\",\n  });\n  const DropIcon = ({ filled }: { filled?: boolean }) => (\n    <Text\n      style={{\n        opacity: filled ? 1 : 0.3,\n        color: filled ? \"#007bff\" : \"grey\",\n        fontFamily: \"FontAwesome\",\n      }}\n    >\n      \n    </Text>\n  );\n\n  /*\n    <Image src=\"/water-drop.svg\" style={{opacity:filled ? 1 : 0.4}} />;\n*/\n\n  let d = <DropIcon />;\n  let D = <DropIcon filled={true} />;\n  //let d = <span role=\"img\" aria-label=\"empty-water-drop\" style={{opacity:0.3}}>💧</span>;\n  //let D = <span role=\"img\" aria-label=\"full-water-drop\">💧</span>;\n  return {\n    \"?\": (\n      <>\n        {d}\n        {d}\n        {d}\n        {d}\n      </>\n    ),\n    N: (\n      <>\n        {d}\n        {d}\n        {d}\n        {d}\n      </>\n    ),\n    VL: (\n      <>\n        {D}\n        {d}\n        {d}\n        {d}\n      </>\n    ),\n    LO: (\n      <>\n        {D}\n        {D}\n        {d}\n        {d}\n      </>\n    ),\n    M: (\n      <>\n        {D}\n        {D}\n        {D}\n        {d}\n      </>\n    ),\n    H: (\n      <>\n        {D}\n        {D}\n        {D}\n        {D}\n      </>\n    ),\n  };\n})();\n\ninterface WaterDropRatingProps {\n  waterUseCode: WaterUseCode;\n}\n\nconst WaterDropRating = ({ waterUseCode }: WaterDropRatingProps) =>\n  (\n    <View\n      style={{\n        display: \"flex\",\n        flexDirection: \"row\",\n        justifyContent: \"space-evenly\",\n        margin: \"0 25%\",\n      }}\n    >\n      {dropRatingByWaterUseCode[waterUseCode]}\n    </View>\n  ) || <>N/A</>;\n\ninterface BenchCardDocumentProps {\n  plant: Plant;\n  region: number;\n  waterUseByCode: { [key: string]: WaterUseClassification };\n  benchCardTemplate: BenchCardTemplate;\n}\n\nconst BenchCardDocument = ({\n  plant,\n  region,\n  waterUseByCode,\n  benchCardTemplate,\n}: BenchCardDocumentProps) => {\n  const p = plant;\n  const qrCodeUrl = plantDetailQrCodeFromId(plant.id).image_url;\n  let wuCode = p.waterUseByRegion[region - 1];\n  let wu = waterUseByCode[wuCode];\n  //console.log(region, wuCode, wu) //console.log(p)\n  let leadPhoto = p.photos[0];\n  let photoUrl = !leadPhoto ? \"\" : leadPhoto.large.url;\n  console.log({ leadPhoto, photoUrl });\n  const sizeInches = benchCardTemplate.sizeInInches;\n  const sizePoints = { x: sizeInches.x * 72, y: sizeInches.y * 72 };\n  const logoStyle = { height: `${sizeInches.y / 5}in`, width: \"auto\" };\n  return (\n    <Document>\n      <Page size={[sizePoints.x, sizePoints.y]} style={styles.page}>\n        <View\n          debug={debug}\n          style={{\n            display: \"flex\",\n            height: \"100%\",\n            padding: \"18pt\",\n            flexDirection: \"column\",\n            justifyContent: \"space-evenly\",\n          }}\n        >\n          <View>\n            <Text\n              debug={debug}\n              style={{ fontSize: `${0.5}in`, fontWeight: \"extrabold\" }}\n            >\n              {plant.botanicalName}\n            </Text>\n            <Text\n              debug={debug}\n              style={{\n                fontSize: \"25pt\",\n                fontWeight: \"normal\",\n                fontStyle: \"italic\",\n                padding: \"20pt\",\n              }}\n            >\n              {plant.commonName}\n            </Text>\n          </View>\n\n          <View\n            debug={debug}\n            style={{\n              display: \"flex\",\n              flexDirection: \"row\",\n              padding: `${sizeInches.x / 11 / 8}in`,\n              justifyContent: \"space-around\",\n            }}\n          >\n            {!!photoUrl && (\n              <Image debug={debug} src={photoUrl} style={{ width: \"45%\" }} />\n            )}\n\n            <View\n              debug={debug}\n              style={[\n                styles.waterUseClassificationBox,\n                {\n                  fontSize: `${sizeInches.x / 11 / 4}in`,\n                },\n              ]}\n            >\n              <Text\n                style={{\n                  color: \"white\",\n                  paddingBottom: `${sizeInches.x / 11 / 8}in`,\n                }}\n              >\n                Water Use Classification\n              </Text>\n              <View\n                style={{\n                  backgroundColor: \"white\",\n                  flexGrow: 1,\n                  display: \"flex\",\n                  flexDirection: \"column\",\n                  justifyContent: \"space-evenly\",\n                }}\n              >\n                <Text>{wu.name}</Text>\n                <View style={{ fontSize: `${sizeInches.x / 11 / 2}in` }}>\n                  <WaterDropRating waterUseCode={wu.code} />\n                </View>\n                <View>\n                  <Text>Central Valley</Text>\n                  <Text>(WUCOLS Region 2)</Text>\n                </View>\n                <Text>(Source: WUCOLS IV)</Text>\n              </View>\n            </View>\n          </View>\n          <View\n            debug={debug}\n            style={{\n              display: \"flex\",\n              flexDirection: \"row\",\n              justifyContent: \"space-evenly\",\n              alignItems: \"center\",\n              padding: \"2em\",\n              margin: \"5em\",\n            }}\n          >\n            <Image debug={debug} src=\"/logo-dwr.png\" style={logoStyle} />\n            <Image debug={debug} src=\"/logo-ucd-ccuh.png\" style={logoStyle} />\n            <Image debug={debug} src=\"/logo-ucanr.png\" style={logoStyle} />\n            <Image debug={debug} src={qrCodeUrl} style={logoStyle} />\n          </View>\n        </View>\n      </Page>\n    </Document>\n  );\n};\n\nBenchCardDocument.defaultProps = {\n  benchCardTemplate: undefined,\n};\n\nexport default BenchCardDocument;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./App.css\";\nimport Map from \"./Search/Map\";\n//import {useGeolocation} from '../src/useGeolocation';\nimport useLocalStorage from \"./Utilities/useLocalStorage\";\nimport sortPlants from \"./Search/sort-plants\";\nimport Search from \"./Search/Search\";\nimport PlantDetail from \"./Plant/PlantDetail\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport {\n  faSearch,\n  faFileExcel,\n  faStar,\n  faQrcode,\n  faIdCard,\n} from \"@fortawesome/free-solid-svg-icons\";\nimport JSZip from \"jszip\";\nimport { saveAs } from \"file-saver\";\nimport { PDFViewer, pdf } from \"@react-pdf/renderer\";\n\nimport Favorites from \"./Favorites/Favorites\";\n\nimport { DropdownButton, Dropdown } from \"react-bootstrap\";\n\nimport ReactExport, { ExcelCellData, ExcelSheetData } from \"react-export-excel\";\nimport {\n  //BrowserRouter as Router,\n  useLocation,\n  useHistory,\n  Route,\n  NavLink,\n  Redirect,\n} from \"react-router-dom\";\n\nimport SimpleReactLightbox from \"simple-react-lightbox\";\nimport { useToasts } from \"react-toast-notifications\";\nimport SearchCriteriaConverter from \"./Search/search-criteria-converter\";\nimport BenchCardDocument from \"./Plant/BenchCardDocument\";\n\nimport {\n  BoolDict,\n  City,\n  Data,\n  DownloadAction,\n  Plant,\n  SearchCriteria,\n} from \"./types\";\nimport { plantDetailQrCodeFromId } from \"./Plant/PlantDetailQrCode\";\n\ninterface Props {\n  data: Data;\n}\n\nfunction App({ data }: Props) {\n  //const {lat,lng,error} = useGeolocation(false,{enableHighAccuracy: true});\n  const location = useLocation();\n  const history = useHistory();\n  const searchCriteria = SearchCriteriaConverter.initSearchCriteria(\n    location.search,\n    data.cityOptions,\n    data.plantTypes\n  );\n\n  const updateSearchCriteria = React.useCallback(\n    (sc: SearchCriteria) => {\n      let qs = SearchCriteriaConverter.toQuerystring(sc);\n      //console.log('search altered',qs);\n      if (!history) {\n        //console.log('no history')\n        //return;\n      }\n      //console.log(history)\n      history.push({\n        pathname: \"/search\",\n        search: qs,\n      });\n      //console.log(sc);\n    },\n    [history]\n  );\n\n  const [isFavoriteByPlantId, updateIsFavoriteByPlantId] =\n    useLocalStorage<BoolDict>(\"isFavoriteByPlantId\", {});\n  const favoritePlants = sortPlants(\n    !searchCriteria.city ? 0 : searchCriteria.city.region\n  )(data.plants.filter((p) => !!isFavoriteByPlantId[p.id]));\n  const isPlantFavorite = (p: Plant) => !!isFavoriteByPlantId[p.id];\n\n  const { addToast, removeToast } = useToasts();\n  function togglePlantFavorite(p: Plant) {\n    let isFavoriteNow = !isFavoriteByPlantId[p.id];\n    updateIsFavoriteByPlantId({\n      ...isFavoriteByPlantId,\n      [p.id]: isFavoriteNow,\n    });\n    let thisToastId = \"\";\n    addToast(\n      <div>\n        Plant {isFavoriteNow ? \"added to\" : \"removed from\"} favorites\n        <button\n          className=\"btn btn-link\"\n          onClick={() => {\n            updateIsFavoriteByPlantId({\n              ...isFavoriteByPlantId,\n              [p.id]: !isFavoriteNow,\n            });\n            removeToast(thisToastId);\n            //togglePlantFavorite(p);\n          }}\n        >\n          UNDO\n        </button>\n      </div>,\n      {\n        appearance: \"info\",\n        transitionState: \"entered\",\n        autoDismiss: true,\n      },\n      (toastId) => {\n        thisToastId = toastId;\n      }\n    );\n  }\n\n  const favoriteAsSpreadsheets = (\n    data: Data,\n    searchCriteria: SearchCriteria,\n    favoritePlants: Plant[]\n  ): [string[][], ExcelSheetData[]] => {\n    if (!searchCriteria.city) {\n      return [[], []];\n    }\n    let cityRegionIx = searchCriteria.city.region - 1;\n    const csv = [\n      [\n        \"Type(s)\",\n        \"Botanical Name\",\n        \"Common Name\",\n        \"Water Use\",\n        \"Percentage of ET0\",\n      ],\n      ...favoritePlants.map((p) => [\n        p.types.map((t) => data.plantTypeNameByCode[t]).join(\", \"),\n        p.botanicalName,\n        p.commonName,\n        data.waterUseByCode[p.waterUseByRegion[cityRegionIx]].name,\n        data.waterUseByCode[p.waterUseByRegion[cityRegionIx]].percentageET0 +\n          \"%\",\n      ]),\n    ];\n\n    const xl = [\n      {\n        columns: [\n          \"Type(s)\",\n          \"Botanical Name\",\n          \"Common Name\",\n          \"Water Use\",\n          \"Percentage of ET0\",\n        ],\n        data: favoritePlants.map(\n          (p) =>\n            [\n              p.types.map((t) => data.plantTypeNameByCode[t]).join(\", \"),\n              p.botanicalName,\n              p.commonName,\n              data.waterUseByCode[p.waterUseByRegion[cityRegionIx]].name,\n              data.waterUseByCode[p.waterUseByRegion[cityRegionIx]]\n                .percentageET0 + \"%\",\n            ] as ExcelCellData[]\n        ),\n      } as ExcelSheetData,\n    ];\n\n    return [csv, xl];\n  };\n\n  const getDownloadActions = (\n    data: Data,\n    searchCriteria: SearchCriteria,\n    favoritePlants: Plant[]\n  ): DownloadAction[] => {\n    const ExcelFile = ReactExport.ExcelFile;\n    const ExcelSheet = ReactExport.ExcelFile.ExcelSheet;\n    let [, excelData] = favoriteAsSpreadsheets(\n      data,\n      searchCriteria,\n      favoritePlants\n    );\n    const sideRender = (el: any) => {\n      ReactDOM.render(el, document.getElementById(\"download-outlet\"));\n    };\n    return [\n      /*\n      {\n        method: () => {\n          sideRender(\n            <CSVDownload\n              target=\"_blank\"\n              data={csvData}\n              filename={`WUCOLS_${searchCriteria.city.name}.csv`}\n            />\n          );\n        },\n        label: \n          <>\n            <FontAwesomeIcon icon={faFileExcel} className=\"mr-2\"/>\n            Download in CSV format\n          </>\n      }\n      ,\n      */\n      {\n        method: () => {\n          Promise.all(\n            favoritePlants.map((p: Plant) =>\n              fetch(plantDetailQrCodeFromId(p.id).image_url)\n                .then((r) => r.blob())\n                .then((b) => [p, b] as [Plant, Blob])\n            )\n          ).then((plantBlobPairs) => {\n            var zip = new JSZip();\n            for (let [p, blob] of plantBlobPairs) {\n              zip.file(\n                p.commonName + \".png\",\n                blob as unknown as null,\n                {\n                  blob: true,\n                } as unknown as JSZip.JSZipFileOptions & { dir: true }\n              );\n            }\n            zip.generateAsync({ type: \"blob\" }).then(function (content) {\n              saveAs(content, \"qr-codes.zip\");\n            });\n          });\n        },\n        label: (\n          <>\n            <FontAwesomeIcon icon={faQrcode} className=\"mr-2\" />\n            Download QR codes\n          </>\n        ),\n      },\n      ...data.benchCardTemplates.map((bct) => ({\n        method: () => {\n          Promise.all(\n            favoritePlants.map((p: Plant) =>\n              pdf(\n                <BenchCardDocument\n                  benchCardTemplate={bct}\n                  plant={p}\n                  region={searchCriteria.city.region}\n                  waterUseByCode={data.waterUseByCode}\n                />\n              )\n                .toBlob()\n                .then((b) => [p, b] as [Plant, Blob])\n            )\n          ).then((plantBlobPairs) => {\n            var zip = new JSZip();\n            for (let [p, blob] of plantBlobPairs) {\n              zip.file(\n                p.commonName + \".pdf\",\n                blob as unknown as null,\n                {\n                  blob: true,\n                } as unknown as JSZip.JSZipFileOptions & { dir: true }\n              );\n            }\n            zip.generateAsync({ type: \"blob\" }).then(function (content) {\n              saveAs(content, `bench-cards-${bct.name}.zip`);\n            });\n          });\n        },\n        label: (\n          <>\n            <FontAwesomeIcon icon={faIdCard} className=\"mr-2\" />\n            Download Bench Cards ({bct.name})\n          </>\n        ),\n      })),\n      {\n        method: () => {\n          sideRender(\n            <ExcelFile\n              filename={`WUCOLS_${searchCriteria.city.name}`}\n              hideElement={true}\n            >\n              <ExcelSheet\n                dataSet={excelData}\n                name={`WUCOLS_${searchCriteria.city.name}`}\n              />\n            </ExcelFile>\n          );\n        },\n        label: (\n          <>\n            <FontAwesomeIcon icon={faFileExcel} className=\"mr-2\" />\n            Download in Excel format\n          </>\n        ),\n      },\n    ];\n  };\n\n  return (\n    <div className=\"App\">\n      <nav className=\"navbar navbar-dark bg-dark sticky-top navbar-light bg-light d-flex justify-content-between\">\n        <a className=\"navbar-brand\" href=\"/\">\n          WUCOLS Plant Search Database\n        </a>\n\n        <div className=\"btn-group\">\n          {[\n            {\n              label: \"Search\",\n              icon: faSearch,\n              to: \"/search\" + location.search,\n            },\n            {\n              label: `Favorites (${favoritePlants.length})`,\n              icon: faStar,\n              to: \"/favorites\" + location.search,\n              tooltip: \"Download options available\",\n            },\n          ].map((vm, i) => {\n            return (\n              <NavLink\n                key={i}\n                activeClassName=\"active\"\n                className=\"btn btn-outline-light\"\n                to={vm.to}\n              >\n                <FontAwesomeIcon icon={vm.icon} />\n                <span className=\"ml-2\" title={vm.tooltip}>\n                  {vm.label}\n                </span>\n              </NavLink>\n            );\n          })}\n        </div>\n\n        {!searchCriteria.city || true ? (\n          <div className=\"text-light\">\n            {/*Select a city to enable downloads*/}\n          </div>\n        ) : (\n          <DropdownButton\n            title=\"Download\"\n            variant=\"outline-light\"\n            disabled={!searchCriteria.city}\n          >\n            {getDownloadActions(data, searchCriteria, favoritePlants).map(\n              (a, i) => (\n                <Dropdown.Item onClick={a.method} key={i}>\n                  {a.label}\n                </Dropdown.Item>\n              )\n            )}\n          </DropdownButton>\n        )}\n\n        {/*\n        <div>\n          <span className=\"mr-3 text-light\">\n            View plants in a\n          </span>\n          <div className=\"btn-group\">\n            {plantsViewModes.map(vm => \n              <button className={'btn btn-outline-light' + (vm.id === plantsViewModeId ? ' active' : '')} onClick={() => {\n                setPlantsViewModeId(vm.id);\n              }}>\n                <FontAwesomeIcon icon={vm.icon} />\n                <span className=\"ml-2\">\n                  {vm.label}\n                </span>\n              </button>\n            )}\n          </div>\n        </div>\n        */}\n      </nav>\n      <Route exact={true} path=\"/\">\n        <Redirect to=\"/search\" />\n      </Route>\n      <Route\n        path=\"/map\"\n        render={({ match }) => {\n          return (\n            <div>\n              <Map\n                cities={data.cities}\n                onSelect={(city: City) => {\n                  alert(city.name);\n                }}\n              />\n            </div>\n          );\n        }}\n      />\n      <Route\n        path=\"/plant/:plantId\"\n        exact={true}\n        render={({ match }) => {\n          const id = parseInt(match.params.plantId);\n          let plant = data.plants.filter(\n            (p) => p.id === id || p.url_keyword === match.params.plantId\n          )[0];\n          return !plant ? (\n            <div className=\"container-fluid my-5\">\n              No plant found by that ID\n            </div>\n          ) : (\n            <div className=\"container-fluid\">\n              <SimpleReactLightbox>\n                <PlantDetail\n                  {...{\n                    plant,\n                    photos: data.photos[plant.botanicalName] || [],\n                    benchCardTemplates: data.benchCardTemplates,\n                    plantTypeNameByCode: data.plantTypeNameByCode,\n                    waterUseByCode: data.waterUseByCode,\n                    waterUseClassifications: data.waterUseClassifications,\n                    region: !!searchCriteria.city\n                      ? searchCriteria.city.region\n                      : 0,\n                    togglePlantFavorite,\n                    isPlantFavorite,\n                    regions: data.regions,\n                  }}\n                />\n              </SimpleReactLightbox>\n            </div>\n          );\n        }}\n      />\n      <Route\n        path=\"/plant/:plantId/benchcard/:bctId\"\n        render={({ match }) => {\n          const id = parseInt(match.params.plantId);\n          const bctId = match.params.bctId;\n          const bct = data.benchCardTemplates.filter(\n            (bct) => bct.id === bctId\n          )[0];\n          let plant = data.plants.filter(\n            (p) => p.id === id || p.url_keyword === match.params.plantId\n          )[0];\n          return !plant ? (\n            <div className=\"container-fluid my-5\">\n              No plant found by that ID\n            </div>\n          ) : !bct ? (\n            <div className=\"container-fluid my-5\">\n              No Bench Card found by that ID\n            </div>\n          ) : (\n            <>\n              {/*\n            <pre>{JSON.stringify(plant,null,2)}</pre>\n            */}\n              <PDFViewer\n                style={{ width: \"100vw\", height: \"90vh\" }}\n                showToolbar={false}\n              >\n                <BenchCardDocument\n                  benchCardTemplate={bct}\n                  plant={plant}\n                  region={\n                    (searchCriteria.city && searchCriteria.city.region) || 1\n                  }\n                  waterUseByCode={data.waterUseByCode}\n                />\n              </PDFViewer>\n            </>\n          );\n        }}\n      />\n      <Route exact={true} path=\"/favorites\">\n        <Favorites\n          {...{\n            favoritePlants,\n            queryString: location.search,\n            getDownloadActions: getDownloadActions,\n            isPlantFavorite,\n            togglePlantFavorite,\n            searchCriteria,\n            data,\n          }}\n        />\n      </Route>\n      {/*\n      <Route exact=\"true\" path=\"/search/(types)?/:types?\" render={match => \n      */}\n      <Route\n        exact={true}\n        path=\"/search\"\n        render={(match) => (\n          <Search\n            queryString={location.search}\n            searchCriteria={searchCriteria}\n            isPlantFavorite={isPlantFavorite}\n            togglePlantFavorite={togglePlantFavorite}\n            setSearchCriteria={updateSearchCriteria}\n            data={data}\n          />\n        )}\n      />\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ninterface SWConfig {\n  onUpdate: (registration: ServiceWorkerRegistration) => void;\n  onSuccess: (registration: ServiceWorkerRegistration) => void;\n}\n\nexport function register(config: SWConfig) {\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            \"This web app is being served cache-first by a service \" +\n              \"worker. To learn more, visit https://bit.ly/CRA-PWA\"\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string | URL, config: SWConfig) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                \"New content is available and will be used when all \" +\n                  \"tabs for this page are closed. See https://bit.ly/CRA-PWA.\"\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log(\"Content is cached for offline use.\");\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error(\"Error during service worker registration:\", error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config: SWConfig) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { \"Service-Worker\": \"script\" },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get(\"content-type\");\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        \"No internet connection found. App is running in offline mode.\"\n      );\n    });\n}\n\nexport function unregister() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./Utilities/serviceWorker\";\nimport { ToastProvider } from \"react-toast-notifications\";\nimport {\n  //BrowserRouter as Router,\n  HashRouter as Router,\n} from \"react-router-dom\";\nimport { Data, WaterUseClassification } from \"./types\";\n\nimport \"./sass/wucols.scss\";\n\ndeclare global {\n  interface Window {\n    wucols_data: Data;\n  }\n}\nfetch(\"WUCOLS.json\")\n  .then((r) => r.json())\n  .then((d: Data) => {\n    window.wucols_data = d;\n    d.plants.forEach((p) => {\n      p.searchName = (p.commonName + \" \" + p.botanicalName).toLowerCase();\n    });\n\n    d.plantTypeNameByCode = d.plantTypes.reduce(\n      (dict: { [key: string]: string }, t) => {\n        dict[t.code] = t.name;\n        return dict;\n      },\n      {}\n    );\n\n    d.waterUseByCode = d.waterUseClassifications.reduce(\n      (dict: { [key: string]: WaterUseClassification }, wu) => {\n        dict[wu.code] = wu;\n        return dict;\n      },\n      {}\n    );\n\n    d.cityOptions = d.cities\n      .map((c) => ({\n        id: c.id,\n        position: c.position,\n        key: c.id,\n        name: c.name,\n        label: \"Region \" + c.region + \": \" + c.name,\n        value: c.name,\n        region: c.region,\n      }))\n      .sort((a, b) => (a.label > b.label ? 1 : a.label < b.label ? -1 : 0));\n\n    d.plantTypes = d.plantTypes.sort((a, b) =>\n      a.name < b.name ? -1 : a.name > b.name ? 1 : 0\n    );\n\n    d.benchCardTemplates = d.benchCardTemplates.sort((a, b) =>\n      a.name < b.name ? -1 : a.name > b.name ? 1 : 0\n    );\n\n    ReactDOM.render(\n      <ToastProvider\n        autoDismiss\n        placement=\"bottom-center\"\n        autoDismissTimeout={6000}\n      >\n        <Router /*basename={process.env.PUBLIC_URL}*/>\n          <App data={d} />\n        </Router>\n      </ToastProvider>,\n      document.getElementById(\"root\")\n    );\n  });\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}