{"version":3,"sources":["Search/Map.tsx","Utilities/useLocalStorage.ts","Search/sort-plants.ts","Plant/PlantTypeBadge.tsx","Plant/WaterDropRating.tsx","Plant/PlantFavoriteButton.tsx","Plant/PlantList.tsx","Plant/PlantDetailQrCode.tsx","Plant/PlantTable.tsx","Plant/plant-type-combinator-options.ts","Search/SearchForm.tsx","Search/search-criteria-converter.ts","Search/Welcome.tsx","Search/Search.tsx","Plant/PlantDetail.tsx","Favorites/Favorites.tsx","Plant/BenchCardDocument.tsx","App.tsx","Utilities/serviceWorker.ts","index.tsx"],"names":["containerStyle","width","height","CityMarker","city","onClick","markerRef","React","useRef","iw","window","google","maps","InfoWindow","content","name","setNameVisible","v","marker","current","map","open","anchor","shouldFocus","close","position","ref","onMouseOver","onMouseOut","apiKey","process","REACT_APP_GOOGLE_MAPS_API_KEY","libraries","MyComponent","cities","onSelect","isLoaded","useJsApiLoader","id","googleMapsApiKey","useState","setMap","fitPositions","positions","bounds","LatLngBounds","forEach","p","extend","fitBounds","onLoad","useCallback","cityPositions","c","LatLng","visitorMarker","undefined","console","log","length","extraControls","document","createElement","style","marginBottom","display","flexDirection","innerHTML","controls","ControlPosition","BOTTOM_CENTER","push","buttons","getElementsByTagName","addEventListener","navigator","geolocation","getCurrentPosition","pos","currentPosition","lat","coords","latitude","lng","longitude","measurements","cityPosition","distance","geometry","spherical","computeDistanceBetween","sort","a","b","slice","m","setTimeout","Marker","draggable","animation","Animation","DROP","icon","zIndex","addListener","getAnimation","setAnimation","BOUNCE","err","warn","code","message","alert","enableHighAccuracy","timeout","maximumAge","onUnmount","mapContainerStyle","key","memo","useLocalStorage","initialValue","item","localStorage","getItem","JSON","parse","error","storedValue","setStoredValue","value","valueToStore","Function","setItem","stringify","sortValueByWaterUseCode","VL","LO","M","H","U","NA","getWaterUseSortValue","sortPlants","region","plants","plantA","plantB","waterUseByRegion","PlantTypeBadge","type","plantTypeNameByCode","className","role","WaterDropRating","waterUseCode","DropIcon","filled","opacity","color","padding","faTint","d","D","PlantFavoriteButton","plant","togglePlantFavorite","isPlantFavorite","FavoriteIcon","faStar","dropShadowCss","title","WebkitFilter","filter","PlantList","photosByPlantName","waterUseByCode","imageSize","wu","photoUrl","botanicalName","large","url","top","right","background","backgroundSize","src","alt","percentageET0","to","commonName","types","t","plantDetailQrCodeFromId","destination_url","REACT_APP_PLANT_DETAIL_URL_PATTERN","URL","replace","toString","plantDetailUrlFromId","image_url","encodeURIComponent","PlantDetailQrCode","href","target","rel","PlantTable","queryString","showAvailableMedia","rowSpan","small","plantFactor","combinators","label","fn","plantTypeCombinatorOptions","default","array","byId","reduce","dict","MapModal","visible","setVisible","onCityChange","tabIndex","left","Map","SearchForm","cityOptions","searchCriteria","plantTypes","waterUseClassifications","updateSearchCriteria","mapModalVisible","setMapModalVisible","selectAllWaterUseClassifications","selected","pageNumber","o","selectAllPlantTypes","pt","everythingElse","placeholder","onChange","e","toLowerCase","checked","htmlFor","styles","container","base","flex","options","plantTypeCombinator","ptc","noOptionsMessage","faMap","getDefaultSearchCriteria","SearchCriteriaConverter","fromQuerystring","qs","ps","URLSearchParams","parseInt","get","getAll","plantTypeCombinatorId","cityId","toQuerystring","sc","Object","entries","initSearchCriteria","querystring","up","Welcome","Search","data","setSearchCriteria","plantsViewModes","component","faBars","props","faThLarge","faTh","plantsViewModeId","plantsViewMode","vm","searchPerformed","values","some","matchingPlants","useMemo","noType","every","noWu","k","typeFn","bind","typeOk","indexOf","wuOk","nameOk","searchName","pageCount","Math","max","ceil","currentPage","paginationModel","ultimatePagination","getPaginationModel","totalPages","boundaryPagesRange","siblingPagesRange","hideEllipsis","hidePreviousAndNextPageLinks","hideFirstAndLastPageLinks","actualPagination","Pagination","active","isActive","pn","Item","Ellipsis","f","photos","PlantDetail","regions","benchCardTemplates","regionWaterUsePairs","r","leadPhoto","webBenchCard","objectFit","whiteSpace","culturalInformation","dangerouslySetInnerHTML","__html","i","full","caption","bct","maxWidth","Favorites","favoritePlants","getDownloadActions","method","downloadButtons","faFileExcel","faQrcode","faIdCard","debug","StyleSheet","create","page","textAlign","backgroundColor","waterUseClassificationBox","logo","logos","section","margin","flexGrow","dropRatingByWaterUseCode","Font","register","family","fontFamily","N","justifyContent","BenchCardDocument","benchCardTemplate","qrCodeUrl","sizeInches","sizeInInches","sizePoints","x","y","logoStyle","size","fontSize","fontWeight","fontStyle","paddingBottom","alignItems","defaultProps","App","location","useLocation","history","useHistory","search","pathname","isFavoriteByPlantId","updateIsFavoriteByPlantId","useToasts","addToast","removeToast","isFavoriteNow","thisToastId","appearance","transitionState","autoDismiss","toastId","ExcelFile","ReactExport","ExcelSheet","cityRegionIx","join","columns","favoriteAsSpreadsheets","excelData","Promise","all","fetch","then","blob","plantBlobPairs","zip","JSZip","file","generateAsync","saveAs","pdf","toBlob","el","filename","hideElement","dataSet","ReactDOM","render","getElementById","faSearch","tooltip","activeClassName","exact","path","match","params","plantId","url_keyword","bctId","showToolbar","Boolean","hostname","json","wucols_data","placement","autoDismissTimeout","serviceWorker","ready","registration","unregister","catch"],"mappings":"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","file":"static/js/main.ba711812.chunk.js","sourcesContent":["import React from \"react\";\nimport { GoogleMap, useJsApiLoader, Marker } from \"@react-google-maps/api\";\nimport { City } from \"../types\";\n\ndeclare global {\n  interface Window {\n    map: google.maps.Map;\n    extraControls: HTMLDivElement;\n    currentPosition: google.maps.LatLng;\n  }\n}\n\nconst containerStyle = {\n  width: \"100%\",\n  height: \"70vh\",\n};\n\ninterface CityMarkerProps {\n  city: City;\n  onClick: (city: City) => void;\n}\n\nconst CityMarker = ({ city, onClick }: CityMarkerProps) => {\n  const markerRef = React.useRef<Marker | null>(null);\n  let iw = new window.google.maps.InfoWindow({\n    content: `<div>${city.name}</div>`,\n  });\n  const setNameVisible = (v: boolean) => {\n    if (v) {\n      let marker = markerRef.current?.marker as any;\n      let map = marker?.map;\n      iw.open({\n        anchor: marker,\n        map,\n        shouldFocus: false,\n      });\n    } else {\n      iw.close();\n    }\n  };\n  return (\n    <>\n      <Marker\n        position={city.position}\n        ref={(ref) => (markerRef.current = ref)}\n        onClick={() => {\n          onClick(city);\n          iw.close();\n        }}\n        onMouseOver={() => {\n          setNameVisible(true);\n        }}\n        onMouseOut={() => {\n          setNameVisible(false);\n        }}\n      />\n    </>\n  );\n};\n\nconst apiKey = process.env.REACT_APP_GOOGLE_MAPS_API_KEY;\nconst libraries: [\"geometry\"] = [\"geometry\"];\n\ninterface MyComponentProps {\n  cities: City[];\n  onSelect: (city: City) => void;\n}\n\nfunction MyComponent({ cities, onSelect }: MyComponentProps) {\n  interface CityMeasurement {\n    city: City;\n    cityPosition: google.maps.LatLng;\n    distance: number;\n  }\n\n  const { isLoaded } = useJsApiLoader({\n    id: \"google-map-script\",\n    libraries,\n    googleMapsApiKey: apiKey,\n  });\n\n  const [, setMap] = React.useState<google.maps.Map | null>(null);\n\n  const fitPositions = (\n    map: google.maps.Map,\n    positions: google.maps.LatLng[]\n  ) => {\n    const bounds = new window.google.maps.LatLngBounds();\n    positions.forEach((p) => {\n      bounds.extend(p);\n    });\n    map.fitBounds(bounds);\n  };\n\n  const onLoad = React.useCallback(\n    function callback(map: google.maps.Map) {\n      const cityPositions = cities.map(\n        (c) => new google.maps.LatLng(c.position)\n      );\n      var visitorMarker: google.maps.Marker | undefined = undefined;\n      fitPositions(map, cityPositions);\n      setMap(map);\n      window.map = map;\n      console.log(`fit bounds to ${cities.length} cities`);\n      const extraControls = window.document.createElement(\"div\");\n      extraControls.style.marginBottom = \"2em\";\n      extraControls.style.display = \"flex\";\n      extraControls.style.flexDirection = \"column\";\n      extraControls.innerHTML = `\n        <button\n          draggable=\"false\" \n          aria-label=\"Use my location\"\n          title=\"Use my location\"\n          type=\"button\"\n          aria-pressed=\"true\"\n          style=\" background: none padding-box rgb(255, 255, 255); display: table-cell; border: 0px; margin: 0px; padding: 0px 17px; text-transform: none; appearance: none; position: relative; cursor: pointer; user-select: none; direction: ltr; overflow: hidden; text-align: center; height: 40px; vertical-align: middle; color: rgb(0, 0, 0); font-family: Roboto, Arial, sans-serif; font-size: 18px; border-bottom-left-radius: 2px; border-top-left-radius: 2px; box-shadow: rgba(0, 0, 0, 0.3) 0px 1px 4px -1px; min-width: 35px; font-weight: 500; margin-bottom:1em;\" aria-expanded=\"false\">\n            Use my location\n          </button>`;\n      extraControls.innerHTML += `\n        <button\n          draggable=\"false\" \n          aria-label=\"View all cities\"\n          title=\"View all cities\"\n          type=\"button\"\n          aria-pressed=\"true\"\n          style=\"background: none padding-box rgb(255, 255, 255); display: table-cell; border: 0px; margin: 0px; padding: 0px 17px; text-transform: none; appearance: none; position: relative; cursor: pointer; user-select: none; direction: ltr; overflow: hidden; text-align: center; height: 40px; vertical-align: middle; color: rgb(0, 0, 0); font-family: Roboto, Arial, sans-serif; font-size: 18px; border-bottom-left-radius: 2px; border-top-left-radius: 2px; box-shadow: rgba(0, 0, 0, 0.3) 0px 1px 4px -1px; min-width: 35px; font-weight: 500;\" aria-expanded=\"false\">\n            View All Cities\n          </button>`;\n      map.controls[window.google.maps.ControlPosition.BOTTOM_CENTER].push(\n        extraControls\n      );\n      window.extraControls = extraControls;\n      let buttons = extraControls.getElementsByTagName(\"button\");\n\n      buttons[1].addEventListener(\"click\", () => {\n        fitPositions(map, cityPositions);\n      });\n\n      buttons[0].addEventListener(\"click\", () => {\n        function success(pos: GeolocationPosition) {\n          let currentPosition = new window.google.maps.LatLng({\n            lat: pos.coords.latitude,\n            lng: pos.coords.longitude,\n          });\n          window.currentPosition = currentPosition;\n          console.log(\"Your current position is:\", currentPosition);\n          var measurements = cities\n            .map((city) => {\n              let cityPosition = new window.google.maps.LatLng(city.position);\n              return {\n                city,\n                cityPosition,\n                distance:\n                  window.google.maps.geometry.spherical.computeDistanceBetween(\n                    currentPosition,\n                    cityPosition\n                  ),\n              } as CityMeasurement;\n            })\n            .sort((a, b) => a.distance - b.distance)\n            .slice(0, 5);\n          fitPositions(\n            map,\n            measurements.map((m) => m.cityPosition)\n          );\n\n          window.setTimeout(() => {\n            if (visitorMarker) {\n              visitorMarker.setMap(null);\n            }\n            visitorMarker = new window.google.maps.Marker({\n              map,\n              draggable: false,\n              animation: window.google.maps.Animation.DROP,\n              icon: \"http://maps.google.com/mapfiles/kml/shapes/man.png\", //'http://earth.google.com/images/kml-icons/track-directional/track-0.png'\n              zIndex: 0,\n              position: currentPosition,\n            });\n            visitorMarker.addListener(\"click\", function toggleBounce() {\n              if (!!visitorMarker) {\n                if (visitorMarker.getAnimation() !== null) {\n                  visitorMarker.setAnimation(null);\n                } else {\n                  visitorMarker.setAnimation(\n                    window.google.maps.Animation.BOUNCE\n                  );\n                }\n              }\n            });\n          }, 1000);\n\n          console.log(measurements);\n        }\n\n        function error(err: GeolocationPositionError) {\n          console.warn(`ERROR(${err.code}): ${err.message}`);\n          alert(\n            err.code === 3\n              ? `Unable to get your location in a reasonable amount of time`\n              : \"Unable to get your location\"\n          );\n        }\n\n        window.navigator.geolocation.getCurrentPosition(success, error, {\n          //for best performance: https://stackoverflow.com/questions/3752383/geolocation-is-so-slow-what-im-doing-wrong\n          enableHighAccuracy: false,\n          timeout: 5000,\n          maximumAge: 1000 * 60,\n        });\n      });\n    },\n    [cities]\n  );\n\n  const onUnmount = React.useCallback(function callback(map) {\n    setMap(null);\n  }, []);\n\n  return isLoaded ? (\n    <GoogleMap\n      mapContainerStyle={containerStyle}\n      onLoad={onLoad}\n      onUnmount={onUnmount}\n    >\n      {/* Child components, such as markers, info windows, etc. */}\n      {cities.map((c) => (\n        <CityMarker key={c.id} city={c} onClick={onSelect} />\n      ))}\n    </GoogleMap>\n  ) : (\n    <></>\n  );\n}\n\nexport default React.memo(MyComponent);\n","import React from \"react\";\n\nfunction useLocalStorage<T>(\n  key: string,\n  initialValue: T\n): [T, (value: T) => void] {\n  // State to store our value\n  // Pass initial state function to useState so logic is only executed once\n  const [storedValue, setStoredValue] = React.useState(() => {\n    try {\n      // Get from local storage by key\n      const item = window.localStorage.getItem(key);\n      // Parse stored json or if none return initialValue\n      return item ? (JSON.parse(item) as T) : initialValue;\n    } catch (error) {\n      // If error also return initialValue\n      console.log(error);\n      return initialValue;\n    }\n  });\n\n  // Return a wrapped version of useState's setter function that ...\n  // ... persists the new value to localStorage.\n  const setValue = (value: T) => {\n    try {\n      // Allow value to be a function so we have same API as useState\n      const valueToStore =\n        value instanceof Function ? value(storedValue) : value;\n      // Save state\n      setStoredValue(valueToStore);\n      // Save to local storage\n      window.localStorage.setItem(key, JSON.stringify(valueToStore));\n    } catch (error) {\n      // A more advanced implementation would handle the error case\n      console.log(error);\n    }\n  };\n\n  return [storedValue, setValue];\n}\n\nexport default useLocalStorage;\n","import { Plant, WaterUseCode } from \"../types\";\n\nconst sortValueByWaterUseCode: {\n  [key in WaterUseCode]: number;\n} = {\n  VL: 1,\n  LO: 2,\n  M: 3,\n  H: 4,\n  U: 5,\n  NA: 7,\n};\n\nconst getWaterUseSortValue = (code: WaterUseCode) => {\n  return sortValueByWaterUseCode[code] || 99;\n};\n\nconst sortPlants = (region: number) => (plants: Plant[]) =>\n  plants.sort((plantA: Plant, plantB: Plant) => {\n    let a = getWaterUseSortValue(plantA.waterUseByRegion[region - 1]);\n    let b = getWaterUseSortValue(plantB.waterUseByRegion[region - 1]);\n    return a < b ? -1 : a > b ? 1 : 0;\n  });\n\nexport default sortPlants;\n","import React from \"react\";\n\nimport { TypeCode } from \"../types\";\n\ninterface Props {\n  type: TypeCode;\n  plantTypeNameByCode: { [key: string]: string };\n}\n\nconst PlantTypeBadge = ({ type, plantTypeNameByCode }: Props) => (\n  <span>\n    <span className=\"badge badge-plantType\">\n      {/*\n      üåªüíÆüå∫‚úΩ‚úæ‚úøüéï\n      üåºüå∏üåπ‚ùÅ‚ùÉ‚ùãüå¥êá≤\n      üå∑‚ùÄ‚öòêáµüçÄ‚òòüå±üçÅ\n      */}\n      {type === \"A\" && (\n        <span role=\"img\" aria-label=\"flower\">\n          üå∏{\" \"}\n        </span>\n      )}\n      {plantTypeNameByCode[type]}\n    </span>{\" \"}\n  </span>\n);\n\nexport default PlantTypeBadge;\n","import React from \"react\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faTint } from \"@fortawesome/free-solid-svg-icons\";\nimport { WaterUseCode } from \"../types\";\n\ninterface Props {\n  waterUseCode: WaterUseCode;\n}\n\nconst WaterDropRating = ({ waterUseCode }: Props) => {\n  interface DropProps {\n    filled?: boolean;\n  }\n\n  const DropIcon = ({ filled }: DropProps) => (\n    <span\n      style={{\n        opacity: filled ? 1 : 0.3,\n        color: filled ? \"#007bff\" : \"grey\",\n        padding: \"0 2px\",\n      }}\n    >\n      <FontAwesomeIcon icon={faTint} />\n    </span>\n  );\n\n  let d = <DropIcon />;\n  let D = <DropIcon filled={true} />;\n  //let d = <span role=\"img\" aria-label=\"empty-water-drop\" style={{opacity:0.3}}>üíß</span>;\n  //let D = <span role=\"img\" aria-label=\"full-water-drop\">üíß</span>;\n  switch (waterUseCode) {\n    case \"VL\":\n      return (\n        <>\n          {D}\n          {d}\n          {d}\n          {d}\n        </>\n      );\n    case \"LO\":\n      return (\n        <>\n          {D}\n          {D}\n          {d}\n          {d}\n        </>\n      );\n    case \"M\":\n      return (\n        <>\n          {D}\n          {D}\n          {D}\n          {d}\n        </>\n      );\n    case \"H\":\n      return (\n        <>\n          {D}\n          {D}\n          {D}\n          {D}\n        </>\n      );\n    case \"U\":\n      return (\n        <>\n          {d}\n          {d}\n          {d}\n          {d}\n        </>\n      );\n\n    default:\n      return <>N/A</>;\n  }\n};\n\nexport default WaterDropRating;\n","import React from \"react\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faStar } from \"@fortawesome/free-solid-svg-icons\";\nimport { Plant } from \"../types\";\n\ninterface Props {\n  plant: Plant;\n  togglePlantFavorite: (plant: Plant) => void;\n  isPlantFavorite: (plant: Plant) => boolean;\n}\n\nconst PlantFavoriteButton = ({\n  plant,\n  togglePlantFavorite,\n  isPlantFavorite,\n}: Props) => {\n  const FavoriteIcon = () => <FontAwesomeIcon icon={faStar} />;\n  const dropShadowCss = \"drop-shadow( 0px 1px 1px rgba(0, 0, 0, .3))\";\n  return (\n    <button\n      title={\n        isPlantFavorite(plant)\n          ? \"This plant is in your favorites.  Click to remove it.\"\n          : \"Click to add this plant to your favorites.\"\n      }\n      className={\n        \"btn \" + (isPlantFavorite(plant) ? \" btn-warning\" : \"btn-light\")\n      }\n      onClick={() => togglePlantFavorite(plant)}\n    >\n      {isPlantFavorite(plant) ? (\n        <span\n          style={{\n            color: \"hsl(60deg 100% 45%)\",\n            WebkitFilter: dropShadowCss,\n            filter: dropShadowCss,\n          }}\n        >\n          <FavoriteIcon />\n        </span>\n      ) : (\n        <span>\n          <FavoriteIcon />\n        </span>\n      )}\n    </button>\n  );\n};\n\nexport default PlantFavoriteButton;\n","import React from \"react\";\nimport PlantTypeBadge from \"./PlantTypeBadge\";\nimport WaterDropRating from \"./WaterDropRating\";\nimport PlantFavoriteButton from \"./PlantFavoriteButton\";\nimport { Link } from \"react-router-dom\";\nimport { Photo, Plant, WaterUseClassification } from \"../types\";\n\ninterface Props {\n  className: string;\n  plants: Plant[];\n  photosByPlantName: { [key: string]: Photo };\n  plantTypeNameByCode: { [key: string]: string };\n  waterUseByCode: { [key: string]: WaterUseClassification };\n  region: number;\n  isPlantFavorite: (plant: Plant) => boolean;\n  togglePlantFavorite: (plant: Plant) => void;\n}\n\nconst PlantList = ({\n  className,\n  plants,\n  photosByPlantName,\n  plantTypeNameByCode,\n  waterUseByCode,\n  region,\n  isPlantFavorite,\n  togglePlantFavorite,\n}: Props) => {\n  return (\n    <div className=\"row no-gutters\">\n      {plants.map((p) => {\n        const imageSize = \"150px\";\n        let wu = waterUseByCode[p.waterUseByRegion[region - 1]];\n        let photoUrl = !photosByPlantName[p.botanicalName]\n          ? \"https://via.placeholder.com/200\"\n          : photosByPlantName[p.botanicalName].large.url;\n        return (\n          <div className={className} key={p.id}>\n            <div className=\"card mr-2 mb-2\">\n              <div className=\"d-flex\">\n                <div className=\"d-flex-shrink-0\">\n                  <div style={{ position: \"relative\" }}>\n                    <div\n                      style={{\n                        position: \"absolute\",\n                        top: \"10px\",\n                        right: \"10px\",\n                        color: \"unset\",\n                      }}\n                    >\n                      <PlantFavoriteButton\n                        {...{ plant: p, togglePlantFavorite, isPlantFavorite }}\n                      />\n                    </div>\n                    <img\n                      className=\"card-img\"\n                      style={{\n                        width: imageSize,\n                        height: imageSize,\n                        background: `url(${photoUrl})`,\n                        backgroundSize: \"cover\",\n                      }}\n                      src={photoUrl}\n                      alt={p.botanicalName}\n                    />\n                  </div>\n                </div>\n                <div className=\"d-flex-grow-1 ml-3 flex-fill\">\n                  <div className=\"card-body\">\n                    <div className=\"float-right text-right ml-3\">\n                      <WaterDropRating waterUseCode={wu.code} />\n                      <br />\n                      <small>{wu.name}</small>\n                      <br />\n                      <small>\n                        {wu.percentageET0}% ET<sub>0</sub>\n                      </small>\n\n                      {/*\n                      <div>\n                        <input type=\"checkbox\" checked={isPlantFavorite(p)} onChange={() => togglePlantFavorite(p)}/>\n                      </div>\n                      */}\n                    </div>\n                    <Link to={`/plant/${p.id}`}>\n                      <h6 className=\"mt-0 mb-1\">\n                        <em>{p.botanicalName}</em>\n                      </h6>\n                    </Link>\n                    <div>{p.commonName}</div>\n                    <div>\n                      {p.types.map((t) => (\n                        <PlantTypeBadge\n                          plantTypeNameByCode={plantTypeNameByCode}\n                          type={t}\n                          key={t}\n                        />\n                      ))}\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        );\n      })}\n    </div>\n  );\n};\n\nexport default PlantList;\n","import React from \"react\";\nimport { Plant } from \"../types\";\n\nconst googleQrCodeUrl = (destination_url: string) =>\n  `https://chart.googleapis.com/chart?chs=500x500&cht=qr&choe=UTF-8&chl=${encodeURIComponent(\n    destination_url\n  )}`;\n\nconst plantDetailUrlFromId = (id: number) =>\n  /* example expected patterns:\n    - https://some.website-of-yours.app/plants/:id/detail \n    - https://some.website-of-yours.app/plants?id=:id&utm_source=qr_code\n  */\n  (process.env.REACT_APP_PLANT_DETAIL_URL_PATTERN || \"\") !== \"\"\n    ? new URL(\n        process.env.REACT_APP_PLANT_DETAIL_URL_PATTERN.replace(\n          \":id\",\n          id.toString()\n        )\n      ).toString()\n    : \"\";\n\nexport const plantDetailQrCodeFromId = (id: number) => {\n  let url = plantDetailUrlFromId(id);\n  return {\n    destination_url: url,\n    image_url: googleQrCodeUrl(url),\n  };\n};\n\ninterface Props {\n  plant: Plant;\n  style?: React.CSSProperties;\n}\n\nexport const PlantDetailQrCode = ({ plant, style }: Props) => {\n  let { destination_url, image_url } = plantDetailQrCodeFromId(plant.id);\n  return (\n    <a href={destination_url} target=\"_blank\" rel=\"noreferrer\">\n      <img\n        src={image_url}\n        alt={\"QR Code for \" + plant.botanicalName}\n        className=\"img-responsive\"\n        style={{ width: \"64px\", ...(style || {}) }}\n      />\n    </a>\n  );\n};\n","import React from \"react\";\nimport PlantTypeBadge from \"./PlantTypeBadge\";\nimport WaterDropRating from \"./WaterDropRating\";\nimport PlantFavoriteButton from \"./PlantFavoriteButton\";\nimport { PlantDetailQrCode } from \"./PlantDetailQrCode\";\nimport { Link } from \"react-router-dom\";\nimport { Photo, Plant, WaterUseClassification } from \"../types\";\n\ninterface Props {\n  queryString: string;\n  showAvailableMedia: boolean;\n  plants: Plant[];\n  photosByPlantName: { [key: string]: Photo };\n  plantTypeNameByCode: { [key: string]: string };\n  waterUseByCode: { [key: string]: WaterUseClassification };\n  region: number;\n  isPlantFavorite: (plant: Plant) => boolean;\n  togglePlantFavorite: (plant: Plant) => void;\n}\n\nconst PlantTable = ({\n  queryString,\n  showAvailableMedia,\n  plants,\n  photosByPlantName,\n  plantTypeNameByCode,\n  waterUseByCode,\n  region,\n  isPlantFavorite,\n  togglePlantFavorite,\n}: Props) => {\n  return (\n    <table className=\"table table-sm \">\n      <thead>\n        <tr>\n          <th rowSpan={2}>Photo</th>\n          <th rowSpan={2}>Name</th>\n          {showAvailableMedia && (\n            <>\n              <th rowSpan={2}>QR Code</th>\n            </>\n          )}\n          <th rowSpan={2}>Water Use</th>\n          <th rowSpan={2}>Type(s)</th>\n          <th rowSpan={2}>Favorite</th>\n        </tr>\n      </thead>\n      <tbody>\n        {plants.map((p) => {\n          const imageSize = \"64px\";\n          let wu = waterUseByCode[p.waterUseByRegion[region - 1]];\n          let photoUrl = !photosByPlantName[p.botanicalName]\n            ? \"https://via.placeholder.com/200\"\n            : photosByPlantName[p.botanicalName].small.url;\n          return (\n            <tr key={p.id}>\n              <td style={{ width: imageSize }}>\n                <img\n                  className=\"card-img mr-2\"\n                  style={{\n                    width: imageSize,\n                    height: imageSize,\n                    background: `url(${photoUrl})`,\n                    backgroundSize: \"cover\",\n                  }}\n                  src={photoUrl}\n                  alt={p.botanicalName}\n                />\n              </td>\n              <td>\n                <Link to={`/plant/${p.id}${queryString}`}>\n                  <h6 className=\"mt-0 mb-1\">\n                    <em>{p.botanicalName}</em>\n                  </h6>\n                </Link>\n                <div>{p.commonName}</div>\n              </td>\n              {showAvailableMedia && (\n                <td>\n                  <PlantDetailQrCode plant={p} />\n                </td>\n              )}\n              <td>\n                <WaterDropRating waterUseCode={wu.code} />\n                <small className=\"ml-2\">{wu.name}</small>\n                <br />\n                <small>\n                  {wu.percentageET0}% ET<sub>0</sub>\n                  <br />\n                  Plant Factor: {wu.plantFactor}\n                </small>\n              </td>\n              <td>\n                {p.types.map((t) => (\n                  <PlantTypeBadge\n                    plantTypeNameByCode={plantTypeNameByCode}\n                    type={t}\n                    key={t}\n                  />\n                ))}\n              </td>\n              <td>\n                <PlantFavoriteButton\n                  {...{ plant: p, togglePlantFavorite, isPlantFavorite }}\n                />\n              </td>\n            </tr>\n          );\n        })}\n      </tbody>\n    </table>\n  );\n};\n\nexport default PlantTable;\n","import { PlantTypeCombinator, PlantTypeCombinatorOptions } from \"../types\";\n\nconst combinators: PlantTypeCombinator[] = [\n  {\n    label: \"Match plants with ANY of\",\n    value: \"ANY\",\n    fn: (a: any, b: any) => a || b,\n  },\n  {\n    label: \"Match plants with ALL of\",\n    value: \"ALL\",\n    fn: (a: any, b: any) => a && b,\n  },\n];\n\nconst plantTypeCombinatorOptions: PlantTypeCombinatorOptions = {\n  default: combinators[0],\n  array: combinators,\n  byId: combinators.reduce(\n    (dict: { [key: string]: PlantTypeCombinator }, c) => {\n      dict[c.value] = c;\n      return dict;\n    },\n    {}\n  ),\n};\n\nexport default plantTypeCombinatorOptions;\n","import React from \"react\";\nimport Select, { ActionMeta, ValueType } from \"react-select\";\nimport Map from \"./Map\";\nimport plantTypeCombinatorOptions from \"../Plant/plant-type-combinator-options\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faMap } from \"@fortawesome/free-solid-svg-icons\";\nimport {\n  BoolDict,\n  City,\n  PlantType,\n  PlantTypeCombinator,\n  SearchCriteria,\n  WaterUseClassification,\n} from \"../types\";\n\ninterface MapModalProps {\n  cities: City[];\n  visible: boolean;\n  setVisible: React.Dispatch<React.SetStateAction<boolean>>;\n  onCityChange: (city: City) => void;\n}\n\nconst MapModal = ({\n  cities,\n  visible,\n  setVisible,\n  onCityChange,\n}: MapModalProps) => (\n  <>\n    {visible && (\n      <div\n        className={\"modal fade\" + (visible ? \" show\" : \"\")}\n        style={{ display: visible ? \"block\" : \"none\" }}\n        id=\"mapModal\"\n        tabIndex={-1}\n        aria-labelledby=\"exampleModalLabel\"\n        aria-hidden=\"true\"\n      >\n        <div className=\"modal-dialog\" style={{ top: \"30px\" }}>\n          <div\n            className=\"modal-content\"\n            style={{ width: \"65vw\", position: \"fixed\", left: \"17vw\" }}\n          >\n            <div className=\"modal-header\">\n              <h5 className=\"modal-title\" id=\"exampleModalLabel\">\n                City Map\n              </h5>\n              <button\n                type=\"button\"\n                className=\"close\"\n                data-dismiss=\"modal\"\n                aria-label=\"Close\"\n                onClick={() => setVisible(false)}\n              >\n                <span aria-hidden=\"true\">&times;</span>\n              </button>\n            </div>\n            <div className=\"modal-body\">\n              <Map\n                cities={cities}\n                onSelect={(city: City) => {\n                  onCityChange(city);\n                  setVisible(false);\n                }}\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n    )}\n  </>\n);\n\ninterface SearchFormProps {\n  cityOptions: City[];\n  searchCriteria: SearchCriteria;\n  plantTypes: PlantType[];\n  waterUseClassifications: WaterUseClassification[];\n  updateSearchCriteria: (searchCriteria: SearchCriteria) => void;\n}\n\nconst SearchForm = ({\n  cityOptions,\n  searchCriteria,\n  plantTypes,\n  waterUseClassifications,\n  updateSearchCriteria,\n}: SearchFormProps) => {\n  const [mapModalVisible, setMapModalVisible] = React.useState(false);\n  const setPlantType = (code: string, checked: boolean) =>\n    updateSearchCriteria({\n      ...searchCriteria,\n      pageNumber: 1,\n      plantTypes: { ...searchCriteria.plantTypes, [code]: checked },\n    });\n  const selectAllWaterUseClassifications = (selected: boolean) => {\n    updateSearchCriteria({\n      ...searchCriteria,\n      pageNumber: 1,\n      waterUseClassifications: waterUseClassifications.reduce(\n        (dict: BoolDict, wu) => {\n          dict[wu.code] = selected;\n          return dict;\n        },\n        {}\n      ),\n    });\n  };\n  const onCityChange = (o: City) => {\n    //console.log('onCityChange',o);\n    updateSearchCriteria({ ...searchCriteria, pageNumber: 1, city: o });\n  };\n  const onPlantTypeCombinatorChange = (ptc: PlantTypeCombinator) => {\n    updateSearchCriteria({\n      ...searchCriteria,\n      pageNumber: 1,\n      plantTypeCombinator: ptc,\n    });\n  };\n  const selectAllPlantTypes = (selected: boolean) => {\n    updateSearchCriteria({\n      ...searchCriteria,\n      pageNumber: 1,\n      plantTypes: plantTypes.reduce((dict: BoolDict, pt) => {\n        dict[pt.code] = selected;\n        return dict;\n      }, {}),\n    });\n  };\n  const everythingElse = (\n    <>\n      <div className=\"form-group\">\n        <label>\n          <strong>Plant Name</strong>\n        </label>\n        <input\n          type=\"search\"\n          className=\"form-control\"\n          value={searchCriteria.name}\n          placeholder=\"botanical or common name\"\n          onChange={(e) =>\n            updateSearchCriteria({\n              ...searchCriteria,\n              pageNumber: 1,\n              name: e.target.value.toLowerCase(),\n            })\n          }\n        />\n      </div>\n      <div className=\"form-group\">\n        <label className=\"form-label\">\n          <strong>Water Use</strong>\n        </label>\n        <div>\n          <button\n            className=\"btn btn-sm btn-link\"\n            onClick={() => selectAllWaterUseClassifications(true)}\n          >\n            Select all\n          </button>\n          /{\" \"}\n          <button\n            className=\"btn btn-sm btn-link\"\n            onClick={() => selectAllWaterUseClassifications(false)}\n          >\n            Deselect all\n          </button>\n        </div>\n        {waterUseClassifications.map((wu) => (\n          <div className=\"form-check\" key={wu.code}>\n            <input\n              className=\"form-check-input\"\n              type=\"checkbox\"\n              checked={searchCriteria.waterUseClassifications[wu.code]}\n              onChange={(e) =>\n                updateSearchCriteria({\n                  ...searchCriteria,\n                  pageNumber: 1,\n                  waterUseClassifications: {\n                    ...searchCriteria.waterUseClassifications,\n                    [wu.code]: e.target.checked,\n                  },\n                })\n              }\n              id={wu.code + \"_checkbox\"}\n            />\n            <label className=\"form-check-label\" htmlFor={wu.code + \"_checkbox\"}>\n              {wu.name}\n            </label>\n          </div>\n        ))}\n      </div>\n      <div className=\"form-group\">\n        <label className=\"form-label\">\n          <strong>Plant Types</strong>\n        </label>\n        <div>\n          <button\n            className=\"btn btn-sm btn-link\"\n            onClick={() => selectAllPlantTypes(true)}\n          >\n            Select all\n          </button>\n          /\n          <button\n            className=\"btn btn-sm btn-link\"\n            onClick={() => selectAllPlantTypes(false)}\n          >\n            Deselect all\n          </button>\n        </div>\n        <div>\n          <Select\n            styles={{\n              container: (base: any) => ({\n                ...base,\n                flex: 1,\n              }),\n            }}\n            options={plantTypeCombinatorOptions.array}\n            value={searchCriteria.plantTypeCombinator}\n            onChange={\n              onPlantTypeCombinatorChange as (\n                o: ValueType<PlantTypeCombinator, false>,\n                _: ActionMeta<PlantTypeCombinator>\n              ) => void\n            }\n            noOptionsMessage={() => \"No result\"}\n          />\n        </div>\n        {plantTypes.map((pt) => (\n          <div className=\"form-check\" key={pt.code}>\n            <input\n              className=\"form-check-input\"\n              type=\"checkbox\"\n              checked={searchCriteria.plantTypes[pt.code] || false}\n              onChange={(e) => setPlantType(pt.code, e.target.checked)}\n              id={pt.code + \"_checkbox\"}\n            />\n            <label className=\"form-check-label\" htmlFor={pt.code + \"_checkbox\"}>\n              {pt.name}\n            </label>\n          </div>\n        ))}\n      </div>\n    </>\n  );\n\n  return (\n    <div>\n      <MapModal\n        visible={mapModalVisible}\n        setVisible={setMapModalVisible}\n        onCityChange={onCityChange}\n        cities={cityOptions}\n      />\n      <div className=\"form-group\">\n        <label>\n          <strong>City/Region</strong>\n          <br />\n          Start typing to search\n        </label>\n        <Select\n          styles={{\n            container: (base: any) => ({\n              ...base,\n              flex: 1,\n            }),\n          }}\n          options={cityOptions}\n          placeholder=\"Select a city\"\n          value={searchCriteria.city}\n          onChange={\n            onCityChange as (\n              o: ValueType<City, false>,\n              _: ActionMeta<City>\n            ) => void\n          }\n          noOptionsMessage={() => \"No cities found by that name\"}\n        />\n        {\" or \"}\n        <button\n          className=\"btn btn-link btn-sm\"\n          onClick={() => setMapModalVisible(true)}\n        >\n          <FontAwesomeIcon icon={faMap} /> Select city from map\n        </button>\n      </div>\n      {!!searchCriteria.city ? everythingElse : <></>}\n    </div>\n  );\n};\n\nexport default SearchForm;\n","import plantTypeCombinatorOptions from \"../Plant/plant-type-combinator-options\";\nimport { City, PlantType, SearchCriteria } from \"../types\";\n\ntype BoolDict = { [key: string]: boolean };\nconst autoSearch = false;\n\nconst fromQuerystring = (qs: string) => {\n  let ps = new URLSearchParams(qs);\n  return {\n    pageNumber: parseInt(ps.get(\"p\") || \"\") || 1,\n    plantTypes: ps.getAll(\"t\").reduce((dict: BoolDict, pt) => {\n      dict[pt] = true;\n      return dict;\n    }, {}),\n    name: (ps.get(\"n\") || \"\").toLowerCase(),\n    plantTypeCombinatorId: ps.get(\"tm\") || \"\",\n    cityId: parseInt(ps.get(\"c\") || \"0\"),\n    waterUseClassifications: ps.getAll(\"wu\").reduce((dict: BoolDict, wu) => {\n      dict[wu] = true;\n      return dict;\n    }, {}),\n  };\n};\n\nconst toQuerystring = (sc: SearchCriteria) => {\n  let wu = Object.entries(sc.waterUseClassifications)\n    .filter(([, selected]) => selected)\n    .map(([code]) => code);\n  let pt = Object.entries(sc.plantTypes)\n    .filter(([, selected]) => selected)\n    .map(([code]) => code);\n  let ps = new URLSearchParams([\n    ...(!sc.city ? [] : [[\"c\", sc.city.id.toString()]]),\n    //exclude default param values for terser URLs\n    ...(!sc.name ? [] : [[\"n\", sc.name]]),\n    ...(sc.plantTypeCombinator === plantTypeCombinatorOptions.default\n      ? []\n      : [[\"tm\", sc.plantTypeCombinator.value]]),\n    ...wu.map((wu) => [\"wu\", wu]),\n    ...pt.map((pt) => [\"t\", pt]),\n    ...(sc.pageNumber === 1 ? [] : [[\"p\", sc.pageNumber.toString()]]),\n  ]);\n  return ps.toString();\n};\n\nconst getDefaultSearchCriteria = (plantTypes: PlantType[]) =>\n  ({\n    city: null as unknown as City,\n    name: \"\",\n    waterUseClassifications: {},\n    plantTypes: plantTypes.reduce((dict: BoolDict, pt) => {\n      dict[pt.code] = autoSearch ? pt.code === \"A\" : false;\n      return dict;\n    }, {}),\n    pageNumber: 1,\n    plantTypeCombinator: plantTypeCombinatorOptions.default,\n  } as SearchCriteria);\n\nconst initSearchCriteria = (\n  querystring: string,\n  cityOptions: City[],\n  plantTypes: PlantType[]\n) => {\n  let up = SearchCriteriaConverter.fromQuerystring(querystring);\n  //console.log(up);\n  let sc = getDefaultSearchCriteria(plantTypes);\n  sc.waterUseClassifications = up.waterUseClassifications;\n  sc.plantTypes = up.plantTypes;\n  sc.name = up.name;\n  sc.pageNumber = up.pageNumber;\n  sc.city = cityOptions.filter((o) => o.id === up.cityId)[0] || sc.city;\n  if (up.plantTypeCombinatorId in plantTypeCombinatorOptions.byId) {\n    sc.plantTypeCombinator =\n      plantTypeCombinatorOptions.byId[up.plantTypeCombinatorId];\n  }\n  return sc;\n};\n\nconst SearchCriteriaConverter = {\n  fromQuerystring: fromQuerystring,\n  toQuerystring: toQuerystring,\n  getDefaultSearchCriteria: getDefaultSearchCriteria,\n  initSearchCriteria: initSearchCriteria,\n};\n\nexport default SearchCriteriaConverter;\n","import React from \"react\";\n\nconst Welcome = () => (\n  <div className=\"welcome-wrapper\">\n    <h1>Welcome to WUCOLS</h1>\n    <p className=\"lead\">\n      WUCOLS{\" \"}\n      <span className=\"discreet\">\n        Water Use Classification of Landscape Species\n      </span>{\" \"}\n      <br />\n      helps you create a landscape plan based on plant water use within your\n      city/region.\n    </p>\n    <h2>Instructions:</h2>\n    <hr />\n    <ol className=\"instructionlist\">\n      <li>\n        <p>\n          <b>Select a City/Region</b> <br />\n          This will determine the appropriate water use rating for each plant.\n        </p>\n      </li>\n      <li>\n        <p>\n          <b>Search a Plant</b> <br />\n          Enter any combination of \"Plant Name, Water Use, Plant Types\" to find\n          plants of interest\n        </p>\n      </li>\n      <li>\n        <p>\n          <b>Favorite</b> <br />\n          Assemble a list of your plants that meet your needs.\n        </p>\n      </li>\n      <li>\n        <p>\n          <b>Download</b> <br />\n          Download your list in a variety of formats\n        </p>\n      </li>\n    </ol>\n  </div>\n);\n\nexport default Welcome;\n","import React from \"react\";\nimport PlantList from \"../Plant/PlantList\";\nimport PlantTable from \"../Plant/PlantTable\";\nimport {\n  faTh,\n  faThLarge,\n  faBars,\n  IconDefinition,\n} from \"@fortawesome/free-solid-svg-icons\";\nimport sortPlants from \"./sort-plants\";\nimport ultimatePagination from \"ultimate-pagination\";\nimport { Pagination } from \"react-bootstrap\";\nimport plantTypeCombinatorOptions from \"../Plant/plant-type-combinator-options\";\nimport SearchForm from \"./SearchForm\";\nimport SearchCriteriaConverter from \"./search-criteria-converter\";\nimport Welcome from \"./Welcome\";\nimport { Data, Plant, SearchCriteria } from \"../types\";\n\nconst performancePlantLimit = 50000;\n\ninterface Props {\n  data: Data;\n  searchCriteria: SearchCriteria;\n  setSearchCriteria: (searchCriteria: SearchCriteria) => void;\n  isPlantFavorite: (plant: Plant) => boolean;\n  togglePlantFavorite: (plant: Plant) => void;\n  queryString: string;\n}\n\nexport interface PlantsViewMode {\n  id: string;\n  label: string;\n  component: React.ComponentType<any>;\n  icon: IconDefinition;\n}\n\nconst Search = ({\n  data,\n  searchCriteria,\n  setSearchCriteria,\n  isPlantFavorite,\n  togglePlantFavorite,\n  queryString,\n}: Props) => {\n  let plantsViewModes: PlantsViewMode[] = [\n    {\n      id: \"list\",\n      label: \"List\",\n      component: PlantTable,\n      icon: faBars,\n    },\n    {\n      id: \"grid\",\n      label: \"Grid\",\n      component: (props) =>\n        PlantList({ ...props, className: \"col-sm-12 col-lg-6 col-xl-6\" }),\n      icon: faThLarge,\n    },\n    {\n      id: \"dense-grid\",\n      label: \"Dense Grid\",\n      component: (props) =>\n        PlantList({ ...props, className: \"col-sm-12 col-lg-6 col-xl-4\" }),\n      icon: faTh,\n    },\n  ];\n  const [plantsViewModeId] = React.useState(plantsViewModes[0].id);\n  const plantsViewMode =\n    plantsViewModes.filter((vm) => vm.id === plantsViewModeId)[0] ||\n    plantsViewModes[0];\n\n  const resetSearchCriteria = () =>\n    setSearchCriteria(\n      SearchCriteriaConverter.getDefaultSearchCriteria(data.plantTypes)\n    );\n\n  const searchPerformed =\n    Object.values(searchCriteria.waterUseClassifications).some((b) => b) ||\n    Object.values(searchCriteria.plantTypes).some((b) => b) ||\n    searchCriteria.name.length > 0;\n\n  const matchingPlants = React.useMemo(() => {\n    let noType = Object.values(searchCriteria.plantTypes).every((b) => !b);\n    let noWu = Object.values(searchCriteria.waterUseClassifications).every(\n      (b) => !b\n    );\n    let types = Object.entries(searchCriteria.plantTypes)\n      .filter(([k, v]) => !!v)\n      .map(([k, v]) => k);\n    let typeFn =\n      searchCriteria.plantTypeCombinator ===\n      plantTypeCombinatorOptions.byId[\"ANY\"]\n        ? types.some.bind(types)\n        : types.every.bind(types);\n    //console.log(types);\n    if (!searchCriteria.city) {\n      return [];\n    }\n    return sortPlants(searchCriteria.city.region)(\n      data.plants.filter((p) => {\n        let typeOk = noType || typeFn((t) => p.types.indexOf(t) > -1);\n        if (!searchCriteria.city) {\n          return false;\n        }\n        let wu = p.waterUseByRegion[searchCriteria.city.region - 1];\n        let wuOk = searchCriteria.waterUseClassifications[wu] || noWu;\n        let nameOk =\n          !searchCriteria.name ||\n          p.searchName.indexOf(searchCriteria.name) > -1;\n        return wuOk && typeOk && nameOk;\n      })\n    ).slice(0, performancePlantLimit);\n  }, [data, searchCriteria]);\n\n  const pageSize = 50;\n  const pageCount = Math.max(1, Math.ceil(matchingPlants.length / pageSize));\n  const currentPage = pageCount > 0 ? searchCriteria.pageNumber : 1;\n  var paginationModel = ultimatePagination.getPaginationModel({\n    // Required\n    currentPage,\n    totalPages: pageCount,\n\n    // Optional\n    boundaryPagesRange: 1,\n    siblingPagesRange: 1,\n    hideEllipsis: false,\n    hidePreviousAndNextPageLinks: false,\n    hideFirstAndLastPageLinks: false,\n  });\n  //console.log('pagination',paginationModel);\n\n  const setCurrentPageNumber = (pn: number) =>\n    setSearchCriteria({ ...searchCriteria, pageNumber: pn });\n  const actualPagination = pageCount > 1 && (\n    <Pagination>\n      {paginationModel\n        .map((p) => {\n          const props = {\n            key: p.key,\n            active: p.isActive,\n            onClick: () => setCurrentPageNumber(p.value),\n          };\n          switch (p.type) {\n            //case 'PREVIOUS_PAGE_LINK': return <Pagination.Prev {...props}/>\n            //case 'NEXT_PAGE_LINK'    : return <Pagination.Next {...props}/>\n            case \"PAGE\":\n              return <Pagination.Item {...props}>{p.value}</Pagination.Item>;\n            case \"ELLIPSIS\":\n              return <Pagination.Ellipsis {...props} />;\n            default:\n              return undefined;\n          }\n        })\n        .filter((f) => !!f)}\n    </Pagination>\n  );\n\n  return (\n    <div className=\"container-fluid\">\n      {/*\n    <div>\n      <pre>{JSON.stringify(match,null,2)}</pre>\n    </div>\n    */}\n      <div className=\"row\">\n        <nav className=\"col-sm-5 col-lg-4 col-xl-3 sidebar bg-light\">\n          <div className=\"sidebar-sticky p-3\">\n            <SearchForm\n              waterUseClassifications={data.waterUseClassifications}\n              plantTypes={data.plantTypes}\n              cityOptions={data.cityOptions}\n              searchCriteria={searchCriteria}\n              updateSearchCriteria={setSearchCriteria}\n            />\n          </div>\n        </nav>\n\n        <main className=\"col-sm-7 col-lg-8 col-xl-9 ml-sm-auto\" role=\"main\">\n          {!searchPerformed ? (\n            <Welcome />\n          ) : (\n            <>\n              <div className=\"d-flex justify-content-between align-items-center mb-3\">\n                <div>Matching Plants: {matchingPlants.length}</div>\n\n                {searchPerformed && (\n                  <button\n                    className=\"btn btn-link\"\n                    onClick={() => resetSearchCriteria()}\n                  >\n                    Clear Search Form (Start over)\n                  </button>\n                )}\n                {/*\n              <pre>{JSON.stringify({paginationModel,currentPageNumber,pageCount}, null, 2)}</pre>\n            */}\n              </div>\n              {actualPagination}\n              {!searchCriteria.city ? (\n                <div>Please select a city</div>\n              ) : (\n                <plantsViewMode.component\n                  queryString={queryString}\n                  isPlantFavorite={isPlantFavorite}\n                  togglePlantFavorite={togglePlantFavorite}\n                  plants={matchingPlants.slice(\n                    (searchCriteria.pageNumber - 1) * pageSize,\n                    (searchCriteria.pageNumber + 1) * pageSize\n                  )}\n                  photosByPlantName={data.photos}\n                  plantTypeNameByCode={data.plantTypeNameByCode}\n                  region={searchCriteria.city.region}\n                  waterUseByCode={data.waterUseByCode}\n                />\n              )}\n              {actualPagination}\n            </>\n          )}\n        </main>\n      </div>\n    </div>\n  );\n};\n\nexport default Search;\n","import React from \"react\";\nimport PlantTypeBadge from \"./PlantTypeBadge\";\nimport WaterDropRating from \"./WaterDropRating\";\nimport { SRLWrapper } from \"simple-react-lightbox\";\nimport PlantFavoriteButton from \"./PlantFavoriteButton\";\nimport { PlantDetailQrCode } from \"./PlantDetailQrCode\";\nimport { Link } from \"react-router-dom\";\nimport {\n  BenchCardTemplate,\n  Plant,\n  Region,\n  WaterUseClassification,\n} from \"../types\";\n\ninterface Props {\n  plant: Plant;\n  plantTypeNameByCode: { [key: string]: string };\n  waterUseByCode: { [key: string]: WaterUseClassification };\n  region: number;\n  regions: Region[];\n  benchCardTemplates: BenchCardTemplate[];\n  isPlantFavorite: (plant: Plant) => boolean;\n  togglePlantFavorite: (plant: Plant) => void;\n}\n\nconst PlantDetail = ({\n  plant,\n  plantTypeNameByCode,\n  waterUseByCode,\n  region,\n  regions,\n  benchCardTemplates,\n  isPlantFavorite,\n  togglePlantFavorite,\n}: Props) => {\n  if (!plant) {\n    return <div>Invalid Plant</div>;\n  }\n  //let wu = waterUseByCode[plant.waterUseByRegion[region-1]];\n  let regionWaterUsePairs: [Region, WaterUseClassification][] = regions.map(\n    (r) => [r, waterUseByCode[plant.waterUseByRegion[r.id - 1]]]\n  );\n\n  const imageSize = \"64px\";\n  let leadPhoto = plant.photos[0];\n  let photoUrl = !leadPhoto ? \"\" : leadPhoto.large.url;\n\n  const webBenchCard = (\n    <>\n      <div className=\"float-right h2\">\n        <PlantFavoriteButton\n          {...{ plant, togglePlantFavorite, isPlantFavorite }}\n        />\n      </div>\n      <div className=\"d-flex flex-row bd-highlight align-items-center mb-4 \">\n        {photoUrl && (\n          <img\n            className=\"mr-3\"\n            src={photoUrl}\n            style={{ objectFit: \"cover\", width: imageSize, height: imageSize }}\n            alt={plant.botanicalName}\n          />\n        )}\n        <h1 className=\"m0\">\n          <em>{plant.botanicalName}</em>\n        </h1>\n      </div>\n\n      <table className=\"table table-bordered\">\n        <tbody>\n          <tr>\n            <th style={{ width: \"25%\" }}>Botanical Name</th>\n            <td>\n              <em>{plant.botanicalName}</em>\n            </td>\n          </tr>\n          <tr>\n            <th>Common Name</th>\n            <td>{plant.commonName}</td>\n          </tr>\n          <tr>\n            <th>Plant Type(s)</th>\n            <td>\n              {plant.types.map((t) => (\n                <PlantTypeBadge\n                  type={t}\n                  plantTypeNameByCode={plantTypeNameByCode}\n                  key={t}\n                />\n              ))}\n            </td>\n          </tr>\n        </tbody>\n      </table>\n\n      <div className=\"my-5\">\n        <h4 className=\"mb-4\">Water Usage by Region</h4>\n        <table className=\"table table-bordered table-sm\">\n          <tbody>\n            {regionWaterUsePairs.map(([r, wu]) => (\n              <tr className={r.id === region ? \"table-primary\" : \"\"} key={r.id}>\n                <td>\n                  Region {r.id}: {r.name}\n                </td>\n                <td style={{ whiteSpace: \"nowrap\" }}>\n                  <WaterDropRating waterUseCode={wu.code} />\n                </td>\n                <td style={{ whiteSpace: \"nowrap\" }}>{wu.name}</td>\n                <td style={{ whiteSpace: \"nowrap\" }}>\n                  {wu.percentageET0 === \"N/A\" ? (\n                    \"N/A\"\n                  ) : (\n                    <>\n                      {wu.percentageET0}% ET<sub>0</sub>\n                    </>\n                  )}\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>\n\n      {!!plant.culturalInformation && (\n        <div>\n          <h4 className=\"mb-4\">Cultural Information</h4>\n          <div\n            dangerouslySetInnerHTML={{ __html: plant.culturalInformation }}\n          />\n        </div>\n      )}\n\n      <div className=\"row mt-4\">\n        {!!plant.photos.length && (\n          <div className=\"col-sm-12\">\n            <h4 className=\"mb-4\">Photos ({plant.photos.length})</h4>\n            <SRLWrapper key=\"plant gallery\">\n              <div className=\"row row-cols-1 row-cols-md-3 g-4\">\n                {plant.photos.map((p, i) => (\n                  <div className=\"col\" key={i}>\n                    <div className=\"card mb-3\" key={i}>\n                      <a href={p.full.url}>\n                        <img\n                          src={p.large.url}\n                          className=\"card-img-top\"\n                          alt={p.caption}\n                          style={{\n                            height: \"10em\",\n                            objectFit: \"cover\",\n                          }}\n                        />\n                      </a>\n                      <div className=\"card-body text-center\">\n                        <p className=\"card-text\">{p.caption}</p>\n                      </div>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </SRLWrapper>\n          </div>\n        )}\n      </div>\n    </>\n  );\n\n  return (\n    <>\n      <div className=\"row\">\n        <div className=\"col-md-8 col-xl-9 ml-sm-auto pt-3 pb-5 px-5\">\n          {webBenchCard}\n        </div>\n        <nav className=\"col-md-4 col-xl-3\">\n          <div className=\"p-3\">\n            <div className=\"d-flex flex-column\">\n              {benchCardTemplates.map((bct) => (\n                <div className=\"card mb-3 text-center\" key={bct.id}>\n                  <div className=\"card-body d-flex flex-column justify-content-between\">\n                    <h4>{bct.name} Bench Card</h4>\n                    <Link\n                      key={bct.id}\n                      to={`/plant/${plant.id}/benchcard/${bct.id}`}\n                      className=\"mt-3 btn btn-primary\"\n                      target=\"_blank\"\n                    >\n                      Download\n                    </Link>\n                  </div>\n                </div>\n              ))}\n              <div className=\"card mr-3 text-center\">\n                <div className=\"card-body\">\n                  <h4>QR Code</h4>\n                  <PlantDetailQrCode\n                    plant={plant}\n                    style={{ width: \"auto\", maxWidth: \"150px\" }}\n                  />\n                </div>\n              </div>\n            </div>\n          </div>\n        </nav>\n      </div>\n    </>\n  );\n};\n\nexport default PlantDetail;\n","import React from \"react\";\nimport PlantTable from \"../Plant/PlantTable\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport {\n  faQrcode,\n  faFileExcel,\n  faIdCard,\n} from \"@fortawesome/free-solid-svg-icons\";\nimport { Data, DownloadAction, Plant, SearchCriteria } from \"../types\";\n\ninterface Props {\n  queryString: string;\n  favoritePlants: Plant[];\n  getDownloadActions: (\n    data: Data,\n    searchCriteria: SearchCriteria,\n    favoritePlants: Plant[]\n  ) => DownloadAction[];\n  data: Data;\n  isPlantFavorite: (plant: Plant) => boolean;\n  togglePlantFavorite: (plant: Plant) => void;\n  searchCriteria: SearchCriteria;\n}\n\nconst Favorites = ({\n  queryString,\n  favoritePlants,\n  getDownloadActions,\n  data,\n  isPlantFavorite,\n  togglePlantFavorite,\n  searchCriteria,\n}: Props) => {\n  const downloadButtons = (\n    className: string,\n    searchCriteria: SearchCriteria,\n    favoritePlants: Plant[]\n  ) => {\n    return getDownloadActions(data, searchCriteria, favoritePlants).map((a) => (\n      <button className={className} onClick={a.method}>\n        {a.label}\n      </button>\n    ));\n  };\n  return (\n    <>\n      <div className=\"container-fluid\">\n        {!favoritePlants.length ? (\n          <div className=\"py-5\">\n            <div className=\"text-center mb-5\">\n              <div className=\"h3\">You do not have any favorite species yet</div>\n              <p>\n                After you have added some favorites, you can download them in\n                various formats.\n              </p>\n            </div>\n            <div className=\"d-flex justify-content-around\">\n              {[\n                {\n                  icon: faFileExcel,\n                  label: \"Spreadsheet\",\n                },\n                {\n                  icon: faQrcode,\n                  label: \"QR Codes\",\n                },\n                {\n                  icon: faIdCard,\n                  label: \"Bench Cards\",\n                },\n              ].map((f, i) => (\n                <div className=\"\" key={i}>\n                  <div className=\"card\">\n                    <div className=\"card-body text-center\">\n                      <FontAwesomeIcon icon={f.icon} className=\"mt-2 h1\" />\n                      <div className=\"h5\">{f.label}</div>\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n        ) : (\n          <div className=\"row\">\n            <nav className=\"col-sm-4 col-lg-3 col-xl-2 sidebar bg-light\">\n              <div className=\"sidebar-sticky p-3\">\n                {!!favoritePlants.length && (\n                  <div className=\"mb-3 d-flex flex-column justify-content-around\">\n                    <div className=\"mb-3\">\n                      {downloadButtons(\n                        \"btn btn-primary btn-block\",\n                        searchCriteria,\n                        favoritePlants\n                      ).map((c, i) => (\n                        <div className=\"my-2\" key={i}>\n                          {c}\n                        </div>\n                      ))}\n                    </div>\n                    <p>\n                      QR Codes and Bench Cards can be downloaded individually\n                      for each plant from that plant&apos;s detail screen.\n                    </p>\n                  </div>\n                )}\n              </div>\n            </nav>\n            <div className=\"col-sm-8 col-lg-9 col-xl-10 ml-sm-auto\">\n              <div className=\"my-3\">\n                {favoritePlants.length === 0 ? (\n                  \"You don't have any favorites yet.\"\n                ) : favoritePlants.length === 1 ? (\n                  \"You have 1 favorite so far.\"\n                ) : (\n                  <div>\n                    You have <strong>{favoritePlants.length}</strong> favorites\n                    so far.\n                  </div>\n                )}\n              </div>\n              {!searchCriteria.city ? (\n                <div>Select a city to view your favorites</div>\n              ) : (\n                <PlantTable\n                  queryString={queryString}\n                  showAvailableMedia={true}\n                  isPlantFavorite={isPlantFavorite}\n                  togglePlantFavorite={togglePlantFavorite}\n                  plants={favoritePlants}\n                  photosByPlantName={data.photos}\n                  plantTypeNameByCode={data.plantTypeNameByCode}\n                  region={searchCriteria.city.region}\n                  waterUseByCode={data.waterUseByCode}\n                />\n              )}\n            </div>\n          </div>\n        )}\n      </div>\n    </>\n  );\n};\n\nexport default Favorites;\n","import React from \"react\";\nimport {\n  Document,\n  Page,\n  Text,\n  View,\n  StyleSheet,\n  Font,\n  Image,\n} from \"@react-pdf/renderer\";\nimport { plantDetailQrCodeFromId } from \"./PlantDetailQrCode\";\nimport {\n  BenchCardTemplate,\n  Plant,\n  WaterUseClassification,\n  WaterUseCode,\n} from \"../types\";\n\nconst debug = false;\n\n// Create styles\nconst styles = StyleSheet.create({\n  page: {\n    textAlign: \"center\",\n    backgroundColor: \"white\",\n  },\n  waterUseClassificationBox: {\n    backgroundColor: \"#304971\",\n    padding: \"8pt\",\n    width: \"44%\",\n    textAlign: \"center\",\n  },\n  logo: {},\n  logos: {},\n  section: {\n    margin: 10,\n    padding: 10,\n    flexGrow: 1,\n  },\n});\n\nconst dropRatingByWaterUseCode: { [key: string]: JSX.Element } = (() => {\n  Font.register({\n    family: \"FontAwesome\",\n    src: \"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.2.0/fonts/fontawesome-webfont.ttf\",\n  });\n  const DropIcon = ({ filled }: { filled?: boolean }) => (\n    <Text\n      style={{\n        opacity: filled ? 1 : 0.3,\n        color: filled ? \"#007bff\" : \"grey\",\n        fontFamily: \"FontAwesome\",\n      }}\n    >\n      ÔÅÉ\n    </Text>\n  );\n\n  /*\n    <Image src=\"/water-drop.svg\" style={{opacity:filled ? 1 : 0.4}} />;\n*/\n\n  let d = <DropIcon />;\n  let D = <DropIcon filled={true} />;\n  //let d = <span role=\"img\" aria-label=\"empty-water-drop\" style={{opacity:0.3}}>üíß</span>;\n  //let D = <span role=\"img\" aria-label=\"full-water-drop\">üíß</span>;\n  return {\n    \"?\": (\n      <>\n        {d}\n        {d}\n        {d}\n        {d}\n      </>\n    ),\n    N: (\n      <>\n        {d}\n        {d}\n        {d}\n        {d}\n      </>\n    ),\n    VL: (\n      <>\n        {D}\n        {d}\n        {d}\n        {d}\n      </>\n    ),\n    LO: (\n      <>\n        {D}\n        {D}\n        {d}\n        {d}\n      </>\n    ),\n    M: (\n      <>\n        {D}\n        {D}\n        {D}\n        {d}\n      </>\n    ),\n    H: (\n      <>\n        {D}\n        {D}\n        {D}\n        {D}\n      </>\n    ),\n  };\n})();\n\ninterface WaterDropRatingProps {\n  waterUseCode: WaterUseCode;\n}\n\nconst WaterDropRating = ({ waterUseCode }: WaterDropRatingProps) =>\n  (\n    <View\n      style={{\n        display: \"flex\",\n        flexDirection: \"row\",\n        justifyContent: \"space-evenly\",\n        margin: \"0 25%\",\n      }}\n    >\n      {dropRatingByWaterUseCode[waterUseCode]}\n    </View>\n  ) || <>N/A</>;\n\ninterface BenchCardDocumentProps {\n  plant: Plant;\n  region: number;\n  waterUseByCode: { [key: string]: WaterUseClassification };\n  benchCardTemplate: BenchCardTemplate;\n}\n\nconst BenchCardDocument = ({\n  plant,\n  region,\n  waterUseByCode,\n  benchCardTemplate,\n}: BenchCardDocumentProps) => {\n  const p = plant;\n  const qrCodeUrl = plantDetailQrCodeFromId(plant.id).image_url;\n  let wuCode = p.waterUseByRegion[region - 1];\n  let wu = waterUseByCode[wuCode];\n  //console.log(region, wuCode, wu) //console.log(p)\n  let leadPhoto = p.photos[0];\n  let photoUrl = !leadPhoto ? \"\" : leadPhoto.large.url;\n  console.log({ leadPhoto, photoUrl });\n  const sizeInches = benchCardTemplate.sizeInInches;\n  const sizePoints = { x: sizeInches.x * 72, y: sizeInches.y * 72 };\n  const logoStyle = { height: `${sizeInches.y / 5}in`, width: \"auto\" };\n  return (\n    <Document>\n      <Page size={[sizePoints.x, sizePoints.y]} style={styles.page}>\n        <View\n          debug={debug}\n          style={{\n            display: \"flex\",\n            height: \"100%\",\n            padding: \"18pt\",\n            flexDirection: \"column\",\n            justifyContent: \"space-evenly\",\n          }}\n        >\n          <View>\n            <Text\n              debug={debug}\n              style={{ fontSize: `${0.5}in`, fontWeight: \"extrabold\" }}\n            >\n              {plant.botanicalName}\n            </Text>\n            <Text\n              debug={debug}\n              style={{\n                fontSize: \"25pt\",\n                fontWeight: \"normal\",\n                fontStyle: \"italic\",\n                padding: \"20pt\",\n              }}\n            >\n              {plant.commonName}\n            </Text>\n          </View>\n\n          <View\n            debug={debug}\n            style={{\n              display: \"flex\",\n              flexDirection: \"row\",\n              padding: `${sizeInches.x / 11 / 8}in`,\n              justifyContent: \"space-around\",\n            }}\n          >\n            {!!photoUrl && (\n              <Image debug={debug} src={photoUrl} style={{ width: \"45%\" }} />\n            )}\n\n            <View\n              debug={debug}\n              style={[\n                styles.waterUseClassificationBox,\n                {\n                  fontSize: `${sizeInches.x / 11 / 4}in`,\n                },\n              ]}\n            >\n              <Text\n                style={{\n                  color: \"white\",\n                  paddingBottom: `${sizeInches.x / 11 / 8}in`,\n                }}\n              >\n                Water Use Classification\n              </Text>\n              <View\n                style={{\n                  backgroundColor: \"white\",\n                  flexGrow: 1,\n                  display: \"flex\",\n                  flexDirection: \"column\",\n                  justifyContent: \"space-evenly\",\n                }}\n              >\n                <Text>{wu.name}</Text>\n                <View style={{ fontSize: `${sizeInches.x / 11 / 2}in` }}>\n                  <WaterDropRating waterUseCode={wu.code} />\n                </View>\n                <View>\n                  <Text>Central Valley</Text>\n                  <Text>(WUCOLS Region 2)</Text>\n                </View>\n                <Text>(Source: WUCOLS IV)</Text>\n              </View>\n            </View>\n          </View>\n          <View\n            debug={debug}\n            style={{\n              display: \"flex\",\n              flexDirection: \"row\",\n              justifyContent: \"space-evenly\",\n              alignItems: \"center\",\n              padding: \"2em\",\n              margin: \"5em\",\n            }}\n          >\n            <Image debug={debug} src=\"/logo-dwr.png\" style={logoStyle} />\n            <Image debug={debug} src=\"/logo-ucd-ccuh.png\" style={logoStyle} />\n            <Image debug={debug} src=\"/logo-ucanr.png\" style={logoStyle} />\n            <Image debug={debug} src={qrCodeUrl} style={logoStyle} />\n          </View>\n        </View>\n      </Page>\n    </Document>\n  );\n};\n\nBenchCardDocument.defaultProps = {\n  benchCardTemplate: undefined,\n};\n\nexport default BenchCardDocument;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./App.css\";\nimport Map from \"./Search/Map\";\n//import {useGeolocation} from '../src/useGeolocation';\nimport useLocalStorage from \"./Utilities/useLocalStorage\";\nimport sortPlants from \"./Search/sort-plants\";\nimport Search from \"./Search/Search\";\nimport PlantDetail from \"./Plant/PlantDetail\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport {\n  faSearch,\n  faFileExcel,\n  faStar,\n  faQrcode,\n  faIdCard,\n} from \"@fortawesome/free-solid-svg-icons\";\nimport JSZip from \"jszip\";\nimport { saveAs } from \"file-saver\";\nimport { PDFViewer, pdf } from \"@react-pdf/renderer\";\n\nimport Favorites from \"./Favorites/Favorites\";\n\nimport { DropdownButton, Dropdown } from \"react-bootstrap\";\n\nimport ReactExport, { ExcelCellData, ExcelSheetData } from \"react-export-excel\";\nimport {\n  //BrowserRouter as Router,\n  useLocation,\n  useHistory,\n  Route,\n  NavLink,\n  Redirect,\n} from \"react-router-dom\";\n\nimport SimpleReactLightbox from \"simple-react-lightbox\";\nimport { useToasts } from \"react-toast-notifications\";\nimport SearchCriteriaConverter from \"./Search/search-criteria-converter\";\nimport BenchCardDocument from \"./Plant/BenchCardDocument\";\n\nimport {\n  BoolDict,\n  City,\n  Data,\n  DownloadAction,\n  Plant,\n  SearchCriteria,\n} from \"./types\";\nimport { plantDetailQrCodeFromId } from \"./Plant/PlantDetailQrCode\";\n\ninterface Props {\n  data: Data;\n}\n\nfunction App({ data }: Props) {\n  //const {lat,lng,error} = useGeolocation(false,{enableHighAccuracy: true});\n  const location = useLocation();\n  const history = useHistory();\n  const searchCriteria = SearchCriteriaConverter.initSearchCriteria(\n    location.search,\n    data.cityOptions,\n    data.plantTypes\n  );\n\n  const updateSearchCriteria = React.useCallback(\n    (sc: SearchCriteria) => {\n      let qs = SearchCriteriaConverter.toQuerystring(sc);\n      //console.log('search altered',qs);\n      if (!history) {\n        //console.log('no history')\n        //return;\n      }\n      //console.log(history)\n      history.push({\n        pathname: \"/search\",\n        search: qs,\n      });\n      //console.log(sc);\n    },\n    [history]\n  );\n\n  const [isFavoriteByPlantId, updateIsFavoriteByPlantId] =\n    useLocalStorage<BoolDict>(\"isFavoriteByPlantId\", {});\n  const favoritePlants = sortPlants(\n    !searchCriteria.city ? 0 : searchCriteria.city.region\n  )(data.plants.filter((p) => !!isFavoriteByPlantId[p.id]));\n  const isPlantFavorite = (p: Plant) => !!isFavoriteByPlantId[p.id];\n\n  const { addToast, removeToast } = useToasts();\n  function togglePlantFavorite(p: Plant) {\n    let isFavoriteNow = !isFavoriteByPlantId[p.id];\n    updateIsFavoriteByPlantId({\n      ...isFavoriteByPlantId,\n      [p.id]: isFavoriteNow,\n    });\n    let thisToastId = \"\";\n    addToast(\n      <div>\n        Plant {isFavoriteNow ? \"added to\" : \"removed from\"} favorites\n        <button\n          className=\"btn btn-link\"\n          onClick={() => {\n            updateIsFavoriteByPlantId({\n              ...isFavoriteByPlantId,\n              [p.id]: !isFavoriteNow,\n            });\n            removeToast(thisToastId);\n            //togglePlantFavorite(p);\n          }}\n        >\n          UNDO\n        </button>\n      </div>,\n      {\n        appearance: \"info\",\n        transitionState: \"entered\",\n        autoDismiss: true,\n      },\n      (toastId) => {\n        thisToastId = toastId;\n      }\n    );\n  }\n\n  const favoriteAsSpreadsheets = (\n    data: Data,\n    searchCriteria: SearchCriteria,\n    favoritePlants: Plant[]\n  ): [string[][], ExcelSheetData[]] => {\n    if (!searchCriteria.city) {\n      return [[], []];\n    }\n    let cityRegionIx = searchCriteria.city.region - 1;\n    const csv = [\n      [\n        \"Type(s)\",\n        \"Botanical Name\",\n        \"Common Name\",\n        \"Water Use\",\n        \"Percentage of ET0\",\n      ],\n      ...favoritePlants.map((p) => [\n        p.types.map((t) => data.plantTypeNameByCode[t]).join(\", \"),\n        p.botanicalName,\n        p.commonName,\n        data.waterUseByCode[p.waterUseByRegion[cityRegionIx]].name,\n        data.waterUseByCode[p.waterUseByRegion[cityRegionIx]].percentageET0 +\n          \"%\",\n      ]),\n    ];\n\n    const xl = [\n      {\n        columns: [\n          \"Type(s)\",\n          \"Botanical Name\",\n          \"Common Name\",\n          \"Water Use\",\n          \"Percentage of ET0\",\n        ],\n        data: favoritePlants.map(\n          (p) =>\n            [\n              p.types.map((t) => data.plantTypeNameByCode[t]).join(\", \"),\n              p.botanicalName,\n              p.commonName,\n              data.waterUseByCode[p.waterUseByRegion[cityRegionIx]].name,\n              data.waterUseByCode[p.waterUseByRegion[cityRegionIx]]\n                .percentageET0 + \"%\",\n            ] as ExcelCellData[]\n        ),\n      } as ExcelSheetData,\n    ];\n\n    return [csv, xl];\n  };\n\n  const getDownloadActions = (\n    data: Data,\n    searchCriteria: SearchCriteria,\n    favoritePlants: Plant[]\n  ): DownloadAction[] => {\n    const ExcelFile = ReactExport.ExcelFile;\n    const ExcelSheet = ReactExport.ExcelFile.ExcelSheet;\n    let [, excelData] = favoriteAsSpreadsheets(\n      data,\n      searchCriteria,\n      favoritePlants\n    );\n    const sideRender = (el: any) => {\n      ReactDOM.render(el, document.getElementById(\"download-outlet\"));\n    };\n    return [\n      /*\n      {\n        method: () => {\n          sideRender(\n            <CSVDownload\n              target=\"_blank\"\n              data={csvData}\n              filename={`WUCOLS_${searchCriteria.city.name}.csv`}\n            />\n          );\n        },\n        label: \n          <>\n            <FontAwesomeIcon icon={faFileExcel} className=\"mr-2\"/>\n            Download in CSV format\n          </>\n      }\n      ,\n      */\n      {\n        method: () => {\n          Promise.all(\n            favoritePlants.map((p: Plant) =>\n              fetch(plantDetailQrCodeFromId(p.id).image_url)\n                .then((r) => r.blob())\n                .then((b) => [p, b] as [Plant, Blob])\n            )\n          ).then((plantBlobPairs) => {\n            var zip = new JSZip();\n            for (let [p, blob] of plantBlobPairs) {\n              zip.file(\n                p.commonName + \".png\",\n                blob as unknown as null,\n                {\n                  blob: true,\n                } as unknown as JSZip.JSZipFileOptions & { dir: true }\n              );\n            }\n            zip.generateAsync({ type: \"blob\" }).then(function (content) {\n              saveAs(content, \"qr-codes.zip\");\n            });\n          });\n        },\n        label: (\n          <>\n            <FontAwesomeIcon icon={faQrcode} className=\"mr-2\" />\n            Download QR codes\n          </>\n        ),\n      },\n      ...data.benchCardTemplates.map((bct) => ({\n        method: () => {\n          Promise.all(\n            favoritePlants.map((p: Plant) =>\n              pdf(\n                <BenchCardDocument\n                  benchCardTemplate={bct}\n                  plant={p}\n                  region={searchCriteria.city.region}\n                  waterUseByCode={data.waterUseByCode}\n                />\n              )\n                .toBlob()\n                .then((b) => [p, b] as [Plant, Blob])\n            )\n          ).then((plantBlobPairs) => {\n            var zip = new JSZip();\n            for (let [p, blob] of plantBlobPairs) {\n              zip.file(\n                p.commonName + \".pdf\",\n                blob as unknown as null,\n                {\n                  blob: true,\n                } as unknown as JSZip.JSZipFileOptions & { dir: true }\n              );\n            }\n            zip.generateAsync({ type: \"blob\" }).then(function (content) {\n              saveAs(content, `bench-cards-${bct.name}.zip`);\n            });\n          });\n        },\n        label: (\n          <>\n            <FontAwesomeIcon icon={faIdCard} className=\"mr-2\" />\n            Download Bench Cards ({bct.name})\n          </>\n        ),\n      })),\n      {\n        method: () => {\n          sideRender(\n            <ExcelFile\n              filename={`WUCOLS_${searchCriteria.city.name}`}\n              hideElement={true}\n            >\n              <ExcelSheet\n                dataSet={excelData}\n                name={`WUCOLS_${searchCriteria.city.name}`}\n              />\n            </ExcelFile>\n          );\n        },\n        label: (\n          <>\n            <FontAwesomeIcon icon={faFileExcel} className=\"mr-2\" />\n            Download in Excel format\n          </>\n        ),\n      },\n    ];\n  };\n\n  return (\n    <div className=\"App\">\n      <nav className=\"navbar navbar-dark bg-dark sticky-top d-flex justify-content-between\">\n        <div className=\"btn-group\">\n          {[\n            {\n              label: \"Search\",\n              icon: faSearch,\n              to: \"/search\" + location.search,\n            },\n            {\n              label: `Favorites (${favoritePlants.length})`,\n              icon: faStar,\n              to: \"/favorites\" + location.search,\n              tooltip: \"Download options available\",\n            },\n          ].map((vm, i) => {\n            return (\n              <NavLink\n                key={i}\n                activeClassName=\"active\"\n                className=\"btn btn-outline-light\"\n                to={vm.to}\n              >\n                <FontAwesomeIcon icon={vm.icon} />\n                <span className=\"ml-2\" title={vm.tooltip}>\n                  {vm.label}\n                </span>\n              </NavLink>\n            );\n          })}\n        </div>\n\n        {!searchCriteria.city || true ? (\n          <div className=\"text-light\">\n            {/*Select a city to enable downloads*/}\n          </div>\n        ) : (\n          <DropdownButton\n            title=\"Download\"\n            variant=\"outline-light\"\n            disabled={!searchCriteria.city}\n          >\n            {getDownloadActions(data, searchCriteria, favoritePlants).map(\n              (a, i) => (\n                <Dropdown.Item onClick={a.method} key={i}>\n                  {a.label}\n                </Dropdown.Item>\n              )\n            )}\n          </DropdownButton>\n        )}\n\n        {/*\n        <div>\n          <span className=\"mr-3 text-light\">\n            View plants in a\n          </span>\n          <div className=\"btn-group\">\n            {plantsViewModes.map(vm => \n              <button className={'btn btn-outline-light' + (vm.id === plantsViewModeId ? ' active' : '')} onClick={() => {\n                setPlantsViewModeId(vm.id);\n              }}>\n                <FontAwesomeIcon icon={vm.icon} />\n                <span className=\"ml-2\">\n                  {vm.label}\n                </span>\n              </button>\n            )}\n          </div>\n        </div>\n        */}\n      </nav>\n      <Route exact={true} path=\"/\">\n        <Redirect to=\"/search\" />\n      </Route>\n      <Route\n        path=\"/map\"\n        render={({ match }) => {\n          return (\n            <div>\n              <Map\n                cities={data.cities}\n                onSelect={(city: City) => {\n                  alert(city.name);\n                }}\n              />\n            </div>\n          );\n        }}\n      />\n      <Route\n        path=\"/plant/:plantId\"\n        exact={true}\n        render={({ match }) => {\n          const id = parseInt(match.params.plantId);\n          let plant = data.plants.filter(\n            (p) => p.id === id || p.url_keyword === match.params.plantId\n          )[0];\n          return !plant ? (\n            <div className=\"container-fluid my-5\">\n              No plant found by that ID\n            </div>\n          ) : (\n            <div className=\"container-fluid\">\n              <SimpleReactLightbox>\n                <PlantDetail\n                  {...{\n                    plant,\n                    photos: data.photos[plant.botanicalName] || [],\n                    benchCardTemplates: data.benchCardTemplates,\n                    plantTypeNameByCode: data.plantTypeNameByCode,\n                    waterUseByCode: data.waterUseByCode,\n                    waterUseClassifications: data.waterUseClassifications,\n                    region: !!searchCriteria.city\n                      ? searchCriteria.city.region\n                      : 0,\n                    togglePlantFavorite,\n                    isPlantFavorite,\n                    regions: data.regions,\n                  }}\n                />\n              </SimpleReactLightbox>\n            </div>\n          );\n        }}\n      />\n      <Route\n        path=\"/plant/:plantId/benchcard/:bctId\"\n        render={({ match }) => {\n          const id = parseInt(match.params.plantId);\n          const bctId = match.params.bctId;\n          const bct = data.benchCardTemplates.filter(\n            (bct) => bct.id === bctId\n          )[0];\n          let plant = data.plants.filter(\n            (p) => p.id === id || p.url_keyword === match.params.plantId\n          )[0];\n          return !plant ? (\n            <div className=\"container-fluid my-5\">\n              No plant found by that ID\n            </div>\n          ) : !bct ? (\n            <div className=\"container-fluid my-5\">\n              No Bench Card found by that ID\n            </div>\n          ) : (\n            <>\n              {/*\n            <pre>{JSON.stringify(plant,null,2)}</pre>\n            */}\n              <PDFViewer\n                style={{ width: \"100vw\", height: \"90vh\" }}\n                showToolbar={false}\n              >\n                <BenchCardDocument\n                  benchCardTemplate={bct}\n                  plant={plant}\n                  region={\n                    (searchCriteria.city && searchCriteria.city.region) || 1\n                  }\n                  waterUseByCode={data.waterUseByCode}\n                />\n              </PDFViewer>\n            </>\n          );\n        }}\n      />\n      <Route exact={true} path=\"/favorites\">\n        <Favorites\n          {...{\n            favoritePlants,\n            queryString: location.search,\n            getDownloadActions: getDownloadActions,\n            isPlantFavorite,\n            togglePlantFavorite,\n            searchCriteria,\n            data,\n          }}\n        />\n      </Route>\n      {/*\n      <Route exact=\"true\" path=\"/search/(types)?/:types?\" render={match => \n      */}\n      <Route\n        exact={true}\n        path=\"/search\"\n        render={(match) => (\n          <Search\n            queryString={location.search}\n            searchCriteria={searchCriteria}\n            isPlantFavorite={isPlantFavorite}\n            togglePlantFavorite={togglePlantFavorite}\n            setSearchCriteria={updateSearchCriteria}\n            data={data}\n          />\n        )}\n      />\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ninterface SWConfig {\n  onUpdate: (registration: ServiceWorkerRegistration) => void;\n  onSuccess: (registration: ServiceWorkerRegistration) => void;\n}\n\nexport function register(config: SWConfig) {\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            \"This web app is being served cache-first by a service \" +\n              \"worker. To learn more, visit https://bit.ly/CRA-PWA\"\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string | URL, config: SWConfig) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                \"New content is available and will be used when all \" +\n                  \"tabs for this page are closed. See https://bit.ly/CRA-PWA.\"\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log(\"Content is cached for offline use.\");\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error(\"Error during service worker registration:\", error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config: SWConfig) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { \"Service-Worker\": \"script\" },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get(\"content-type\");\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        \"No internet connection found. App is running in offline mode.\"\n      );\n    });\n}\n\nexport function unregister() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./Utilities/serviceWorker\";\nimport { ToastProvider } from \"react-toast-notifications\";\nimport {\n  //BrowserRouter as Router,\n  HashRouter as Router,\n} from \"react-router-dom\";\nimport { Data, WaterUseClassification } from \"./types\";\n\nimport \"./sass/wucols.scss\";\n\ndeclare global {\n  interface Window {\n    wucols_data: Data;\n  }\n}\nfetch(\"WUCOLS.json\")\n  .then((r) => r.json())\n  .then((d: Data) => {\n    window.wucols_data = d;\n    d.plants.forEach((p) => {\n      p.searchName = (p.commonName + \" \" + p.botanicalName).toLowerCase();\n    });\n\n    d.plantTypeNameByCode = d.plantTypes.reduce(\n      (dict: { [key: string]: string }, t) => {\n        dict[t.code] = t.name;\n        return dict;\n      },\n      {}\n    );\n\n    d.waterUseByCode = d.waterUseClassifications.reduce(\n      (dict: { [key: string]: WaterUseClassification }, wu) => {\n        dict[wu.code] = wu;\n        return dict;\n      },\n      {}\n    );\n\n    d.cityOptions = d.cities\n      .map((c) => ({\n        id: c.id,\n        position: c.position,\n        key: c.id,\n        name: c.name,\n        label: \"Region \" + c.region + \": \" + c.name,\n        value: c.name,\n        region: c.region,\n      }))\n      .sort((a, b) => (a.label > b.label ? 1 : a.label < b.label ? -1 : 0));\n\n    d.plantTypes = d.plantTypes.sort((a, b) =>\n      a.name < b.name ? -1 : a.name > b.name ? 1 : 0\n    );\n\n    d.benchCardTemplates = d.benchCardTemplates.sort((a, b) =>\n      a.name < b.name ? -1 : a.name > b.name ? 1 : 0\n    );\n\n    ReactDOM.render(\n      <ToastProvider\n        autoDismiss\n        placement=\"bottom-center\"\n        autoDismissTimeout={6000}\n      >\n        <Router /*basename={process.env.PUBLIC_URL}*/>\n          <App data={d} />\n        </Router>\n      </ToastProvider>,\n      document.getElementById(\"root\")\n    );\n  });\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}