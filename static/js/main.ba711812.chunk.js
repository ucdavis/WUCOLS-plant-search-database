(this.webpackJsonpwucols=this.webpackJsonpwucols||[]).push([[0],{384:function(e,t,a){},385:function(e,t,a){},396:function(e,t){},398:function(e,t){},425:function(e,t){},426:function(e,t){},540:function(e,t){},735:function(e,t){},737:function(e,t){},765:function(e,t){},767:function(e,t){},768:function(e,t){},774:function(e,t){},776:function(e,t){},794:function(e,t){},797:function(e,t){},813:function(e,t){},816:function(e,t){},826:function(e,t,a){},827:function(e,t,a){"use strict";a.r(t);var n=a(1),l=a.n(n),r=a(17),c=a.n(r),o=(a(384),a(194)),i=a(46),s=a(54),m=a(11),u=a(16),d=(a(385),a(130)),p={width:"100%",height:"70vh"},b=function(e){var t=e.city,a=e.onClick,n=l.a.useRef(null),r=new window.google.maps.InfoWindow({content:"<div>".concat(t.name,"</div>")}),c=function(e){if(e){var t,a=null===(t=n.current)||void 0===t?void 0:t.marker,l=null===a||void 0===a?void 0:a.map;r.open({anchor:a,map:l,shouldFocus:!1})}else r.close()};return l.a.createElement(l.a.Fragment,null,l.a.createElement(d.b,{position:t.position,ref:function(e){return n.current=e},onClick:function(){a(t),r.close()},onMouseOver:function(){c(!0)},onMouseOut:function(){c(!1)}}))},f=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_GOOGLE_MAPS_API_KEY,g=["geometry"];function E(e){var t=e.cities,a=e.onSelect,n=Object(d.c)({id:"google-map-script",libraries:g,googleMapsApiKey:f}).isLoaded,r=l.a.useState(null),c=Object(u.a)(r,2)[1],o=function(e,t){var a=new window.google.maps.LatLngBounds;t.forEach((function(e){a.extend(e)})),e.fitBounds(a)},i=l.a.useCallback((function(e){var a=t.map((function(e){return new google.maps.LatLng(e.position)})),n=void 0;o(e,a),c(e),window.map=e,console.log("fit bounds to ".concat(t.length," cities"));var l=window.document.createElement("div");l.style.marginBottom="2em",l.style.display="flex",l.style.flexDirection="column",l.innerHTML='\n        <button\n          draggable="false" \n          aria-label="Use my location"\n          title="Use my location"\n          type="button"\n          aria-pressed="true"\n          style=" background: none padding-box rgb(255, 255, 255); display: table-cell; border: 0px; margin: 0px; padding: 0px 17px; text-transform: none; appearance: none; position: relative; cursor: pointer; user-select: none; direction: ltr; overflow: hidden; text-align: center; height: 40px; vertical-align: middle; color: rgb(0, 0, 0); font-family: Roboto, Arial, sans-serif; font-size: 18px; border-bottom-left-radius: 2px; border-top-left-radius: 2px; box-shadow: rgba(0, 0, 0, 0.3) 0px 1px 4px -1px; min-width: 35px; font-weight: 500; margin-bottom:1em;" aria-expanded="false">\n            Use my location\n          </button>',l.innerHTML+='\n        <button\n          draggable="false" \n          aria-label="View all cities"\n          title="View all cities"\n          type="button"\n          aria-pressed="true"\n          style="background: none padding-box rgb(255, 255, 255); display: table-cell; border: 0px; margin: 0px; padding: 0px 17px; text-transform: none; appearance: none; position: relative; cursor: pointer; user-select: none; direction: ltr; overflow: hidden; text-align: center; height: 40px; vertical-align: middle; color: rgb(0, 0, 0); font-family: Roboto, Arial, sans-serif; font-size: 18px; border-bottom-left-radius: 2px; border-top-left-radius: 2px; box-shadow: rgba(0, 0, 0, 0.3) 0px 1px 4px -1px; min-width: 35px; font-weight: 500;" aria-expanded="false">\n            View All Cities\n          </button>',e.controls[window.google.maps.ControlPosition.BOTTOM_CENTER].push(l),window.extraControls=l;var r=l.getElementsByTagName("button");r[1].addEventListener("click",(function(){o(e,a)})),r[0].addEventListener("click",(function(){window.navigator.geolocation.getCurrentPosition((function(a){var l=new window.google.maps.LatLng({lat:a.coords.latitude,lng:a.coords.longitude});window.currentPosition=l,console.log("Your current position is:",l);var r=t.map((function(e){var t=new window.google.maps.LatLng(e.position);return{city:e,cityPosition:t,distance:window.google.maps.geometry.spherical.computeDistanceBetween(l,t)}})).sort((function(e,t){return e.distance-t.distance})).slice(0,5);o(e,r.map((function(e){return e.cityPosition}))),window.setTimeout((function(){n&&n.setMap(null),(n=new window.google.maps.Marker({map:e,draggable:!1,animation:window.google.maps.Animation.DROP,icon:"http://maps.google.com/mapfiles/kml/shapes/man.png",zIndex:0,position:l})).addListener("click",(function(){n&&(null!==n.getAnimation()?n.setAnimation(null):n.setAnimation(window.google.maps.Animation.BOUNCE))}))}),1e3),console.log(r)}),(function(e){console.warn("ERROR(".concat(e.code,"): ").concat(e.message)),alert(3===e.code?"Unable to get your location in a reasonable amount of time":"Unable to get your location")}),{enableHighAccuracy:!1,timeout:5e3,maximumAge:6e4})}))}),[t]),s=l.a.useCallback((function(e){c(null)}),[]);return n?l.a.createElement(d.a,{mapContainerStyle:p,onLoad:i,onUnmount:s},t.map((function(e){return l.a.createElement(b,{key:e.id,city:e,onClick:a})}))):l.a.createElement(l.a.Fragment,null)}var y=l.a.memo(E);var h=function(e,t){var a=l.a.useState((function(){try{var a=window.localStorage.getItem(e);return a?JSON.parse(a):t}catch(n){return console.log(n),t}})),n=Object(u.a)(a,2),r=n[0],c=n[1];return[r,function(t){try{var a=t instanceof Function?t(r):t;c(a),window.localStorage.setItem(e,JSON.stringify(a))}catch(n){console.log(n)}}]},v={VL:1,LO:2,M:3,H:4,U:5,NA:7},w=function(e){return v[e]||99},N=function(e){return function(t){return t.sort((function(t,a){var n=w(t.waterUseByRegion[e-1]),l=w(a.waterUseByRegion[e-1]);return n<l?-1:n>l?1:0}))}},C=function(e){var t=e.type,a=e.plantTypeNameByCode;return l.a.createElement("span",null,l.a.createElement("span",{className:"badge badge-plantType"},"A"===t&&l.a.createElement("span",{role:"img","aria-label":"flower"},"\ud83c\udf38"," "),a[t])," ")},x=a(33),T=a(22),O=function(e){var t=e.waterUseCode,a=function(e){var t=e.filled;return l.a.createElement("span",{style:{opacity:t?1:.3,color:t?"#007bff":"grey",padding:"0 2px"}},l.a.createElement(x.a,{icon:T.j}))},n=l.a.createElement(a,null),r=l.a.createElement(a,{filled:!0});switch(t){case"VL":return l.a.createElement(l.a.Fragment,null,r,n,n,n);case"LO":return l.a.createElement(l.a.Fragment,null,r,r,n,n);case"M":return l.a.createElement(l.a.Fragment,null,r,r,r,n);case"H":return l.a.createElement(l.a.Fragment,null,r,r,r,r);case"U":return l.a.createElement(l.a.Fragment,null,n,n,n,n);default:return l.a.createElement(l.a.Fragment,null,"N/A")}},S=function(e){var t=e.plant,a=e.togglePlantFavorite,n=e.isPlantFavorite,r=function(){return l.a.createElement(x.a,{icon:T.g})},c="drop-shadow( 0px 1px 1px rgba(0, 0, 0, .3))";return l.a.createElement("button",{title:n(t)?"This plant is in your favorites.  Click to remove it.":"Click to add this plant to your favorites.",className:"btn "+(n(t)?" btn-warning":"btn-light"),onClick:function(){return a(t)}},n(t)?l.a.createElement("span",{style:{color:"hsl(60deg 100% 45%)",WebkitFilter:c,filter:c}},l.a.createElement(r,null)):l.a.createElement("span",null,l.a.createElement(r,null)))},j=a(45),k=function(e){var t=e.className,a=e.plants,n=e.photosByPlantName,r=e.plantTypeNameByCode,c=e.waterUseByCode,o=e.region,i=e.isPlantFavorite,s=e.togglePlantFavorite;return l.a.createElement("div",{className:"row no-gutters"},a.map((function(e){var a="150px",m=c[e.waterUseByRegion[o-1]],u=n[e.botanicalName]?n[e.botanicalName].large.url:"https://via.placeholder.com/200";return l.a.createElement("div",{className:t,key:e.id},l.a.createElement("div",{className:"card mr-2 mb-2"},l.a.createElement("div",{className:"d-flex"},l.a.createElement("div",{className:"d-flex-shrink-0"},l.a.createElement("div",{style:{position:"relative"}},l.a.createElement("div",{style:{position:"absolute",top:"10px",right:"10px",color:"unset"}},l.a.createElement(S,{plant:e,togglePlantFavorite:s,isPlantFavorite:i})),l.a.createElement("img",{className:"card-img",style:{width:a,height:a,background:"url(".concat(u,")"),backgroundSize:"cover"},src:u,alt:e.botanicalName}))),l.a.createElement("div",{className:"d-flex-grow-1 ml-3 flex-fill"},l.a.createElement("div",{className:"card-body"},l.a.createElement("div",{className:"float-right text-right ml-3"},l.a.createElement(O,{waterUseCode:m.code}),l.a.createElement("br",null),l.a.createElement("small",null,m.name),l.a.createElement("br",null),l.a.createElement("small",null,m.percentageET0,"% ET",l.a.createElement("sub",null,"0"))),l.a.createElement(j.b,{to:"/plant/".concat(e.id)},l.a.createElement("h6",{className:"mt-0 mb-1"},l.a.createElement("em",null,e.botanicalName))),l.a.createElement("div",null,e.commonName),l.a.createElement("div",null,e.types.map((function(e){return l.a.createElement(C,{plantTypeNameByCode:r,type:e,key:e})}))))))))})))},P=function(e){var t,a=function(e){return""!==(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_PLANT_DETAIL_URL_PATTERN||"")?new URL(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_PLANT_DETAIL_URL_PATTERN.replace(":id",e.toString())).toString():""}(e);return{destination_url:a,image_url:(t=a,"https://chart.googleapis.com/chart?chs=500x500&cht=qr&choe=UTF-8&chl=".concat(encodeURIComponent(t)))}},U=function(e){var t=e.plant,a=e.style,n=P(t.id),r=n.destination_url,c=n.image_url;return l.a.createElement("a",{href:r,target:"_blank",rel:"noreferrer"},l.a.createElement("img",{src:c,alt:"QR Code for "+t.botanicalName,className:"img-responsive",style:Object(m.a)({width:"64px"},a||{})}))},F=function(e){var t=e.queryString,a=e.showAvailableMedia,n=e.plants,r=e.photosByPlantName,c=e.plantTypeNameByCode,o=e.waterUseByCode,i=e.region,s=e.isPlantFavorite,m=e.togglePlantFavorite;return l.a.createElement("table",{className:"table table-sm "},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{rowSpan:2},"Photo"),l.a.createElement("th",{rowSpan:2},"Name"),a&&l.a.createElement(l.a.Fragment,null,l.a.createElement("th",{rowSpan:2},"QR Code")),l.a.createElement("th",{rowSpan:2},"Water Use"),l.a.createElement("th",{rowSpan:2},"Type(s)"),l.a.createElement("th",{rowSpan:2},"Favorite"))),l.a.createElement("tbody",null,n.map((function(e){var n="64px",u=o[e.waterUseByRegion[i-1]],d=r[e.botanicalName]?r[e.botanicalName].small.url:"https://via.placeholder.com/200";return l.a.createElement("tr",{key:e.id},l.a.createElement("td",{style:{width:n}},l.a.createElement("img",{className:"card-img mr-2",style:{width:n,height:n,background:"url(".concat(d,")"),backgroundSize:"cover"},src:d,alt:e.botanicalName})),l.a.createElement("td",null,l.a.createElement(j.b,{to:"/plant/".concat(e.id).concat(t)},l.a.createElement("h6",{className:"mt-0 mb-1"},l.a.createElement("em",null,e.botanicalName))),l.a.createElement("div",null,e.commonName)),a&&l.a.createElement("td",null,l.a.createElement(U,{plant:e})),l.a.createElement("td",null,l.a.createElement(O,{waterUseCode:u.code}),l.a.createElement("small",{className:"ml-2"},u.name),l.a.createElement("br",null),l.a.createElement("small",null,u.percentageET0,"% ET",l.a.createElement("sub",null,"0"),l.a.createElement("br",null),"Plant Factor: ",u.plantFactor)),l.a.createElement("td",null,e.types.map((function(e){return l.a.createElement(C,{plantTypeNameByCode:c,type:e,key:e})}))),l.a.createElement("td",null,l.a.createElement(S,{plant:e,togglePlantFavorite:m,isPlantFavorite:s})))}))))},B=a(366),A=a.n(B),_=a(832),L=[{label:"Match plants with ANY of",value:"ANY",fn:function(e,t){return e||t}},{label:"Match plants with ALL of",value:"ALL",fn:function(e,t){return e&&t}}],I={default:L[0],array:L,byId:L.reduce((function(e,t){return e[t.value]=t,e}),{})},R=a(206),D=function(e){var t=e.cities,a=e.visible,n=e.setVisible,r=e.onCityChange;return l.a.createElement(l.a.Fragment,null,a&&l.a.createElement("div",{className:"modal fade"+(a?" show":""),style:{display:a?"block":"none"},id:"mapModal",tabIndex:-1,"aria-labelledby":"exampleModalLabel","aria-hidden":"true"},l.a.createElement("div",{className:"modal-dialog",style:{top:"30px"}},l.a.createElement("div",{className:"modal-content",style:{width:"65vw",position:"fixed",left:"17vw"}},l.a.createElement("div",{className:"modal-header"},l.a.createElement("h5",{className:"modal-title",id:"exampleModalLabel"},"City Map"),l.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:function(){return n(!1)}},l.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),l.a.createElement("div",{className:"modal-body"},l.a.createElement(y,{cities:t,onSelect:function(e){r(e),n(!1)}}))))))},W=function(e){var t=e.cityOptions,a=e.searchCriteria,n=e.plantTypes,r=e.waterUseClassifications,c=e.updateSearchCriteria,o=l.a.useState(!1),i=Object(u.a)(o,2),d=i[0],p=i[1],b=function(e){c(Object(m.a)(Object(m.a)({},a),{},{pageNumber:1,waterUseClassifications:r.reduce((function(t,a){return t[a.code]=e,t}),{})}))},f=function(e){c(Object(m.a)(Object(m.a)({},a),{},{pageNumber:1,city:e}))},g=function(e){c(Object(m.a)(Object(m.a)({},a),{},{pageNumber:1,plantTypes:n.reduce((function(t,a){return t[a.code]=e,t}),{})}))},E=l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,l.a.createElement("strong",null,"Plant Name")),l.a.createElement("input",{type:"search",className:"form-control",value:a.name,placeholder:"botanical or common name",onChange:function(e){return c(Object(m.a)(Object(m.a)({},a),{},{pageNumber:1,name:e.target.value.toLowerCase()}))}})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"form-label"},l.a.createElement("strong",null,"Water Use")),l.a.createElement("div",null,l.a.createElement("button",{className:"btn btn-sm btn-link",onClick:function(){return b(!0)}},"Select all"),"/"," ",l.a.createElement("button",{className:"btn btn-sm btn-link",onClick:function(){return b(!1)}},"Deselect all")),r.map((function(e){return l.a.createElement("div",{className:"form-check",key:e.code},l.a.createElement("input",{className:"form-check-input",type:"checkbox",checked:a.waterUseClassifications[e.code],onChange:function(t){return c(Object(m.a)(Object(m.a)({},a),{},{pageNumber:1,waterUseClassifications:Object(m.a)(Object(m.a)({},a.waterUseClassifications),{},Object(s.a)({},e.code,t.target.checked))}))},id:e.code+"_checkbox"}),l.a.createElement("label",{className:"form-check-label",htmlFor:e.code+"_checkbox"},e.name))}))),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"form-label"},l.a.createElement("strong",null,"Plant Types")),l.a.createElement("div",null,l.a.createElement("button",{className:"btn btn-sm btn-link",onClick:function(){return g(!0)}},"Select all"),"/",l.a.createElement("button",{className:"btn btn-sm btn-link",onClick:function(){return g(!1)}},"Deselect all")),l.a.createElement("div",null,l.a.createElement(R.a,{styles:{container:function(e){return Object(m.a)(Object(m.a)({},e),{},{flex:1})}},options:I.array,value:a.plantTypeCombinator,onChange:function(e){c(Object(m.a)(Object(m.a)({},a),{},{pageNumber:1,plantTypeCombinator:e}))},noOptionsMessage:function(){return"No result"}})),n.map((function(e){return l.a.createElement("div",{className:"form-check",key:e.code},l.a.createElement("input",{className:"form-check-input",type:"checkbox",checked:a.plantTypes[e.code]||!1,onChange:function(t){return n=e.code,l=t.target.checked,c(Object(m.a)(Object(m.a)({},a),{},{pageNumber:1,plantTypes:Object(m.a)(Object(m.a)({},a.plantTypes),{},Object(s.a)({},n,l))}));var n,l},id:e.code+"_checkbox"}),l.a.createElement("label",{className:"form-check-label",htmlFor:e.code+"_checkbox"},e.name))}))));return l.a.createElement("div",null,l.a.createElement(D,{visible:d,setVisible:p,onCityChange:f,cities:t}),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,l.a.createElement("strong",null,"City/Region"),l.a.createElement("br",null),"Start typing to search"),l.a.createElement(R.a,{styles:{container:function(e){return Object(m.a)(Object(m.a)({},e),{},{flex:1})}},options:t,placeholder:"Select a city",value:a.city,onChange:f,noOptionsMessage:function(){return"No cities found by that name"}})," or ",l.a.createElement("button",{className:"btn btn-link btn-sm",onClick:function(){return p(!0)}},l.a.createElement(x.a,{icon:T.d})," Select city from map")),a.city?E:l.a.createElement(l.a.Fragment,null))},M=function(e){return{city:null,name:"",waterUseClassifications:{},plantTypes:e.reduce((function(e,t){return e[t.code]=!1,e}),{}),pageNumber:1,plantTypeCombinator:I.default}},V={fromQuerystring:function(e){var t=new URLSearchParams(e);return{pageNumber:parseInt(t.get("p")||"")||1,plantTypes:t.getAll("t").reduce((function(e,t){return e[t]=!0,e}),{}),name:(t.get("n")||"").toLowerCase(),plantTypeCombinatorId:t.get("tm")||"",cityId:parseInt(t.get("c")||"0"),waterUseClassifications:t.getAll("wu").reduce((function(e,t){return e[t]=!0,e}),{})}},toQuerystring:function(e){var t=Object.entries(e.waterUseClassifications).filter((function(e){return Object(u.a)(e,2)[1]})).map((function(e){return Object(u.a)(e,1)[0]})),a=Object.entries(e.plantTypes).filter((function(e){return Object(u.a)(e,2)[1]})).map((function(e){return Object(u.a)(e,1)[0]}));return new URLSearchParams([].concat(Object(i.a)(e.city?[["c",e.city.id.toString()]]:[]),Object(i.a)(e.name?[["n",e.name]]:[]),Object(i.a)(e.plantTypeCombinator===I.default?[]:[["tm",e.plantTypeCombinator.value]]),Object(i.a)(t.map((function(e){return["wu",e]}))),Object(i.a)(a.map((function(e){return["t",e]}))),Object(i.a)(1===e.pageNumber?[]:[["p",e.pageNumber.toString()]]))).toString()},getDefaultSearchCriteria:M,initSearchCriteria:function(e,t,a){var n=V.fromQuerystring(e),l=M(a);return l.waterUseClassifications=n.waterUseClassifications,l.plantTypes=n.plantTypes,l.name=n.name,l.pageNumber=n.pageNumber,l.city=t.filter((function(e){return e.id===n.cityId}))[0]||l.city,n.plantTypeCombinatorId in I.byId&&(l.plantTypeCombinator=I.byId[n.plantTypeCombinatorId]),l}},H=V,z=function(){return l.a.createElement("div",{className:"welcome-wrapper"},l.a.createElement("h1",null,"Welcome to WUCOLS"),l.a.createElement("p",{className:"lead"},"WUCOLS"," ",l.a.createElement("span",{className:"discreet"},"Water Use Classification of Landscape Species")," ",l.a.createElement("br",null),"helps you create a landscape plan based on plant water use within your city/region."),l.a.createElement("h2",null,"Instructions:"),l.a.createElement("hr",null),l.a.createElement("ol",{className:"instructionlist"},l.a.createElement("li",null,l.a.createElement("p",null,l.a.createElement("b",null,"Select a City/Region")," ",l.a.createElement("br",null),"This will determine the appropriate water use rating for each plant.")),l.a.createElement("li",null,l.a.createElement("p",null,l.a.createElement("b",null,"Search a Plant")," ",l.a.createElement("br",null),'Enter any combination of "Plant Name, Water Use, Plant Types" to find plants of interest')),l.a.createElement("li",null,l.a.createElement("p",null,l.a.createElement("b",null,"Favorite")," ",l.a.createElement("br",null),"Assemble a list of your plants that meet your needs.")),l.a.createElement("li",null,l.a.createElement("p",null,l.a.createElement("b",null,"Download")," ",l.a.createElement("br",null),"Download your list in a variety of formats"))))},K=function(e){var t=e.data,a=e.searchCriteria,n=e.setSearchCriteria,r=e.isPlantFavorite,c=e.togglePlantFavorite,o=e.queryString,i=[{id:"list",label:"List",component:F,icon:T.a},{id:"grid",label:"Grid",component:function(e){return k(Object(m.a)(Object(m.a)({},e),{},{className:"col-sm-12 col-lg-6 col-xl-6"}))},icon:T.i},{id:"dense-grid",label:"Dense Grid",component:function(e){return k(Object(m.a)(Object(m.a)({},e),{},{className:"col-sm-12 col-lg-6 col-xl-4"}))},icon:T.h}],s=l.a.useState(i[0].id),d=Object(u.a)(s,1)[0],p=i.filter((function(e){return e.id===d}))[0]||i[0],b=Object.values(a.waterUseClassifications).some((function(e){return e}))||Object.values(a.plantTypes).some((function(e){return e}))||a.name.length>0,f=l.a.useMemo((function(){var e=Object.values(a.plantTypes).every((function(e){return!e})),n=Object.values(a.waterUseClassifications).every((function(e){return!e})),l=Object.entries(a.plantTypes).filter((function(e){var t=Object(u.a)(e,2);t[0];return!!t[1]})).map((function(e){var t=Object(u.a)(e,2),a=t[0];t[1];return a})),r=a.plantTypeCombinator===I.byId.ANY?l.some.bind(l):l.every.bind(l);return a.city?N(a.city.region)(t.plants.filter((function(t){var l=e||r((function(e){return t.types.indexOf(e)>-1}));if(!a.city)return!1;var c=t.waterUseByRegion[a.city.region-1],o=a.waterUseClassifications[c]||n,i=!a.name||t.searchName.indexOf(a.name)>-1;return o&&l&&i}))).slice(0,5e4):[]}),[t,a]),g=Math.max(1,Math.ceil(f.length/50)),E=g>0?a.pageNumber:1,y=A.a.getPaginationModel({currentPage:E,totalPages:g,boundaryPagesRange:1,siblingPagesRange:1,hideEllipsis:!1,hidePreviousAndNextPageLinks:!1,hideFirstAndLastPageLinks:!1}),h=g>1&&l.a.createElement(_.a,null,y.map((function(e){var t={key:e.key,active:e.isActive,onClick:function(){return t=e.value,n(Object(m.a)(Object(m.a)({},a),{},{pageNumber:t}));var t}};switch(e.type){case"PAGE":return l.a.createElement(_.a.Item,t,e.value);case"ELLIPSIS":return l.a.createElement(_.a.Ellipsis,t);default:return}})).filter((function(e){return!!e})));return l.a.createElement("div",{className:"container-fluid"},l.a.createElement("div",{className:"row"},l.a.createElement("nav",{className:"col-sm-5 col-lg-4 col-xl-3 sidebar bg-light"},l.a.createElement("div",{className:"sidebar-sticky p-3"},l.a.createElement(W,{waterUseClassifications:t.waterUseClassifications,plantTypes:t.plantTypes,cityOptions:t.cityOptions,searchCriteria:a,updateSearchCriteria:n}))),l.a.createElement("main",{className:"col-sm-7 col-lg-8 col-xl-9 ml-sm-auto",role:"main"},b?l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"d-flex justify-content-between align-items-center mb-3"},l.a.createElement("div",null,"Matching Plants: ",f.length),b&&l.a.createElement("button",{className:"btn btn-link",onClick:function(){return n(H.getDefaultSearchCriteria(t.plantTypes))}},"Clear Search Form (Start over)")),h,a.city?l.a.createElement(p.component,{queryString:o,isPlantFavorite:r,togglePlantFavorite:c,plants:f.slice(50*(a.pageNumber-1),50*(a.pageNumber+1)),photosByPlantName:t.photos,plantTypeNameByCode:t.plantTypeNameByCode,region:a.city.region,waterUseByCode:t.waterUseByCode}):l.a.createElement("div",null,"Please select a city"),h):l.a.createElement(z,null))))},Q=a(121),q=function(e){var t=e.plant,a=e.plantTypeNameByCode,n=e.waterUseByCode,r=e.region,c=e.regions,o=e.benchCardTemplates,i=e.isPlantFavorite,s=e.togglePlantFavorite;if(!t)return l.a.createElement("div",null,"Invalid Plant");var m=c.map((function(e){return[e,n[t.waterUseByRegion[e.id-1]]]})),d="64px",p=t.photos[0],b=p?p.large.url:"",f=l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"float-right h2"},l.a.createElement(S,{plant:t,togglePlantFavorite:s,isPlantFavorite:i})),l.a.createElement("div",{className:"d-flex flex-row bd-highlight align-items-center mb-4 "},b&&l.a.createElement("img",{className:"mr-3",src:b,style:{objectFit:"cover",width:d,height:d},alt:t.botanicalName}),l.a.createElement("h1",{className:"m0"},l.a.createElement("em",null,t.botanicalName))),l.a.createElement("table",{className:"table table-bordered"},l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("th",{style:{width:"25%"}},"Botanical Name"),l.a.createElement("td",null,l.a.createElement("em",null,t.botanicalName))),l.a.createElement("tr",null,l.a.createElement("th",null,"Common Name"),l.a.createElement("td",null,t.commonName)),l.a.createElement("tr",null,l.a.createElement("th",null,"Plant Type(s)"),l.a.createElement("td",null,t.types.map((function(e){return l.a.createElement(C,{type:e,plantTypeNameByCode:a,key:e})})))))),l.a.createElement("div",{className:"my-5"},l.a.createElement("h4",{className:"mb-4"},"Water Usage by Region"),l.a.createElement("table",{className:"table table-bordered table-sm"},l.a.createElement("tbody",null,m.map((function(e){var t=Object(u.a)(e,2),a=t[0],n=t[1];return l.a.createElement("tr",{className:a.id===r?"table-primary":"",key:a.id},l.a.createElement("td",null,"Region ",a.id,": ",a.name),l.a.createElement("td",{style:{whiteSpace:"nowrap"}},l.a.createElement(O,{waterUseCode:n.code})),l.a.createElement("td",{style:{whiteSpace:"nowrap"}},n.name),l.a.createElement("td",{style:{whiteSpace:"nowrap"}},"N/A"===n.percentageET0?"N/A":l.a.createElement(l.a.Fragment,null,n.percentageET0,"% ET",l.a.createElement("sub",null,"0"))))}))))),!!t.culturalInformation&&l.a.createElement("div",null,l.a.createElement("h4",{className:"mb-4"},"Cultural Information"),l.a.createElement("div",{dangerouslySetInnerHTML:{__html:t.culturalInformation}})),l.a.createElement("div",{className:"row mt-4"},!!t.photos.length&&l.a.createElement("div",{className:"col-sm-12"},l.a.createElement("h4",{className:"mb-4"},"Photos (",t.photos.length,")"),l.a.createElement(Q.a,{key:"plant gallery"},l.a.createElement("div",{className:"row row-cols-1 row-cols-md-3 g-4"},t.photos.map((function(e,t){return l.a.createElement("div",{className:"col",key:t},l.a.createElement("div",{className:"card mb-3",key:t},l.a.createElement("a",{href:e.full.url},l.a.createElement("img",{src:e.large.url,className:"card-img-top",alt:e.caption,style:{height:"10em",objectFit:"cover"}})),l.a.createElement("div",{className:"card-body text-center"},l.a.createElement("p",{className:"card-text"},e.caption))))})))))));return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-8 col-xl-9 ml-sm-auto pt-3 pb-5 px-5"},f),l.a.createElement("nav",{className:"col-md-4 col-xl-3"},l.a.createElement("div",{className:"p-3"},l.a.createElement("div",{className:"d-flex flex-column"},o.map((function(e){return l.a.createElement("div",{className:"card mb-3 text-center",key:e.id},l.a.createElement("div",{className:"card-body d-flex flex-column justify-content-between"},l.a.createElement("h4",null,e.name," Bench Card"),l.a.createElement(j.b,{key:e.id,to:"/plant/".concat(t.id,"/benchcard/").concat(e.id),className:"mt-3 btn btn-primary",target:"_blank"},"Download")))})),l.a.createElement("div",{className:"card mr-3 text-center"},l.a.createElement("div",{className:"card-body"},l.a.createElement("h4",null,"QR Code"),l.a.createElement(U,{plant:t,style:{width:"auto",maxWidth:"150px"}}))))))))},Y=a(199),G=a.n(Y),J=a(200),$=a(14),X=function(e){var t=e.queryString,a=e.favoritePlants,n=e.getDownloadActions,r=e.data,c=e.isPlantFavorite,o=e.togglePlantFavorite,i=e.searchCriteria;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"container-fluid"},a.length?l.a.createElement("div",{className:"row"},l.a.createElement("nav",{className:"col-sm-4 col-lg-3 col-xl-2 sidebar bg-light"},l.a.createElement("div",{className:"sidebar-sticky p-3"},!!a.length&&l.a.createElement("div",{className:"mb-3 d-flex flex-column justify-content-around"},l.a.createElement("div",{className:"mb-3"},function(e,t,a){return n(r,t,a).map((function(t){return l.a.createElement("button",{className:e,onClick:t.method},t.label)}))}("btn btn-primary btn-block",i,a).map((function(e,t){return l.a.createElement("div",{className:"my-2",key:t},e)}))),l.a.createElement("p",null,"QR Codes and Bench Cards can be downloaded individually for each plant from that plant's detail screen.")))),l.a.createElement("div",{className:"col-sm-8 col-lg-9 col-xl-10 ml-sm-auto"},l.a.createElement("div",{className:"my-3"},0===a.length?"You don't have any favorites yet.":1===a.length?"You have 1 favorite so far.":l.a.createElement("div",null,"You have ",l.a.createElement("strong",null,a.length)," favorites so far.")),i.city?l.a.createElement(F,{queryString:t,showAvailableMedia:!0,isPlantFavorite:c,togglePlantFavorite:o,plants:a,photosByPlantName:r.photos,plantTypeNameByCode:r.plantTypeNameByCode,region:i.city.region,waterUseByCode:r.waterUseByCode}):l.a.createElement("div",null,"Select a city to view your favorites"))):l.a.createElement("div",{className:"py-5"},l.a.createElement("div",{className:"text-center mb-5"},l.a.createElement("div",{className:"h3"},"You do not have any favorite species yet"),l.a.createElement("p",null,"After you have added some favorites, you can download them in various formats.")),l.a.createElement("div",{className:"d-flex justify-content-around"},[{icon:T.b,label:"Spreadsheet"},{icon:T.e,label:"QR Codes"},{icon:T.c,label:"Bench Cards"}].map((function(e,t){return l.a.createElement("div",{className:"",key:t},l.a.createElement("div",{className:"card"},l.a.createElement("div",{className:"card-body text-center"},l.a.createElement(x.a,{icon:e.icon,className:"mt-2 h1"}),l.a.createElement("div",{className:"h5"},e.label))))}))))))},Z=(a(831),a(377),a(205)),ee=a.n(Z),te=a(20),ae=a(122),ne=!1,le=$.StyleSheet.create({page:{textAlign:"center",backgroundColor:"white"},waterUseClassificationBox:{backgroundColor:"#304971",padding:"8pt",width:"44%",textAlign:"center"},logo:{},logos:{},section:{margin:10,padding:10,flexGrow:1}}),re=function(){$.Font.register({family:"FontAwesome",src:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.2.0/fonts/fontawesome-webfont.ttf"});var e=function(e){var t=e.filled;return l.a.createElement($.Text,{style:{opacity:t?1:.3,color:t?"#007bff":"grey",fontFamily:"FontAwesome"}},"\uf043")},t=l.a.createElement(e,null),a=l.a.createElement(e,{filled:!0});return{"?":l.a.createElement(l.a.Fragment,null,t,t,t,t),N:l.a.createElement(l.a.Fragment,null,t,t,t,t),VL:l.a.createElement(l.a.Fragment,null,a,t,t,t),LO:l.a.createElement(l.a.Fragment,null,a,a,t,t),M:l.a.createElement(l.a.Fragment,null,a,a,a,t),H:l.a.createElement(l.a.Fragment,null,a,a,a,a)}}(),ce=function(e){var t=e.waterUseCode;return l.a.createElement($.View,{style:{display:"flex",flexDirection:"row",justifyContent:"space-evenly",margin:"0 25%"}},re[t])||l.a.createElement(l.a.Fragment,null,"N/A")},oe=function(e){var t=e.plant,a=e.region,n=e.waterUseByCode,r=e.benchCardTemplate,c=t,o=P(t.id).image_url,i=n[c.waterUseByRegion[a-1]],s=c.photos[0],m=s?s.large.url:"";console.log({leadPhoto:s,photoUrl:m});var u=r.sizeInInches,d={x:72*u.x,y:72*u.y},p={height:"".concat(u.y/5,"in"),width:"auto"};return l.a.createElement($.Document,null,l.a.createElement($.Page,{size:[d.x,d.y],style:le.page},l.a.createElement($.View,{debug:ne,style:{display:"flex",height:"100%",padding:"18pt",flexDirection:"column",justifyContent:"space-evenly"}},l.a.createElement($.View,null,l.a.createElement($.Text,{debug:ne,style:{fontSize:"".concat(.5,"in"),fontWeight:"extrabold"}},t.botanicalName),l.a.createElement($.Text,{debug:ne,style:{fontSize:"25pt",fontWeight:"normal",fontStyle:"italic",padding:"20pt"}},t.commonName)),l.a.createElement($.View,{debug:ne,style:{display:"flex",flexDirection:"row",padding:"".concat(u.x/11/8,"in"),justifyContent:"space-around"}},!!m&&l.a.createElement($.Image,{debug:ne,src:m,style:{width:"45%"}}),l.a.createElement($.View,{debug:ne,style:[le.waterUseClassificationBox,{fontSize:"".concat(u.x/11/4,"in")}]},l.a.createElement($.Text,{style:{color:"white",paddingBottom:"".concat(u.x/11/8,"in")}},"Water Use Classification"),l.a.createElement($.View,{style:{backgroundColor:"white",flexGrow:1,display:"flex",flexDirection:"column",justifyContent:"space-evenly"}},l.a.createElement($.Text,null,i.name),l.a.createElement($.View,{style:{fontSize:"".concat(u.x/11/2,"in")}},l.a.createElement(ce,{waterUseCode:i.code})),l.a.createElement($.View,null,l.a.createElement($.Text,null,"Central Valley"),l.a.createElement($.Text,null,"(WUCOLS Region 2)")),l.a.createElement($.Text,null,"(Source: WUCOLS IV)")))),l.a.createElement($.View,{debug:ne,style:{display:"flex",flexDirection:"row",justifyContent:"space-evenly",alignItems:"center",padding:"2em",margin:"5em"}},l.a.createElement($.Image,{debug:ne,src:"/logo-dwr.png",style:p}),l.a.createElement($.Image,{debug:ne,src:"/logo-ucd-ccuh.png",style:p}),l.a.createElement($.Image,{debug:ne,src:"/logo-ucanr.png",style:p}),l.a.createElement($.Image,{debug:ne,src:o,style:p})))))};oe.defaultProps={benchCardTemplate:void 0};var ie=oe;var se=function(e){var t=e.data,a=Object(te.g)(),n=Object(te.f)(),r=H.initSearchCriteria(a.search,t.cityOptions,t.plantTypes),d=l.a.useCallback((function(e){var t=H.toQuerystring(e);n.push({pathname:"/search",search:t})}),[n]),p=h("isFavoriteByPlantId",{}),b=Object(u.a)(p,2),f=b[0],g=b[1],E=N(r.city?r.city.region:0)(t.plants.filter((function(e){return!!f[e.id]}))),v=function(e){return!!f[e.id]},w=Object(ae.useToasts)(),C=w.addToast,O=w.removeToast;function S(e){var t=!f[e.id];g(Object(m.a)(Object(m.a)({},f),{},Object(s.a)({},e.id,t)));var a="";C(l.a.createElement("div",null,"Plant ",t?"added to":"removed from"," favorites",l.a.createElement("button",{className:"btn btn-link",onClick:function(){g(Object(m.a)(Object(m.a)({},f),{},Object(s.a)({},e.id,!t))),O(a)}},"UNDO")),{appearance:"info",transitionState:"entered",autoDismiss:!0},(function(e){a=e}))}var k=function(e,t,a){var n=ee.a.ExcelFile,r=ee.a.ExcelFile.ExcelSheet,s=function(e,t,a){if(!t.city)return[[],[]];var n=t.city.region-1;return[[["Type(s)","Botanical Name","Common Name","Water Use","Percentage of ET0"]].concat(Object(i.a)(a.map((function(t){return[t.types.map((function(t){return e.plantTypeNameByCode[t]})).join(", "),t.botanicalName,t.commonName,e.waterUseByCode[t.waterUseByRegion[n]].name,e.waterUseByCode[t.waterUseByRegion[n]].percentageET0+"%"]})))),[{columns:["Type(s)","Botanical Name","Common Name","Water Use","Percentage of ET0"],data:a.map((function(t){return[t.types.map((function(t){return e.plantTypeNameByCode[t]})).join(", "),t.botanicalName,t.commonName,e.waterUseByCode[t.waterUseByRegion[n]].name,e.waterUseByCode[t.waterUseByRegion[n]].percentageET0+"%"]}))}]]}(e,t,a),m=Object(u.a)(s,2)[1];return[{method:function(){Promise.all(a.map((function(e){return fetch(P(e.id).image_url).then((function(e){return e.blob()})).then((function(t){return[e,t]}))}))).then((function(e){var t,a=new G.a,n=Object(o.a)(e);try{for(n.s();!(t=n.n()).done;){var l=Object(u.a)(t.value,2),r=l[0],c=l[1];a.file(r.commonName+".png",c,{blob:!0})}}catch(i){n.e(i)}finally{n.f()}a.generateAsync({type:"blob"}).then((function(e){Object(J.saveAs)(e,"qr-codes.zip")}))}))},label:l.a.createElement(l.a.Fragment,null,l.a.createElement(x.a,{icon:T.e,className:"mr-2"}),"Download QR codes")}].concat(Object(i.a)(e.benchCardTemplates.map((function(n){return{method:function(){Promise.all(a.map((function(a){return Object($.pdf)(l.a.createElement(ie,{benchCardTemplate:n,plant:a,region:t.city.region,waterUseByCode:e.waterUseByCode})).toBlob().then((function(e){return[a,e]}))}))).then((function(e){var t,a=new G.a,l=Object(o.a)(e);try{for(l.s();!(t=l.n()).done;){var r=Object(u.a)(t.value,2),c=r[0],i=r[1];a.file(c.commonName+".pdf",i,{blob:!0})}}catch(s){l.e(s)}finally{l.f()}a.generateAsync({type:"blob"}).then((function(e){Object(J.saveAs)(e,"bench-cards-".concat(n.name,".zip"))}))}))},label:l.a.createElement(l.a.Fragment,null,l.a.createElement(x.a,{icon:T.c,className:"mr-2"}),"Download Bench Cards (",n.name,")")}}))),[{method:function(){var e;e=l.a.createElement(n,{filename:"WUCOLS_".concat(t.city.name),hideElement:!0},l.a.createElement(r,{dataSet:m,name:"WUCOLS_".concat(t.city.name)})),c.a.render(e,document.getElementById("download-outlet"))},label:l.a.createElement(l.a.Fragment,null,l.a.createElement(x.a,{icon:T.b,className:"mr-2"}),"Download in Excel format")}])};return l.a.createElement("div",{className:"App"},l.a.createElement("nav",{className:"navbar navbar-dark bg-dark sticky-top d-flex justify-content-between"},l.a.createElement("div",{className:"btn-group"},[{label:"Search",icon:T.f,to:"/search"+a.search},{label:"Favorites (".concat(E.length,")"),icon:T.g,to:"/favorites"+a.search,tooltip:"Download options available"}].map((function(e,t){return l.a.createElement(j.c,{key:t,activeClassName:"active",className:"btn btn-outline-light",to:e.to},l.a.createElement(x.a,{icon:e.icon}),l.a.createElement("span",{className:"ml-2",title:e.tooltip},e.label))}))),(r.city,l.a.createElement("div",{className:"text-light"}))),l.a.createElement(te.b,{exact:!0,path:"/"},l.a.createElement(te.a,{to:"/search"})),l.a.createElement(te.b,{path:"/map",render:function(e){e.match;return l.a.createElement("div",null,l.a.createElement(y,{cities:t.cities,onSelect:function(e){alert(e.name)}}))}}),l.a.createElement(te.b,{path:"/plant/:plantId",exact:!0,render:function(e){var a=e.match,n=parseInt(a.params.plantId),c=t.plants.filter((function(e){return e.id===n||e.url_keyword===a.params.plantId}))[0];return c?l.a.createElement("div",{className:"container-fluid"},l.a.createElement(Q.b,null,l.a.createElement(q,{plant:c,photos:t.photos[c.botanicalName]||[],benchCardTemplates:t.benchCardTemplates,plantTypeNameByCode:t.plantTypeNameByCode,waterUseByCode:t.waterUseByCode,waterUseClassifications:t.waterUseClassifications,region:r.city?r.city.region:0,togglePlantFavorite:S,isPlantFavorite:v,regions:t.regions}))):l.a.createElement("div",{className:"container-fluid my-5"},"No plant found by that ID")}}),l.a.createElement(te.b,{path:"/plant/:plantId/benchcard/:bctId",render:function(e){var a=e.match,n=parseInt(a.params.plantId),c=a.params.bctId,o=t.benchCardTemplates.filter((function(e){return e.id===c}))[0],i=t.plants.filter((function(e){return e.id===n||e.url_keyword===a.params.plantId}))[0];return i?o?l.a.createElement(l.a.Fragment,null,l.a.createElement($.PDFViewer,{style:{width:"100vw",height:"90vh"},showToolbar:!1},l.a.createElement(ie,{benchCardTemplate:o,plant:i,region:r.city&&r.city.region||1,waterUseByCode:t.waterUseByCode}))):l.a.createElement("div",{className:"container-fluid my-5"},"No Bench Card found by that ID"):l.a.createElement("div",{className:"container-fluid my-5"},"No plant found by that ID")}}),l.a.createElement(te.b,{exact:!0,path:"/favorites"},l.a.createElement(X,{favoritePlants:E,queryString:a.search,getDownloadActions:k,isPlantFavorite:v,togglePlantFavorite:S,searchCriteria:r,data:t})),l.a.createElement(te.b,{exact:!0,path:"/search",render:function(e){return l.a.createElement(K,{queryString:a.search,searchCriteria:r,isPlantFavorite:v,togglePlantFavorite:S,setSearchCriteria:d,data:t})}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(826);fetch("WUCOLS.json").then((function(e){return e.json()})).then((function(e){window.wucols_data=e,e.plants.forEach((function(e){e.searchName=(e.commonName+" "+e.botanicalName).toLowerCase()})),e.plantTypeNameByCode=e.plantTypes.reduce((function(e,t){return e[t.code]=t.name,e}),{}),e.waterUseByCode=e.waterUseClassifications.reduce((function(e,t){return e[t.code]=t,e}),{}),e.cityOptions=e.cities.map((function(e){return{id:e.id,position:e.position,key:e.id,name:e.name,label:"Region "+e.region+": "+e.name,value:e.name,region:e.region}})).sort((function(e,t){return e.label>t.label?1:e.label<t.label?-1:0})),e.plantTypes=e.plantTypes.sort((function(e,t){return e.name<t.name?-1:e.name>t.name?1:0})),e.benchCardTemplates=e.benchCardTemplates.sort((function(e,t){return e.name<t.name?-1:e.name>t.name?1:0})),c.a.render(l.a.createElement(ae.ToastProvider,{autoDismiss:!0,placement:"bottom-center",autoDismissTimeout:6e3},l.a.createElement(j.a,null,l.a.createElement(se,{data:e}))),document.getElementById("root"))})),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[827,1,2]]]);
//# sourceMappingURL=main.ba711812.chunk.js.map